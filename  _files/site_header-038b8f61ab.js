!function e(t,r,o){function n(a,i){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,o)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ShelvedBookOrigin={BROWSE_SPOTLIGHT:"browse_spotlight",RECS_WIDGET:"recs_widget"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",BOOK_SHOW_INTERACTION_PARAM:"ac=1",DISCUSSIONS_PANE_ALL_DISCUSSIONS:"nav_bar_discussions_pane_all_discussions",DISCUSSIONS_PANE_GROUP:"nav_bar_discussions_pane_group",DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS:"nav_bar_discussions_pane_group_all_unread_posts",DISCUSSIONS_PANE_DISCUSSION:"nav_bar_discussions_pane_discussion",DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES:"nav_bar_discussions_sparse_reading_challenge",DISCUSSIONS_PANE_SPARSE_ALL:"nav_bar_discussions_sparse_all",DISCUSSIONS_PANE_SPARSE_POPULAR:"nav_bar_discussions_sparse_popular"}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRACKED_CLASSES={book_image:{dfp:!0,pmet:{click_type:"book_image"}},book_title:{dfp:!0,pmet:{click_type:"book_title"}},author_link:{dfp:!0,pmet:{click_type:"author_name"}},full_content_link:{dfp:!0,pmet:{click_type:"body_click"}},user_profile:{dfp:!0,pmet:{click_type:"social"}},want_to_read_button:{dfp:!0,pmet:{click_type:"wtr_button"}},sponsored_update_body_image:{dfp:!0,pmet:{click_type:"image"}},cta_link:{dfp:!0,pmet:{click_type:"cta_click"}},sponsored_footer_actions:{dfp:!0,pmet:{click_type:"sponsored"}},newsfeed_caret_not_interested:{dfp:!1,pmet:{click_type:"not_interested"}},newsfeed_caret_help:{dfp:!1,pmet:{click_type:"why"}},newsfeed_caret:{dfp:!1,pmet:{click_type:"caret"}},user_rating_star:{dfp:!0,pmet:{click_type:"rating"}},preview_book:{dfp:!0,pmet:{click_type:"preview"}},sponsored_update_body_title_link:{dfp:!0,pmet:{click_type:"sponsored_title"}}},r.TRACKED_CLASSES_AUDIBLE={AEP_Desktop_Browse_Image:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Image"}},AEP_Desktop_Browse_Title:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Title"}},AEP_Desktop_Browse_ExploreButton:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_ExploreButton"}},AEP_Desktop_Browse_SponsoredBy:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_SponsoredBy"}},AEP_Desktop_Video_ExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Video_ExternalLink",no_redirect:!0}},AEP_Desktop_Sponsored_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookImage",no_redirect:!0}},AEP_Desktop_Sponsored_BookTitle:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookTitle",no_redirect:!0}},AEP_Desktop_Sponsored_AuthorLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_AuthorLink",no_redirect:!0}},AEP_Desktop_Sponsored_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_WantToRead",no_redirect:!0}},AEP_Desktop_Sponsored_Stars:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_Stars",no_redirect:!0}},AEP_Desktop_Sponsored_BookDescription:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookDescription",no_redirect:!0}},AEP_Desktop_Sponsored_BookExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookExternalLink",no_redirect:!0}},AEP_Desktop_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_BookImage",no_redirect:!0}},AEP_Desktop_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookImage",no_redirect:!0}},AEP_Mobile_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookTitle:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookTitle",no_redirect:!0}},AEP_Mobile_Carousel_Author:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_Author",no_redirect:!0}}},r.TRACKED_CLASSES_PREMIUM_CAMPAIGN={fcm_blog_title:{dfp:!0,pmet:{click_type:"fcm_blog_title"}},fcm_blog_image:{dfp:!0,pmet:{click_type:"fcm_blog_image"}},fcm_blog_button:{dfp:!0,pmet:{click_type:"fcm_blog_button"}},fcm_book_author:{dfp:!0,pmet:{click_type:"fcm_book_author"}},fcm_book_image:{dfp:!0,pmet:{click_type:"fcm_book_image"}},fcm_book_title:{dfp:!0,pmet:{click_type:"fcm_book_title"}},fcm_book_button:{dfp:!0,pmet:{click_type:"fcm_book_button"}},fcm_book_description:{dfp:!0,pmet:{click_type:"fcm_book_description"}},fcm_giveaway_author:{dfp:!0,pmet:{click_type:"fcm_giveaway_author"}},fcm_giveaway_button:{dfp:!0,pmet:{click_type:"fcm_giveaway_button"}},fcm_giveaway_image:{dfp:!0,pmet:{click_type:"fcm_giveaway_image"}},fcm_giveaway_title:{dfp:!0,pmet:{click_type:"fcm_giveaway_title"}},fcm_list_button:{dfp:!0,pmet:{click_type:"fcm_list_button"}},fcm_list_books:{dfp:!0,pmet:{click_type:"fcm_list_books"}},fcm_list_title:{dfp:!0,pmet:{click_type:"fcm_list_title"}},fcm_genre_title:{dfp:!0,pmet:{click_type:"fcm_genre_title"}},fcm_genre_image:{dfp:!0,pmet:{click_type:"fcm_genre_image"}},fcm_genre_button:{dfp:!0,pmet:{click_type:"fcm_genre_button"}}}},{}],4:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_["default"].requestCreativeForSlot(e,t)}function s(e,t,r,o){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var n=window.googletag,s=void 0;if(s=i(r),o){var a=n.sizeMapping();v["default"].map(o,function(e){var t=v["default"].map(e,function(e){var t=e.split("x");return t[0]?[parseInt(t[0]),parseInt(t[1])]:[]});a=a.addSize(t[0],t[1])}),n.defineSlot(t,s,e).defineSizeMapping(a.build()).setCollapseEmptyDiv(!0).addService(n.pubads())}else{var l=n.defineSlot(t,s,e);l.addService(n.pubads())}})}function a(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var e=window.googletag;e.enableServices()})}function i(e){var t=void 0;if(Array.isArray(e))t=v["default"].map(e,function(e){var t=e.split("x");return[parseInt(t[0]),parseInt(t[1])]});else{var r=e.split("x");t=[parseInt(r[0]),parseInt(r[1])]}return t}function l(e,t){var r=Array.isArray(e.dimensions)?e.dimensions:[e.dimensions],o=v["default"].map(r,function(e){var t=e.split("x");return[parseInt(t[0]),parseInt(t[1])]});return{slotID:t,slotName:e.path,sizes:o}}function u(){var e=window.googletag,t={},r=e.pubads().getSlots();return v["default"].forEach(r,function(e){t[e.getSlotElementId()]=e}),t}function d(e){var t=window.googletag;t&&t.cmd&&t.cmd.push(function(){var r=window.apstag;r.fetchBids({slots:e},function(o){t.cmd.push(function(){r.setDisplayBids();var o=u(),n=v["default"].map(e,function(e){return o[e.slotID]});t.pubads().refresh(n)})})})}function c(e){$j(document).on("lazybeforeunveil",e)}function p(){window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.expand=y}function f(){var e=window.googletag;return"function"==typeof e&&e.pubads().getSlots().length>0}Object.defineProperty(r,"__esModule",{value:!0}),r.googletagDefined=r.requestCreative=void 0,r.requestCreativeForAdSlot=n,r.defineSlot=s,r.enableServices=a,r.dimensionsExplode=i,r.slotToHash=l,r.fetchApstagBids=d,r.lazyLoadOnView=c,r.lazyLoadInit=p,r.adSlotsDefined=f;var m=e("../../react_stores/google_ads_store"),h=e("../../react_actions/google_ads_actions"),_=o(h),g=e("lodash"),v=o(g),y=200,b=function(e,t){window.googletag.pubads().addEventListener("slotRenderEnded",function(r){if(r.slot.getSlotId().getDomId()==e)if(r.isEmpty)_["default"].removeAdSlot(e),_["default"].trackImpression(e,m.ImpressionCode.empty);else{var o=$j(t.googleHookSelector).find('iframe[id^="google_ads_iframe_"]'),n=o.contents().find(t.creativeSelector),s=r.slot.getName().split("/",3)[2];if(t.isNativeAd){var a=n.data("id"),i=n.data("url");a&&i?_["default"].attachServedNativeAdAttributesAndTracking(e,r.lineItemId,n,a,m.ImpressionCode.success,n.data("url"),s):_["default"].trackImpression(e,m.ImpressionCode.dfpError,n)}else t.pollRequest?!function(){var a={id:n.data("id"),line_item_id:r.lineItemId,ad_unit:s,ad_device_type:t.deviceType},i=o.closest("td");$j.each(["offset","index"],function(e,t){a[t]=i.attr(t)}),_["default"].populateHomepagePollAndTracking(e,r.lineItemId,n,a)}():_["default"].attachServedBannerAdAttributesAndTracking(e,r.lineItemId,n,m.ImpressionCode.success,t.delayImpressionTracking);"160x600"===t.dimensions&&$j(".mainContentContainer").addClass("adSkinEnabled")}})};r.requestCreative=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=window.googletag;if(b(e,t),t.lazyLoadedNewsfeedAd){var o=t.lazyLoadedNewsfeedAd,n=window.googletag.defineSlot("/4215/"+o.name,o.dimensions,e);n.addService(window.googletag.pubads()),r.display(e),r.pubads().refresh([n])}else if(t.isLazyLoaded){var s=i(t.dimensions);r.defineSlot(t.path,s,e).addService(r.pubads());var a=[{slotID:e,slotName:t.path,sizes:[s]}];d(a)}else r.cmd.push(function(){r.display(e)})},r.googletagDefined=function(){return window.googletag&&window.googletag.getVersion&&window.googletag.getVersion()}},{"../../react_actions/google_ads_actions":42,"../../react_stores/google_ads_store":267,lodash:"lodash"}],5:[function(e,t,r){"use strict";function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,l.merge)({},t,{type:t.method}),t=(0,l.omit)(t,"method");var r=$j.Deferred(),o=$j.ajax(e,t);return o.done(r.resolve),o.fail(function(e,t,o){(0,i.redirectOnAuthFailure)(e)||r.reject(e,t,o)}),r.promise()}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"POST"}))}function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"DELETE"}))}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"GET"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ERROR_MESSAGE=void 0,r.httpRequest=o,r.httpPost=n,r.httpDelete=s,r.httpGet=a;var i=e("./default_auth_failure_handler"),l=e("lodash");r.DEFAULT_ERROR_MESSAGE="Something went wrong with your request. Please\n  try again later."},{"./default_auth_failure_handler":6,lodash:"lodash"}],6:[function(e,t,r){"use strict";function o(e){if(e&&403===e.status){var t=e.responseJSON;if(t.redirect)return(0,n.setLocationUrl)(t.redirect),!0}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.redirectOnAuthFailure=o;var n=e("../env_utils")},{"../env_utils":21}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget",UPDATE_READING_PROGRESS:"hp_status_editor"}},{}],8:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("append-query"),s=o(n);r["default"]={openSocialShareWindow:function(e,t,r){var o=(0,s["default"])(e,t),n="left="+r.left+", top="+r.top,a="width="+r.width+", height="+r.height,i=n+", "+a+", menubar=no, scrollbar=no";window.open(o,"_blank",i)}}},{"append-query":"append-query"}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.VARIANTS={DEFAULT:"default",DARK_BG:"darkBg"}},{}],10:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.target,r=e.currentTarget,o=!1;if(t===r)o=i(t);else for(;r.contains(t)&&!(o=i(t));)t=t.parentNode;o&&a["default"].trackClickEvent(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.handleDataTracking=n;var s=e("../../react_actions/data_tracking/data_tracking_actions"),a=o(s),i=function(e){return"true"===e.getAttribute("data-tracking-enabletracking")}},{"../../react_actions/data_tracking/data_tracking_actions":36}],11:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length<=1||void 0===arguments[1]?(0,u["default"])():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,u["default"])(e).locale("en-abbreviated");var o=t.diff(e,"days"),n=t.diff(e,"months"),s=t.diff(e,"days",!0),a=6.5;return i["default"].inRange(n,1,13)?t.subtract(o,"days").format("DD MMM"):n>12?t.subtract(o,"days").format("DD MMM YY"):i["default"].inRange(o,7,28)?Math.ceil(o/7)+"w":s>=a&&28>=s?Math.round(s/a)+"w":e.fromNow()}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];if(e){var r=(0,u["default"])(e);return r.format(t)}return""}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=n,r.getFormattedDate=s;var a=e("lodash"),i=o(a),l=e("moment"),u=o(l);u["default"].relativeTimeThreshold("s",60),u["default"].relativeTimeThreshold("m",60),u["default"].relativeTimeThreshold("h",24),u["default"].relativeTimeThreshold("d",25),u["default"].relativeTimeThreshold("M",10),u["default"].locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),u["default"].locale("en")},{lodash:"lodash",moment:"moment"}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=r.DealStates=["uploaded","quoted","submitted","rejected","scheduled","reviewable","approved","active","expired","exception"];r.RetailerLinkStates={active:"active",inactive:"inactive"},r.BlurbToolDealStates=["scheduled","reviewable","approved"],r.DEAL_STATE=["all"].concat(o).reduce(function(e,t){return e[t.toUpperCase()]=t,e},{})},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.LAYOUT_SIZE={WIDE:"wide",NARROW:"narrow"}},{}],14:[function(e,t,r){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(r,"__esModule",{value:!0}),r.groupDeals=r.createMatcher=void 0;var s=e("lodash"),a=function(e){return(0,s.isArray)(e)||(e=[e]),e},i=r.createMatcher=function(e){var t=e.matcher,r=e.headline;if(!t)return function(e){return(0,s.includes)(e.genres,r)};var o=function(){var e=(0,s.keys)(t)[0],r=t[e];if(!(0,s.isArray)(r))return{v:function(t){return t[e]===r}};var o=function(){var t=r;return{v:{v:function(r){return(0,s.some)(a(r[e]),function(e){return(0,s.includes)(t,e)})}}}}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0},l=function(e){var t=e.map(function(e){var t=i(e);return Object.assign({},e,{matcher:t})});return t},u=function(e,t){return t.map(function(t,r){return t.hideWhenEmpty&&(0,s.isEmpty)(e[r])?Object.assign({},t,{visible:!1}):Object.assign({},t,{visible:!0})})};r.groupDeals=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=r.selectedCategory;t=l(t);var a=t.map(function(t){if(n&&n.headline!==t.headline)return[];var r=e.filter(t.matcher);return s.pull.apply(void 0,[e].concat(o(r))),r});return t=u(a,t),{lists:a,categories:t}}},{lodash:"lodash"}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRelatedDeals=r.filterLists=r.filterRetailerLinkStates=r.filterInactiveLinks=r.filterRetailerLinks=void 0;var o=e("lodash"),n=e("../deal_state"),s=r.filterRetailerLinks=function(e,t){if((0,o.isEmpty)(t))return e;var r=[e.preferred].concat(e.additional),n=r.filter(function(e){return(0,o.includes)(t,e.id)});return 0==n.length?{preferred:e.preferred,additional:[]}:1===n.length?{preferred:n[0],additional:[]}:{preferred:n[0],additional:n.slice(1)}},a=r.filterInactiveLinks=function(e){return(0,o.filter)(e,function(e){return e.state==n.RetailerLinkStates.active})},i=r.filterRetailerLinkStates=function(e){var t=a(e.additional);return e.preferred.state!=n.RetailerLinkStates.active?0==t.length?void 0:1===t.length?{preferred:t[0],additional:[]}:{preferred:t[0],additional:t.slice(1)}:{preferred:e.preferred,additional:t}},l=function(e,t){var r=t.preferredRetailers,o=i(e.retailerLinks);return o?Object.assign({},e,{retailerLinks:s(o,r)}):void 0};r.filterLists=function(e,t){var r=t.preferredRetailers,n=void 0===r?null:r;return e.map(function(e){return(0,o.compact)(e.map(function(e){return l(e,{preferredRetailers:n})}))})},r.getRelatedDeals=function(e,t){return(0,o.filter)(t,function(t){return e.uri!==t.uri&&!(0,o.isEmpty)((0,o.intersection)(e.genres,t.genres))})}},{"../deal_state":12,lodash:"lodash"}],16:[function(e,t,r){"use strict";function o(e){var t=e.tagsByDealUri,r=void 0===t?{}:t,o=e.featuredCategory,u=e.tagWeights,d=e.preferredRetailers,c=e.socialInfoByDealUri,p=e.selectedCategory,f=(0,n.tagDeals)(e.deals,r),m=(0,s.addSocialDataToDeals)(f,c),h=(0,a.groupDeals)(m,e.categories,{featuredCategory:o,selectedCategory:p}),_=h.lists,g=h.categories,v=(0,l.sortDealsWithinLists)(_,g,{tagWeights:u}),y=(0,i.filterLists)(v,{preferredRetailers:d});return Object.assign({},e,{deals:y,categories:g})}Object.defineProperty(r,"__esModule",{value:!0}),r.prepareProps=o;var n=e("./tagger"),s=e("./social_signals"),a=e("./categories"),i=e("./filters"),l=e("./sorter")},{"./categories":14,"./filters":15,"./social_signals":17,"./sorter":18,"./tagger":19}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.addSocialDataToDeals=function(e,t){return t?[].concat(e).map(function(e){return Object.assign({},e,{social:t[e.uri]})}):e}},{}],18:[function(e,t,r){"use strict";var o=function(){function e(e,t){var r=[],o=!0,n=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){n=!0,s=l}finally{try{!o&&i["return"]&&i["return"]()}finally{if(n)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.sortDealsWithinLists=void 0;var n=e("lodash"),s=function(e,t){return t?(0,n.keys)(t).reduce(function(r,o){return(0,n.includes)(e.tags,o)?r+t[o]:r},0):0},a=function(e,t){return[].concat(e).sort(function(e,r){return t.indexOf(r.uri)-t.indexOf(e.uri)}).reverse()},i=function(e,t){return[].concat(e).sort(function(e,r){var o={a:s(e,t),b:s(r,t)};return o.a===o.b?e.book.ratingsCount-r.book.ratingsCount:o.a-o.b}).reverse()};r.sortDealsWithinLists=function(e,t,r){var s=r.tagWeights;return(0,n.zip)(e,t).map(function(e){var t=o(e,2),r=t[0],n=t[1],l=n.orderedDealUris;return l?a(r,l):i(r,s)})}},{lodash:"lodash"}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.tagDeals=function(e,t){return[].concat(e).map(function(e){var r=t[e.uri]||[],o=e.tags||[];return Object.assign({},e,{tags:r.concat(o)})})}},{}],20:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.checkIconClassnames=r.getExclusiveShelfType=r.SHELF_TYPES=r.DEFAULT_SHELVES=void 0;var n=e("classnames"),s=o(n),a=r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}},i=r.SHELF_TYPES={DEFAULT:"defaultShelves",CUSTOM_EXCLUSIVE:"customExclusiveShelves",NONEXCLUSIVE:"nonExclusiveShelves"},l=r.getExclusiveShelfType=function(e){return e===a.READ.name||e===a.CURRENTLY_READING.name||e===a.WANT_TO_READ.name?i.DEFAULT:i.CUSTOM_EXCLUSIVE};r.checkIconClassnames=function(e){return(0,s["default"])({"wantToReadButton__checkIcon--toRead":e===a.WANT_TO_READ.name,"wantToReadButton__checkIcon--currentlyReading":e===a.CURRENTLY_READING.name,"wantToReadButton__checkIcon--read":e===a.READ.name,"wantToReadButton__checkIcon--other":e&&l(e)===i.CUSTOM_EXCLUSIVE})}},{classnames:"classnames"}],21:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",hasDom:function(){return!!window.document},domUnavailable:function(){return!this.hasDom()},isDevelopment:function(){return"production"===this.DEVELOPMENT},getCurrentPath:function(){return window&&window.location?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)},getLocationUrl:function(){return window&&window.location?window.location.href:void 0}}},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=r.clearFlashMessage=function(){$j("#flashMessages").trigger("clearFlashError")};r.flashSuccessMessage=function(e){o(),$j("#flashMessages").trigger("addFlashMessage",[e,"notice"])},r.flashErrorMessage=function(e){$j("#flashMessages").trigger("addFlashMessage",[e,"error"])}},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash");r["default"]={notifyException:function(e,t){e?window.console&&(0,o.isFunction)(window.console.error)&&window.console.error(t,e.stack):window.console&&(0,o.isFunction)(window.console.warn)&&window.console.warn("Attempted to notifyException without providing error,\n                           message: "+t)},notifyUser:function(e){window&&(0,o.isFunction)(window.alert)&&window.alert(e)}}},{lodash:"lodash"}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r["default"]={isEnter:function(e){return e===o.enter},isEscape:function(e){return e===o.escape},isSpace:function(e){return e===o.space},isArrowLeft:function(e){return e===o.leftArrow},isArrowUp:function(e){return e===o.upArrow},isArrowRight:function(e){return e===o.rightArrow},isArrowDown:function(e){return e===o.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:o}},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return t?e+"Dropdown":e};r.getUnfollowModalId=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return o("confirmUnfollow"+e,t)},r.getCancelFriendRequestModalId=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return o("confirmCancelFriendRequest"+e,t)},r.getUnfriendModalId=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return o("confirmUnfriend"+e,t)},r.getBlockUserModalId=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return o("confirmBlockUser"+e,t)},r.getUnblockUserModalId=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return o("confirmUnblockUser"+e,t)}},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_LOAD_ERROR_MSG="Sorry, we’re having trouble loading your books right now. Please try again later."},{}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"},r.ICON_SHAPES={CIRCLE:"circular",ROUND_SQUARE:"roundSquare"}},{}],28:[function(e,t,r){"use strict";function o(){return window.GrImageRegistry||{}}Object.defineProperty(r,"__esModule",{value:!0}),r.getImages=o},{}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.astralLength=function(e){return e.replace(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"_").length},r.countWords=function(e){return e?e.split(" ").length:0}},{}],30:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s);r["default"]={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],o=e.length;switch(o){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[o-1])}return n("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),n("span",{},void 0,r)}}},{lodash:"lodash"}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.FRIEND_STATUS={SELF:"self",FRIEND:"friend",REQUEST_PENDING_FROM:"request_pending_from",REQUEST_PENDING_TO:"request_pending_to",NONE:"none"}},{}],32:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["follow","unFollow"])},{reflux:"reflux"}],33:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return s["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var n=e("reflux"),s=o(n)},{reflux:"reflux"}],34:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],35:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["updatePreference"])},{reflux:"reflux"}],36:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["trackClickEvent"])},{reflux:"reflux"}],37:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openPane"])},{reflux:"reflux"}],38:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return s["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var n=e("reflux"),s=o(n)},{reflux:"reflux"}],39:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],40:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],41:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["displayError","requestFeaturedBooks","trackMenuImpression"])},{reflux:"reflux"}],42:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["hasRequestedCreativeForSlot","requestCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","populateHomepagePollAndTracking","pollAnswerChanged"])},{reflux:"reflux"}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=r.TOGGLE_SEARCH="TOGGLE_SEARCH";r.toggleSearch=function(e){return{type:o,searchIsActive:e}}},{}],44:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["like","unLike"])},{reflux:"reflux"}],45:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openModal","closeModal"])},{reflux:"reflux"}],46:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hideStory:{},previewBook:{},setUpdatesFeedPreferences:{}})},{reflux:"reflux"}],47:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],48:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["loadAnnotatedBooks"])},{reflux:"reflux"}],49:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],50:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({updateSharingTextInputValue:{sync:!0},submitShare:{},openShareModal:{}})},{reflux:"reflux"}],51:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({addShelvings:{},bookShelved:{},bookUnshelved:{},shelveBook:{},toggleNonExclusiveShelving:{},rateBook:{children:["newBook","failed"]},unshelveBook:{}})},{reflux:"reflux"}],52:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["deselectTab","selectTab"])},{reflux:"reflux"}],53:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){t({type:"NOTIFICATIONS_PUSH_TO_KINDLE_SAVING"}),(0,f.httpPost)("/user/update",{data:{format:"json",category:"index",notif_prefs:{push:{kindle:e}}},dataType:"JSON"}).done(function(){
t({type:"NOTIIFICATIONS_PUSH_TO_KINDLE_CHANGED",value:e})}).fail(function(){t({type:"NOTIFICATIONS_PUSH_TO_KINDLE_SAVE_FAILED"}),(0,m.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function s(e,t){return function(r){r({type:"FB_PREF_SAVING",settingObj:e}),(0,f.httpPost)("/user/update_fb_cog_prefs",{data:{format:"json",setting:{name:e.name,value:t}},dataType:"JSON"}).done(function(){r({type:"FB_PREF_CHANGED",settingObj:e,newValue:t})}).fail(function(){r({type:"FB_PREF_SAVE_FAILED",settingObj:e}),(0,m.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function a(e,t){return function(r){r({type:"TWITTER_PREF_SAVING",settingObj:e}),(0,f.httpPost)("/user/update_twitter_prefs",{data:{format:"json",setting:{name:e.name,value:t}},dataType:"JSON"}).done(function(){r({type:"TWITTER_PREF_CHANGED",settingObj:e,newValue:t})}).fail(function(){r({type:"TWITTER_PREF_SAVE_FAILED",settingObj:e}),(0,m.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function i(){return function(e){e({type:"ACCOUNTS_AMAZON_UNLINK_REQUESTED"}),(0,f.httpDelete)("/amazon/login/destroy").done(function(){e({type:"ACCOUNTS_AMAZON_UNLINKED"}),(0,m.flashSuccessMessage)("Amazon account unlinked")}).fail(function(){e({type:"ACCOUNTS_AMAZON_UNLINK_FAILED"}),(0,m.flashErrorMessage)("Sorry, we weren’t able to unlink your Amazon account. Please try again later, or contact us if the problem persists.")})}}function l(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return function(t){t({type:"ACCOUNTS_FACEBOOK_UNLINK_REQUESTED"}),(0,f.httpDelete)("/facebook_users/destroy",{data:{deauth:!0}}).done(function(){t({type:"ACCOUNTS_FACEBOOK_UNLINKED"}),(0,m.flashSuccessMessage)("Facebook account unlinked")}).fail(function(){t({type:"ACCOUNTS_FACEBOOK_UNLINK_FAILED"}),e||(0,m.flashErrorMessage)("Sorry, we weren’t able to unlink your Facebook account. Please try again later, or contact us if the problem persists.")})}}function u(e){return function(t){$grfb&&$grfb.init.done(function(){"connected"!==$grfb.auth.status||e.name?"not_authorized"===$grfb.auth.status&&l(!0)(t):$grfb.getUserData().done(function(e){t({type:"ACCOUNTS_FACEBOOK_DATA_LOADED",userData:e})})})}}function d(){return function(e){e({type:"ACCOUNTS_TWITTER_UNLINK_REQUESTED"}),(0,f.httpDelete)("/twitter_users/destroy",{data:{format:"json"}}).done(function(){e({type:"ACCOUNTS_TWITTER_UNLINKED"}),(0,m.flashSuccessMessage)("Twitter account unlinked")}).fail(function(){e({type:"ACCOUNTS_TWITTER_UNLINK_FAILED"}),(0,m.flashErrorMessage)("Sorry, we weren’t able to unlink your Twitter account. Please try again later, or contact us if the problem persists.")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.changeNotificationsPushToKindle=n,r.changeFBPref=s,r.changeTwitterPref=a,r.unlinkAmazonAccount=i,r.unlinkFacebookAccount=l,r.initFB=u,r.unlinkTwitterAccount=d;var c=e("reflux"),p=o(c),f=e("../../../modules/ajax/ajax_helper"),m=e("../../../modules/flash_message_helper");r["default"]=p["default"].createActions(["updatePreferences"])},{"../../../modules/ajax/ajax_helper":5,"../../../modules/flash_message_helper":22,reflux:"reflux"}],54:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["blockMember"])},{reflux:"reflux"}],55:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["follow","unFollow"])},{reflux:"reflux"}],56:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],57:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["userNotInterested","undoUserNotInterested","isFlashMessageForBook","closeFlashMessage","addBookIDToState"])},{reflux:"reflux"}],58:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["unfriend","acceptFriendRequest","cancelFriendRequest","follow","unfollow"])},{reflux:"reflux"}],59:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],60:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openAddShelfTextbox","closeAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],61:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}e("./_polyfills");var n=e("./_dom_ready_initializers"),s=o(n),a=e("./_public_actions"),i=o(a);window.ReactActions=i["default"],s["default"].initializeModernizrTouchCheck()},{"./_dom_ready_initializers":62,"./_polyfills":63,"./_public_actions":64}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={initializeModernizrTouchCheck:function(){document.addEventListener("DOMContentLoaded",function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{}],63:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=e("object-assign"),s=o(n);e("../react_isomorphic/shims/Array.prototype.find"),window.Object.assign=s["default"]},{"../react_isomorphic/shims/Array.prototype.find":250,"object-assign":"object-assign"}],64:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("../react_actions/user_agent_capabilities_actions"),s=o(n);r["default"]={UserAgentCapabilitiesActions:s["default"]}},{"../react_actions/user_agent_capabilities_actions":56}],65:[function(e,t,r){"use strict";e("./_common");var o=e("../react_isomorphic/global"),n=e("../react_isomorphic/site_header"),s=e("../react_isomorphic/deals"),a=e("../react_isomorphic/reading_notes"),i=e("../react_isomorphic/friend_follow_module"),l=e("../react_isomorphic/experiments"),u=e("lodash");window.ReactComponents=(0,u.merge)({},o.GlobalComponents,n.HeaderComponents,l.ExperimentComponents,s.DealsComponents,a.ReadingNotesComponents,i.FriendFollowModuleComponents),window.ReactStores=(0,u.merge)({},o.GlobalStores,n.HeaderStores,l.ExperimentStores,s.DealsStores,a.ReadingNotesStores,i.FriendFollowModuleStores)},{"../react_isomorphic/deals":242,"../react_isomorphic/experiments":244,"../react_isomorphic/friend_follow_module":247,"../react_isomorphic/global":248,"../react_isomorphic/reading_notes":249,"../react_isomorphic/site_header":251,"./_common":61,lodash:"lodash"}],66:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/google_ads_store"),d=o(u),c=e("reflux"),p=o(c),f=e("classnames"),m=o(f),h=e("../../modules/ads/google_ad_helper"),_="googleBannerAd";r["default"]=l["default"].createClass({displayName:"GoogleBannerAd",mixins:[p["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.ads[this.props.adId]})],propTypes:{adId:a["default"].PropTypes.string.isRequired,className:a["default"].PropTypes.string,delayImpressionTracking:a["default"].PropTypes.bool},getDefaultProps:function(){return{delayImpressionTracking:!1}},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){var e=this.props.adId;if(this.getStoreState()){var t={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,delayImpressionTracking:this.props.delayImpressionTracking,isLazyLoaded:this.getStoreState().isLazyLoaded,path:this.getStoreState().path};this.getStoreState().isLazyLoaded?(0,h.lazyLoadOnView)(function(e){e.target.id===this.adId&&(0,h.requestCreativeForAdSlot)(this.adId,this.params)}.bind({adId:e,params:t})):(0,h.requestCreativeForAdSlot)(this.props.adId,t)}},getWidthFromDimensions:function(e){return parseInt(e.split("x")[0])},getBannerAdSizingStyle:function(e){var t=this,r=void 0;if(Array.isArray(e)){var o;r=(o=Math).max.apply(o,n(e.map(function(e){return t.getWidthFromDimensions(e)})))}else r=this.getWidthFromDimensions(e);return{width:r,height:"auto"}},render:function(){if(this.getStoreState()){var e=(0,m["default"])(this.props.className,_,{lazyload:this.getStoreState().isLazyLoaded});return a["default"].createElement("div",{className:e,id:this.props.adId,style:this.getBannerAdSizingStyle(this.getStoreState().dimensions),ref:"googleHook"})}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":267,"../gr_component_factory":129,classnames:"classnames",react:"react",reflux:"reflux"}],67:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../react_stores/google_ads_store"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../featured_content_module"),p=o(c),f=e("../../modules/ads/google_ad_helper"),m=e("classnames"),h=o(m),_="googleFeaturedContentModule";r["default"]=l["default"].createClass({displayName:"GoogleFeaturedContentModule",mixins:[d["default"].connectFilter(a["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired,isMobile:React.PropTypes.bool,hasBottomBorder:React.PropTypes.bool,isInline:React.PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1,hasBottomBorder:!1},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){if(this.getStoreState()&&!this.getStoreState().creative){var e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,path:this.getStoreState().path};(0,f.requestCreativeForAdSlot)(this.props.adId,e)}},renderCreative:function(){var e=this.getStoreState().creative;return n(p["default"],{type:e.type,resource:e.resource,sponsorName:e.sponsorName,isSponsored:e.isSponsored,isMobile:this.props.isMobile,isInline:this.props.isInline,hasBottomBorder:this.props.hasBottomBorder})},render:function(){if(this.getStoreState()){var e=(0,h["default"])(_,this.getStoreState().className),t=this.getStoreState().creative?this.renderCreative():null;return n("div",{},void 0,t,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":267,"../featured_content_module":125,"../gr_component_factory":129,classnames:"classnames",reflux:"reflux"}],68:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../../react_stores/user_not_interested_store"),p=o(c),f=e("../../react_actions/user_not_interested_actions"),m=o(f),h=e("../../react_stores/google_ads_store"),_=o(h),g=e("./google_native_ad_body"),v=o(g),y=e("../close_button"),b=o(y),S=e("classnames"),k=o(S);r["default"]=d["default"].createClass({displayName:"GoogleNativeAd",mixins:[l["default"].connect(p["default"],"userNotInterestedStore"),l["default"].connectFilter(_["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:a["default"].PropTypes.string.isRequired,trackingOptions:a["default"].PropTypes.shape({enableTracking:a["default"].PropTypes.bool,adId:a["default"].PropTypes.string}).isRequired,className:a["default"].PropTypes.string,shouldHighlightSponsor:a["default"].PropTypes.bool,signedIn:a["default"].PropTypes.bool,responsiveWtrButton:a["default"].PropTypes.bool,isNewsfeed:a["default"].PropTypes.bool},getDefaultProps:function(){return{isNewsfeed:!0,responsiveWtrButton:!1,signedIn:!0}},getAdsStoreState:function(){return this.state.googleAdsStore},getUserNotInterestedStoreState:function(){return this.state.userNotInterestedStore},renderUndoButton:function(e){var t=this;return n("button",{className:"gr-buttonAsLink",onClick:function(){m["default"].undoUserNotInterested(e.bookId,t.props.adId)}},void 0,"Undo")},renderUserNotInterestedMessage:function(){var e=this.getAdsStoreState().creative.book;if(this.props.isNewsfeed){var t=n("span",{className:"gr-newsfeedItem__flashMessage--body"},void 0,"Thanks! We won't recommend"," ",n("a",{href:e.bookUrl},void 0,e.title)," ","again!"," ",this.renderUndoButton(e));return n("div",{className:"gr-newsfeedItem gr-newsfeedItem__flashMessage",role:"alert"},void 0,n("div",{className:"gr-newsfeedItem__close"},void 0,n(b["default"],{action:function(){m["default"].closeFlashMessage(e.bookId)}})),t)}var t=n("span",{className:"userNotInterested__message"},void 0,"Thanks! We won't recommend"," ",n("a",{href:e.bookUrl},void 0,e.title)," ","again!"," ",this.renderUndoButton(e));return n("div",{className:(0,k["default"])(this.props.className,"userNotInterested"),role:"alert"},void 0,n("div",{className:"userNotInterested__close"},void 0,n(b["default"],{action:function(){m["default"].closeFlashMessage(e.bookId)}})),t)},render:function(){if(null!=this.getAdsStoreState()&&this.getAdsStoreState().creative&&null!=this.getAdsStoreState().creative.book){var e=this.getAdsStoreState().creative.book.bookId;if(null==this.getUserNotInterestedStoreState()[e])m["default"].addBookIDToState(e);else{if(this.getUserNotInterestedStoreState()[e].isClosed)return null;if(this.getUserNotInterestedStoreState()[e].isFlashMessage)return this.renderUserNotInterestedMessage()}}return n(v["default"],{adId:this.props.adId,className:this.props.className,shouldHighlightSponsor:this.props.shouldHighlightSponsor,responsiveWtrButton:this.props.responsiveWtrButton,isNewsfeed:this.props.isNewsfeed,trackingOptions:this.props.trackingOptions,signedIn:this.props.signedIn})}})},{"../../react_actions/user_not_interested_actions":57,"../../react_stores/google_ads_store":267,"../../react_stores/user_not_interested_store":281,"../close_button":83,"../gr_component_factory":129,"./google_native_ad_body":69,classnames:"classnames",react:"react",reflux:"reflux"}],69:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../react_stores/google_ads_store"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("./sponsored_book_header"),p=o(c),f=e("./native_ad_item"),m=o(f),h=e("../book_with_wtr_button"),_=o(h),g=e("../preview_book/preview_book"),v=o(g),y=e("../user_content/expandable_html"),b=o(y),S=e("../book_description"),k=o(S),T=e("./sponsored_update_body"),P=o(T),w=e("../newsfeed/footer/newsfeed_item_footer_actions"),N=o(w),R=e("../../modules/ads/google_ad_helper"),M=e("classnames"),C=o(M),A="desktop";r["default"]=l["default"].createClass({displayName:"GoogleNativeAdBody",mixins:[d["default"].connectFilter(a["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired,className:React.PropTypes.string,signedIn:React.PropTypes.bool,shouldHighlightSponsor:React.PropTypes.bool,responsiveWtrButton:React.PropTypes.bool,isNewsfeed:React.PropTypes.bool},getDefaultProps:function(){return{isNewsfeed:!0,responsiveWtrButton:!1,signedIn:!0}},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){if(this.getStoreState()&&!this.getStoreState().creative){var e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,lazyLoadedNewsfeedAd:this.getStoreState().lazyLoadedNewsfeedAd,path:this.getStoreState().path,isLazyLoaded:this.getStoreState().isLazyLoaded};this.getStoreState().lazyLoadedNewsfeedAd||this.getStoreState().isLazyLoaded?(0,R.lazyLoadOnView)(function(e){e.target.id===this.adId&&(0,R.requestCreativeForAdSlot)(this.adId,this.params)}.bind({adId:this.props.adId,params:e})):(0,R.requestCreativeForAdSlot)(this.props.adId,e)}},getHeaderText:function(){return{__html:this.getStoreState().creative.headerText}},renderPreviewButton:function(){var e=(0,C["default"])({"gr-newsfeedItem__sponsoredFooterActions":this.props.isNewsfeed,nativeAdFooterActions:!this.props.isNewsfeed}),t=[n(v["default"],{book:this.getStoreState().creative.book})];return n(N["default"],{elements:t,isSponsored:!this.props.shouldHighlightSponsor&&this.getStoreState().creative.isSponsored,footerClasses:e})},renderBookBody:function(){var e=this.props.shouldHighlightSponsor&&this.getStoreState().adDeviceType==A?n(v["default"],{book:this.getStoreState().creative.book}):null;return this.getStoreState().creative.customText?n("div",{className:"gr-book__description u-marginTopXSmall"},void 0,React.createElement(b["default"],this.getStoreState().creative.customText),n("div",{className:"u-paddingTopSmall"},void 0,e)):n("div",{},void 0,n(k["default"],{className:"u-marginTopXSmall",bookDescription:this.getStoreState().creative.book.description}),n("div",{className:"u-paddingTopSmall"},void 0,e))},renderBody:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=(0,C["default"])({"gr-newsfeedItem__body":this.props.isNewsfeed,"gr-nativeAdBook__body":!this.props.isNewsfeed});return n(_["default"],{body:this.renderBookBody(),book:this.getStoreState().creative.book,responsiveWtrButton:this.props.responsiveWtrButton,bookClassName:t,hideWtrButton:e})},renderSponsoredFlex:function(){var e=(0,C["default"])({"gr-newsfeedItem__sponsoredFooterActions":this.props.isNewsfeed,nativeAdFooterActions:!this.props.isNewsfeed}),t=(0,C["default"])({"gr-newsfeedItem__body":this.props.isNewsfeed}),r=n("div",{className:"gr-newsfeedItem__headerText",dangerouslySetInnerHTML:this.getHeaderText()}),o=n(P["default"],{creative:this.getStoreState().creative,bodyClassNames:t}),s=n(N["default"],{isSponsored:this.getStoreState().creative.isSponsored,sponsoredBy:this.getStoreState().creative.sponsoredBy,sponsoredUrl:this.getStoreState().creative.sponsoredUrl,footerClasses:e}),a=this.props.shouldHighlightSponsor?s:null,i=this.props.shouldHighlightSponsor?null:s,l=(0,C["default"])({"gr-mediaBox":!0,feedItem:this.isMobileNewsfeed()});return n(m["default"],{creative:this.getStoreState().creative,header:r,subHeader:a,body:o,footer:i,id:this.props.adId,classNames:l,headerClassNames:(0,C["default"])("nativeAdHeaderText"),hasIcon:this.props.isNewsfeed,isNewsfeed:this.props.isNewsfeed})},renderSponsoredBookUpdate:function(){var e=n(p["default"],{creative:this.getStoreState().creative,signedIn:this.props.signedIn}),t=this.renderBody(!this.props.signedIn),r=n(N["default"],{isSponsored:this.getStoreState().creative.isSponsored,sponsoredBy:this.getStoreState().creative.sponsoredBy,sponsoredUrl:this.getStoreState().creative.sponsoredUrl,footerClasses:"nativeAdFooterActions"}),o=this.props.shouldHighlightSponsor?r:null,s=this.props.shouldHighlightSponsor?null:this.renderPreviewButton(),a=(0,C["default"])({"gr-mediaBox":!0,feedItem:this.isMobileNewsfeed()});return n(m["default"],{creative:this.getStoreState().creative,header:e,subHeader:o,body:t,footer:s,id:this.getStoreState().id,classNames:a,headerClassNames:(0,C["default"])("nativeAdHeaderText"),hasIcon:this.props.isNewsfeed,signedIn:this.props.signedIn,isNewsfeed:this.props.isNewsfeed})},isMobileNewsfeed:function(){return this.props.className&&this.props.className.match(/googleNativeAdMobile--newsfeed/)},renderCreative:function(){return this.getStoreState().creative&&this.getStoreState().creative.book?this.renderSponsoredBookUpdate():this.getStoreState().creative?this.renderSponsoredFlex():null},render:function(){if(this.getStoreState()){var e=(0,C["default"])("googleNativeAd__googleHook",this.getStoreState().className,"lazyload"),t=(0,C["default"])("googleNativeAd",this.props.className),r=this.getStoreState().creative?this.renderCreative():null;return n("div",{className:t},void 0,r,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":267,"../book_description":80,"../book_with_wtr_button":81,"../gr_component_factory":129,"../newsfeed/footer/newsfeed_item_footer_actions":169,"../preview_book/preview_book":173,"../user_content/expandable_html":223,"./native_ad_item":74,"./sponsored_book_header":75,"./sponsored_update_body":76,classnames:"classnames",reflux:"reflux"}],70:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/google_ads_store"),d=o(u),c=e("../../modules/ads/google_ad_helper"),p=e("classnames"),f=o(p),m="googleNativeNavAd";r["default"]=l["default"].createClass({displayName:"GoogleNativeNavAd",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){if(this.getStoreState()&&!this.getStoreState().creative){var e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,path:this.getStoreState().path,isLazyLoaded:!0,isLazyLoadedNewsfeedAd:this.props.isLazyLoadedNewsfeedAd};(0,c.requestCreativeForAdSlot)(this.props.adId,e)}},render:function(){if(this.getStoreState()){var e=(0,f["default"])(m,this.getStoreState().className);return n("div",{},void 0,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":267,"../gr_component_factory":129,classnames:"classnames",reflux:"reflux"}],71:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/google_ads_store"),d=o(u),c=e("../click_tracking_wrapper"),p=o(c),f=e("../user_content/expandable_html"),m=o(f),h=e("../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"GoogleNativeNavCreative",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,genre:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getDefaultProps:function(){return{audibleUrl:"https://www.goodreads.com/audible"}},renderImage:function(){var e=this.state.googleAdsStore,t=n("a",{href:this.props.audibleUrl},void 0,n("img",{alt:e.creative.title,src:e.creative.image}));return n(p["default"],{trackingOptions:h.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Image,children:t})},renderExploreButton:function(){var e=n("a",{href:this.props.audibleUrl,className:"gr-button u-marginTopSmall gr-microsite-link"},void 0,"Browse ",this.props.genre);return n(p["default"],{trackingOptions:h.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_ExploreButton,children:e})},renderBody:function(){var e=this.state.googleAdsStore,t=n("div",{className:"gr-book__titleLink gr-book__title gr-book__titleLink--large"},void 0,n("a",{href:this.props.audibleUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,e.creative.title));return n("div",{},void 0,this.renderImage(),n("div",{className:"u-marginTopXSmall"},void 0,n(p["default"],{trackingOptions:h.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Title,children:t})),n("div",{className:"u-marginTopXSmall"},void 0,React.createElement(m["default"],e.creative.description)),this.renderExploreButton())},renderCreative:function(){var e=this.state.googleAdsStore;if(e.creative){var t=n("a",{href:this.props.audibleUrl,className:"gr-hyperlink featuredGenres__sponsoredLink"},void 0,e.creative.sponsoredBy),r=n("div",{className:"featuredGenres__sponsoredFooter"},void 0,n("span",{className:"googleNativeAd__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel"},void 0,"Sponsored by "),n(p["default"],{children:t,trackingOptions:h.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_SponsoredBy}));return n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Discover Audiobooks through Audible"),n("div",{className:"u-marginTopSmall"},void 0,this.renderBody(),r))}return null},render:function(){return this.state.googleAdsStore?n("div",{},void 0,this.renderCreative()):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_stores/google_ads_store":267,"../click_tracking_wrapper":82,"../gr_component_factory":129,"../user_content/expandable_html":223,reflux:"reflux"}],72:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../react_stores/google_ads_store"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../page_skin"),p=o(c),f=e("../../modules/ads/google_ad_helper");r["default"]=l["default"].createClass({displayName:"GooglePageSkin",mixins:[d["default"].connectFilter(a["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,image:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){if(this.getStoreState()&&!this.getStoreState().creative){var e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd,path:this.getStoreState().path};(0,f.requestCreativeForAdSlot)(this.props.adId,e)}},renderCreative:function(){return n(p["default"],{imageUrl:this.getStoreState().creative.image_url,backgroundColor:this.getStoreState().creative.background_color})},render:function(){if(this.getStoreState()){var e=this.getStoreState().className,t=this.getStoreState().creative?this.renderCreative():null;return n("div",{className:"pageskinContainer"},void 0,t,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":267,"../gr_component_factory":129,"../page_skin":170,reflux:"reflux"}],73:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("../dropdown"),d=o(u),c=e("../click_tracking_wrapper"),p=o(c),f=e("../../react_actions/user_not_interested_actions"),m=o(f),h=e("../../modules/ads/click_tracking_helper"),_=e("react"),g=o(_),v=e("lodash");r["default"]=a["default"].createClass({displayName:"NativeAdCaret",propTypes:{book:l["default"].book(),helpLink:g["default"].PropTypes.string.isRequired,updateId:g["default"].PropTypes.string.isRequired,additionalLinks:g["default"].PropTypes.arrayOf(g["default"].PropTypes.elements),isNewsfeed:g["default"].PropTypes.bool,signedIn:g["default"].PropTypes.bool
},getDefaultProps:function(){return{trackingOptions:h.TRACKED_CLASSES.newsfeed_caret,isNewsfeed:!0,signedIn:!0}},renderNotInterested:function(){var e=this;if(this.props.book&&this.props.signedIn){var t=void 0,r=void 0;return r=function(){return m["default"].userNotInterested(e.props.book.bookId)},t=n("button",{className:"gr-buttonAsLink nativeAdCaretMenu__button",onClick:r},void 0,"I’m not interested in this book"),n(p["default"],{children:t,trackingOptions:h.TRACKED_CLASSES.newsfeed_caret_not_interested})}return null},caretList:function(){var e=n("a",{className:"nativeAdCaretMenu__link",href:this.props.helpLink},void 0,"Why am I seeing this?");return n("div",{className:"nativeAdCaretMenu"},void 0,this.renderNotInterested(),(0,v.map)(this.props.additionalLinks,function(e){return n("div",{className:"nativeAdCaretMenu__button"},e,"link")}),n(p["default"],{children:e,trackingOptions:h.TRACKED_CLASSES.newsfeed_caret_help}))},render:function(){return n("div",{className:"nativeAdCaret"},void 0,n(d["default"],{trigger:n("div",{className:"nativeAdCaret nativeAdCaret__image","aria-label":"Sponsored item options"}),triggerEventType:d["default"].TriggerEventTypes.CLICK,bemModifiers:"caret",children:this.caretList()}))}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/user_not_interested_actions":57,"../click_tracking_wrapper":82,"../dropdown":112,"../gr_component_factory":129,"../shared/gr_prop_types":196,lodash:"lodash",react:"react"}],74:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("classnames"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shape_icon"),p=o(c),f=e("../user/user_icon"),m=o(f),h=e("../../modules/shape_icon_values"),_=e("../shared/gr_prop_types"),g=o(_),v=e("./native_ad_caret"),y=o(v);r["default"]=d["default"].createClass({displayName:"NativeAdItem",propTypes:{creative:g["default"].creative().isRequired,header:a["default"].PropTypes.element.isRequired,body:a["default"].PropTypes.element.isRequired,id:a["default"].PropTypes.string.isRequired,footer:a["default"].PropTypes.element,subHeader:a["default"].PropTypes.element,classNames:a["default"].PropTypes.string,headerClassNames:a["default"].PropTypes.string,hasIcon:a["default"].PropTypes.bool,signedIn:a["default"].PropTypes.bool,isNewsfeed:a["default"].PropTypes.bool},getDefaultProps:function(){return{isNewsfeed:!0,signedIn:!0}},renderCaret:function(){return n("div",{className:"gr-newsfeedItem__caret"},void 0,n(y["default"],{book:this.props.creative.book,helpLink:this.props.creative.helpLink,updateId:this.props.id,isNewsfeed:this.props.isNewsfeed,signedIn:this.props.signedIn}))},renderIconBody:function(){return this.props.creative.firstFriend?n(m["default"],{user:this.props.creative.firstFriend,size:h.ICON_SIZES.MEDIUM}):n(p["default"],{imageUrl:this.props.creative.defaultIcon,size:h.ICON_SIZES.MEDIUM,imageAlt:"Sponsored Newsfeed Item Icon",border:!0})},renderIcon:function(){return n("div",{className:"gr-newsfeedItem__headerIcon gr-mediaBox__media gr-mediaBox__media--marginSmall"},void 0,this.renderIconBody())},render:function(){var e=void 0;return e=this.props.isNewsfeed?(0,l["default"])("gr-newsfeedItem","gr-mediaBox",this.props.classNames):(0,l["default"])("googleNativeAd__item",this.props.classNames),a["default"].createElement("div",{className:e,ref:"nativeAd"},this.props.hasIcon&&this.renderIcon(),n("div",{className:"u-marginBottomSmall"},void 0,this.renderCaret(),n("div",{className:this.props.headerClassNames},void 0,this.props.header),this.props.subHeader,this.props.body),this.props.footer)}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../shape_icon":191,"../shared/gr_prop_types":196,"../user/user_icon":220,"./native_ad_caret":73,classnames:"classnames",react:"react"}],75:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../user/user_profile_link"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("lodash"),p=o(c);r["default"]=a["default"].createClass({displayName:"SponsoredBookHeader",propTypes:{creative:d["default"].creative().isRequired,signedIn:React.PropTypes.bool},getDefaultProps:function(){return{signedIn:!0}},renderLink:function(e,t){return n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:t},void 0,e)},renderFriendHeader:function(){var e=p["default"].head(this.props.creative.topFriends);return n("span",{className:"gr-newsfeedItem__headerText"},void 0,n(l["default"],{user:e}),this.renderHeaderText()," ",this.props.creative.friendActionText)},renderHeaderText:function(){return 1===this.props.creative.numAdditionalFriends?n("span",{},void 0," and ",n(l["default"],{user:this.props.creative.topFriends[1]})):this.props.creative.numAdditionalFriends>1?n("span",{},void 0," and ",this.renderLink(this.props.creative.numAdditionalFriends+" other friends",this.props.creative.book.bookUrl+"#friendReviews")):null},renderSimilarBook:function(){return n("div",{className:"gr-newsfeedItem__headerText gr-newsfeedItem__headerText--truncateWithEllipsis"},void 0,"This is similar to ",this.renderLink(this.props.creative.similarBook.title,this.props.creative.similarBook.bookUrl))},renderGenres:function(){var e=p["default"].head(this.props.creative.genres);return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"This book has been shelved by members as ",this.renderLink(e.genre,e.url),this.props.creative.genres.length>1?n("span",{},void 0," and ",this.renderLink(this.props.creative.genres[1].genre,this.props.creative.genres[1].url)):null)},renderDefault:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Based on your reading preferences, you might enjoy")},renderSignedOutText:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Goodreads Recommends")},renderContextualHeader:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,this.props.creative.headerText)},render:function(){return this.props.creative.headerText?this.renderContextualHeader():this.props.signedIn?this.props.creative.topFriends?this.renderFriendHeader():this.props.creative.similarBook?this.renderSimilarBook():this.props.creative.genres?this.renderGenres():this.renderDefault():this.renderSignedOutText()}})},{"../gr_component_factory":129,"../shared/gr_prop_types":196,"../user/user_profile_link":222,lodash:"lodash"}],76:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("classnames"),d=o(u),c=e("../click_tracking_wrapper"),p=o(c),f=e("../user_content/expandable_html"),m=o(f),h=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"SponsoredUpdateBody",propTypes:{creative:l["default"].creative().isRequired,bodyClassNames:React.PropTypes.string},renderImage:function(){var e=(0,d["default"])("gr-mediaBox__media",this.withBemModifiers("gr-sponsoredUpdateBody__image")),t=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.updateUrl,className:"gr-sponsoredUpdateBody__imageLink"},void 0,n("img",{alt:this.props.creative.title,className:e,src:this.props.creative.image}));return n(p["default"],{trackingOptions:h.TRACKED_CLASSES.sponsored_update_body_image,children:t})},renderExploreButton:function(){var e=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.callToActionUrl,className:"gr-button u-marginTopMedium gr-microsite-link"},void 0,this.props.creative.callToActionText);return n(p["default"],{trackingOptions:h.TRACKED_CLASSES.cta_link,children:e})},render:function(){var e=(0,d["default"])(this.props.bodyClassNames,"gr-mediaBox","gr-sponsoredUpdateBody"),t=(0,d["default"])("gr-sponsoredUpdateBody__titleLink","gr-hyperlink","gr-hyperlink--naked"),r=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.updateUrl,className:t},void 0,this.props.creative.title);return n("div",{className:e},void 0,this.renderImage(),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-sponsoredUpdateBody__title"},void 0,n(p["default"],{trackingOptions:h.TRACKED_CLASSES.sponsored_update_body_title_link,children:r})),n("div",{className:"gr-sponsoredUpdateBody__description"},void 0,React.createElement(m["default"],this.props.creative.description)),this.renderExploreButton()))}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":82,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../user_content/expandable_html":223,classnames:"classnames"}],77:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=n("span",{className:"gr-icon gr-icon--authorBadge",title:"Goodreads Author"});r["default"]=a["default"].createClass({displayName:"AuthorBadge",propTypes:{isGoodreadsAuthor:i.PropTypes.bool.isRequired},render:function(){return this.props.isGoodreadsAuthor?l:null}})},{"../gr_component_factory":129,react:"react"}],78:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../../react_actions/author_follow_actions"),p=o(c),f=e("../../react_stores/author_follow_store"),m=o(f),h=e("classnames"),_=o(h);r["default"]=d["default"].createClass({displayName:"AuthorFollowButton",mixins:[l["default"].connectFilter(m["default"],"authorFollowStore",function(e){return e[this.props.authorId]})],propTypes:{authorId:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string},handleButtonClicked:function(){this.state.authorFollowStore.isFollowing?p["default"].unFollow(this.props.authorId):(p["default"].follow(this.props.authorId),this.setState({isHovering:!1}))},getButtonText:function(){return this.state.authorFollowStore.isFollowing?this.state.isHovering?"Unfollow":"Following":"Follow author"},render:function(){var e=this,t=(0,_["default"])("gr-button",this.props.className);return n("button",{className:t,onClick:this.handleButtonClicked,onMouseEnter:function(){e.setState({isHovering:!0})},onMouseLeave:function(){e.setState({isHovering:!1})},disabled:this.state.authorFollowStore.buttonEnabled?!1:"disabled"},void 0,this.getButtonText())}})},{"../../react_actions/author_follow_actions":32,"../../react_stores/author_follow_store":259,"../gr_component_factory":129,classnames:"classnames",react:"react",reflux:"reflux"}],79:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("./shared/gr_prop_types"),p=o(c),f=e("./click_tracking_wrapper"),m=o(f),h=e("../modules/ads/click_tracking_helper"),_=e("classnames"),g=o(_),v=e("./author/author_badge"),y=o(v),b=r.VALID_BOOK_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r["default"]=d["default"].createClass({displayName:"Book",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,bookUrl:a["default"].PropTypes.string.isRequired,bookCoverUrl:a["default"].PropTypes.string,title:a["default"].PropTypes.string.isRequired,size:a["default"].PropTypes.oneOf(l["default"].values(b)),titleSize:a["default"].PropTypes.oneOf(l["default"].values(b)),author:p["default"].author(),mediaBoxModifier:a["default"].PropTypes.string,className:a["default"].PropTypes.string,sponsored:a["default"].PropTypes.bool,bookImageTrackingData:a["default"].PropTypes.object,bookTitleTrackingData:a["default"].PropTypes.object,authorLinkTrackingData:a["default"].PropTypes.object,label:a["default"].PropTypes.element},getDefaultProps:function(){return{size:b.MEDIUM,bookImageTrackingData:h.TRACKED_CLASSES.book_image,bookTitleTrackingData:h.TRACKED_CLASSES.book_title,authorLinkTrackingData:h.TRACKED_CLASSES.author_link}},render:function(){var e=(0,g["default"])("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,g["default"])("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===b.LARGE}),r=null==this.props.titleSize?this.props.size:this.props.titleSize,o=(0,g["default"])(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":r===b.LARGE},"gr-hyperlink gr-hyperlink--naked"),s=(0,g["default"])(this.withBemModifiers("gr-book__title")),a=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier),i=n("img",{alt:this.props.title,className:t,src:this.props.imageUrl}),l=n("a",{href:this.props.bookUrl,className:o},void 0,this.props.title);return n("div",{className:e},void 0,n("a",{href:this.props.bookCoverUrl||this.props.bookUrl},void 0,n(m["default"],{children:i,trackingOptions:this.props.bookImageTrackingData})),n("div",{className:a},void 0,this.props.label,n("div",{className:s},void 0,n(m["default"],{children:l,trackingOptions:this.props.bookTitleTrackingData})),this.renderAuthorLink(),n("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))},renderAuthorLink:function(){var e=null==this.props.titleSize?this.props.size:this.props.titleSize,t=(0,g["default"])(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":e===b.LARGE});if(this.props.author){var r=n("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name);return n("div",{className:t},void 0,"by ",n(m["default"],{children:r,trackingOptions:this.props.authorLinkTrackingData}),a["default"].createElement(y["default"],this.props.author))}return n("div",{className:t},void 0,"by deleted author")}})},{"../modules/ads/click_tracking_helper":3,"./author/author_badge":77,"./click_tracking_wrapper":82,"./gr_component_factory":129,"./shared/gr_prop_types":196,classnames:"classnames",lodash:"lodash",react:"react"}],80:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./user_content/truncated_html"),u=o(l),d=e("./shared/gr_prop_types"),c=o(d),p=e("classnames"),f=o(p);r["default"]=i["default"].createClass({displayName:"BookDescription",propTypes:{bookDescription:c["default"].bookDescription().isRequired,className:React.PropTypes.string,bookDescriptionTargetingData:React.PropTypes.object},getDefaultProps:function(){return{bookDescription:{html:"",truncated:!1,fullContentUrl:""}}},render:function(){var e=(0,f["default"])(this.props.className,"gr-book__description"),t=this.props.bookDescription;return s("div",{className:e},void 0,t.html?React.createElement(u["default"],n({},t,{fullContentText:"Continue reading",bookDescriptionTargetingData:this.props.bookDescriptionTargetingData})):null,this.props.children)}})},{"./gr_component_factory":129,"./shared/gr_prop_types":196,"./user_content/truncated_html":227,classnames:"classnames"}],81:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./shared/gr_prop_types"),u=o(l),d=e("./book"),c=o(d),p=e("./want_to_read/want_to_read_button"),f=o(p),m=e("lodash"),h=e("./click_tracking_wrapper"),_=o(h),g=e("../modules/ads/click_tracking_helper"),v=e("./community_rating"),y=o(v);r["default"]=i["default"].createClass({displayName:"BookWithWTRButton",propTypes:{book:u["default"].book().isRequired,body:React.PropTypes.element,bookSize:React.PropTypes.oneOf((0,m.values)(d.VALID_BOOK_SIZES)),bookClassName:React.PropTypes.string,hideWtrButton:React.PropTypes.bool,responsiveWtrButton:React.PropTypes.bool},getDefaultProps:function(){return{bookSize:d.VALID_BOOK_SIZES.LARGE,responsiveWtrButton:!1}},renderBookBody:function(){return this.props.body?this.props.body:null},renderCommunityRating:function(){var e=this.props.book;return s(y["default"],{rating:parseFloat(e.avgRating),displayAvg:!1,displayAvgRatingText:!1,ratingsCount:e.ratingsCount,size:y["default"].ICON_SIZES.MEDIUM})},renderWtrButton:function(){return s(f["default"],{bookTitle:this.props.book.title,uniqueId:(0,m.random)(1e6).toString(),bookId:this.props.book.bookId,withModalShelvingMenu:this.props.responsiveWtrButton,showStars:!0})},renderLearnMoreButton:function(){var e=s("a",{target:"_self",href:this.props.book.bookUrl,className:"gr-button u-marginTopMedium"},void 0,"Learn More");return s(_["default"],{trackingOptions:g.TRACKED_CLASSES.cta_link,children:e})},render:function(){return React.createElement(c["default"],n({className:this.props.bookClassName},this.props.book,{size:this.props.bookSize}),this.props.responsiveWtrButton&&this.renderCommunityRating(),!this.props.hideWtrButton&&this.renderWtrButton(),this.renderBookBody(),this.props.hideWtrButton&&this.renderLearnMoreButton())}})},{"../modules/ads/click_tracking_helper":3,"./book":79,"./click_tracking_wrapper":82,"./community_rating":88,"./gr_component_factory":129,"./shared/gr_prop_types":196,"./want_to_read/want_to_read_button":237,lodash:"lodash"}],82:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("./gr_component_factory"),i=o(a);r["default"]=i["default"].createClass({displayName:"ClickTrackingWrapper",propTypes:{trackingOptions:s["default"].PropTypes.shape({dfp:s["default"].PropTypes.bool,pmet:s["default"].PropTypes.object.isRequired}).isRequired,children:s["default"].PropTypes.element.isRequired},render:function(){return this.props.children}})},{"./gr_component_factory":129,react:"react"}],83:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("../modules/shared/image_registry"),d=e("classnames"),c=o(d),p=e("../modules/close_button_values");r["default"]=l["default"].createClass({displayName:"CloseButton",propTypes:{action:a["default"].PropTypes.func.isRequired,variant:a["default"].PropTypes.oneOf([p.VARIANTS.DEFAULT,p.VARIANTS.DARK_BG])},getDefaultProps:function(){return{variant:p.VARIANTS.DEFAULT}},render:function(){var e=(0,c["default"])("gr-iconButton",this.props.className),t=void 0;return t=this.props.variant===p.VARIANTS.DARK_BG?(0,u.getImages)().closeIcons.darkBackground:(0,u.getImages)().closeIcon,n("button",{type:"button",className:e,onClick:this.props.action},void 0,n("img",{alt:"Dismiss",src:t}))}})},{"../modules/close_button_values":9,"../modules/shared/image_registry":28,"./gr_component_factory":129,classnames:"classnames",react:"react"}],84:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../user_content/expandable_html"),c=o(d),p=e("../user_content/hidden_html"),f=o(p),m=e("../shared/gr_prop_types"),h=o(m),_=e("../user/user_profile_link"),g=o(_),v=e("../user/user_icon"),y=o(v),b=e("./right_side_information"),S=o(b);r["default"]=u["default"].createClass({displayName:"Comment",propTypes:{body:i["default"].PropTypes.shape(h["default"].expandableHtml()),createdAt:h["default"].date.isRequired,authorUser:h["default"].user().isRequired,subjectKey:i["default"].PropTypes.string.isRequired,subject:h["default"].commentSubject(),deletableByCurrentUser:i["default"].PropTypes.bool.isRequired,blockedByCurrentUser:i["default"].PropTypes.bool,showTimestamp:i["default"].PropTypes.bool,uri:i["default"].PropTypes.string.isRequired,flagForAbuseUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser){var e="unhide comment";return s(f["default"],{unhideText:e},void 0,i["default"].createElement(c["default"],this.props.body))}return i["default"].createElement(c["default"],this.props.body)},render:function(){var e=this;return s("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,s("div",{className:"gr-mediaBox__media"},void 0,s(y["default"],{user:this.props.authorUser})),s("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i["default"].createElement(S["default"],n({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),s(g["default"],{user:this.props.authorUser}),this.props.blockedByCurrentUser?s("strong",{},void 0," (blocked)"):null,s("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":129,"../shared/gr_prop_types":196,"../user/user_icon":220,"../user/user_profile_link":222,"../user_content/expandable_html":223,"../user_content/hidden_html":224,"./right_side_information":87,react:"react"}],85:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),p=o(c),f=e("../../react_actions/comment_actions"),m=o(f),h=e("../../react_stores/comments_store"),_=o(h),g=e("../user/user_icon"),v=o(g),y=e("../../react_mixins/gr_reflux"),b=e("classnames"),S=o(b);r["default"]=d["default"].createClass({displayName:"CommentForm",propTypes:{authorUser:p["default"].user().isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string}),placeholder:a["default"].PropTypes.string},mixins:[(0,y.connectToLazyStore)(_["default"],"subjectKey")],getDefaultProps:function(){return{placeholder:"Write a comment…"}},addNewComment:function(e){this.isCommentEmpty()||m["default"].addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return l["default"].isEmpty(l["default"].trim(this.state.unsavedComment))},onTextChange:function(e){m["default"].commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){m["default"].textareaFocused(this.props.subjectKey)},onBlur:function(){m["default"].textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){this.state.textareaFocusRequested===!0&&this.refs.commentBodyTextarea.focus()},render:function(){var e=(0,S["default"])(this.withBemModifiers("gr-commentForm"),"gr-mediaBox");return n("div",{className:e},void 0,n("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,n(v["default"],{user:this.props.authorUser})),n("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,n("input",{type:"hidden",name:"id",value:this.props.subject.id}),n("input",{type:"hidden",name:"type",value:this.props.subject.type}),a["default"].createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:this.props.placeholder,"aria-label":this.props.placeholder}),this.state.showCommentButton?n("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":34,"../../react_mixins/gr_reflux":255,"../../react_stores/comments_store":261,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../user/user_icon":220,classnames:"classnames",lodash:"lodash",react:"react"}],86:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),p=e("../shared/gr_prop_types"),f=o(p),m=e("./comment"),h=o(m),_=e("../pagination_links"),g=o(_),v=e("../../react_stores/comments_store"),y=o(v),b=e("../../react_actions/comment_actions"),S=o(b),k=e("../spinner"),T=o(k),P=e("../../react_mixins/gr_reflux"),w=e("classnames"),N=o(w),R=3,M=1;r["default"]=c["default"].createClass({displayName:"Comments",propTypes:{subjectKey:i["default"].PropTypes.string.isRequired,subject:f["default"].commentSubject(),subjectUrl:i["default"].PropTypes.string,showTimestamp:i["default"].PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,P.connectToLazyStore)(y["default"],"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){S["default"].showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){S["default"].showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(M),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return e>R||e>this.state.comments.length?s("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?s("span",{},void 0,s("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),s("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,s(T["default"],{}))):s("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null;
},renderComments:function(){var e=this,t=this.state.showPagination?this.state.comments:u["default"].takeRight(this.state.comments,R);return u["default"].map(t,function(t){return i["default"].createElement(h["default"],n({key:t.uri,subjectKey:e.props.subjectKey,subject:e.props.subject,showTimestamp:e.props.showTimestamp},t))})},render:function(){var e=(0,N["default"])(this.withBemModifiers("gr-comments"),"gr-box","gr-box--hiddenOverflow","u-defaultType");return this.state.numComments>0?s("div",{className:e},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?s("div",{className:"u-topGrayBorder"},void 0,s(g["default"],{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":34,"../../react_mixins/gr_reflux":255,"../../react_stores/comments_store":261,"../gr_component_factory":129,"../pagination_links":171,"../shared/gr_prop_types":196,"../spinner":209,"./comment":84,classnames:"classnames",lodash:"lodash",react:"react"}],87:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),p=o(c),f=e("../spinner"),m=o(f),h=e("../flagged_resources/flag_for_abuse_link"),_=o(h),g=e("../time/relative_time"),v=o(g),y=e("../dot_separated_elements"),b=o(y),S=e("../../react_actions/comment_actions"),k=o(S),T=e("../../react_stores/user_agent_capabilities_store"),P=o(T),w=e("../../modules/env_utils"),N=o(w);r["default"]=d["default"].createClass({displayName:"CommentRightSideInformation",mixins:[l["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{showTimestamp:a["default"].PropTypes.bool,isHoveringOnComment:a["default"].PropTypes.bool,deletableByCurrentUser:a["default"].PropTypes.bool.isRequired,subject:p["default"].commentSubject().isRequired,uri:a["default"].PropTypes.string.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,createdAt:p["default"].date.isRequired,flagForAbuseUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),k["default"].deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?a["default"].createElement(m["default"],{ref:"spinner"}):a["default"].createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){var e=this.props.flagForAbuseUrl+"&return_url="+encodeURIComponent(N["default"].getLocationUrl());return n(_["default"],{flagForAbuseUrl:e})},getTimestamp:function(){return this.props.showTimestamp?n("small",{className:"gr-comment__timestamp"},void 0,n(v["default"],{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return n("div",{className:"gr-comment__rightSideInformation"},void 0,n(b["default"],{elements:this.getRightSideElements()}))}})},{"../../modules/env_utils":21,"../../react_actions/comment_actions":34,"../../react_stores/user_agent_capabilities_store":280,"../dot_separated_elements":110,"../flagged_resources/flag_for_abuse_link":126,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../spinner":209,"../time/relative_time":214,react:"react",reflux:"reflux"}],88:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("classnames"),d=o(u),c=e("./dot_separated_elements"),p=o(c),f={SMALL:"small",MEDIUM:"medium",LARGE:"large"},m=5;r["default"]=l["default"].createClass({displayName:"CommunityRating",statics:{ICON_SIZES:f},propTypes:{rating:a["default"].PropTypes.number.isRequired,displayAvg:a["default"].PropTypes.bool,displayAvgRatingText:a["default"].PropTypes.bool,ratingsCount:a["default"].PropTypes.number,textReviewsCount:a["default"].PropTypes.number,className:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([f.SMALL,f.MEDIUM,f.LARGE]),bookDetailsElements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string]))},getDefaultProps:function(){return{bookDetailsElements:[],displayAvg:!1,size:f.SMALL}},wrapperClasses:function(){return(0,d["default"])("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===f.SMALL,"communityRating__starsWrapper--medium":this.props.size===f.MEDIUM,"communityRating__starsWrapper--large":this.props.size===f.LARGE})},starClasses:function(){return(0,d["default"])("communityRating__stars",{"communityRating__stars--small":this.props.size===f.SMALL,"communityRating__stars--medium":this.props.size===f.MEDIUM,"communityRating__stars--large":this.props.size===f.LARGE})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:.5>e-t?t+.45:t+.6},renderRating:function(){var e=this.getRoundedRating(this.props.rating),t={width:e/m*100+"%"},r="Rated "+this.props.rating.toFixed(2)+" of "+m,o=null==this.props.displayAvgRatingText?this.props.displayAvg:this.props.displayAvgRatingText;return n("span",{},void 0,n("div",{className:this.wrapperClasses()},void 0,n("div",{className:this.starClasses(),style:t,"aria-label":r})),this.props.displayAvg?n("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2),o?" avg. rating":""):null)},renderRatingsCount:function(){return n("span",{className:"gr-metaText u-inlineBlock"},void 0,this.props.ratingsCount.toLocaleString()," Ratings")},renderTextReviewsCount:function(){return n("span",{className:"gr-metaText u-inlineBlock"},void 0,this.props.textReviewsCount.toLocaleString()," Reviews")},render:function(){var e=(0,d["default"])("communityRating",this.props.className),t="Rated "+this.props.rating.toFixed(2)+" of "+m,r=[this.renderRating()];return this.props.ratingsCount&&r.push(this.renderRatingsCount()),this.props.textReviewsCount&&r.push(this.renderTextReviewsCount()),this.props.bookDetailsElements.length>0&&this.props.bookDetailsElements.forEach(function(e){r.push(n("span",{className:"gr-metaText"},void 0,e))}),n("div",{className:e,"aria-label":t},void 0,n(p["default"],{elements:r}))}})},{"./dot_separated_elements":110,"./gr_component_factory":129,classnames:"classnames",react:"react"}],89:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../shared/gr_prop_types"),i=o(a),l=e("../book"),u=o(l),d=e("../community_rating"),c=o(d),p=e("./deal_expiration_date"),f=o(p),m=e("./deal_price"),h=o(m),_=e("./deal_tags"),g=o(_),v=e("../user_content/truncated_html"),y=o(v),b=e("./deal_buy_button"),S=o(b),k=e("../../modules/deals/deals_helper"),T=e("./deal_friend_list"),P=o(T),w=function(e){var t=e.deal,r=e.categories;return n("div",{className:"gr-deal"},void 0,React.createElement(u["default"],Object.assign({},t.book,{size:"large",bookCoverUrl:t.url}),n("div",{},void 0,n(c["default"],{rating:parseFloat(t.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.ratingsCount.toLocaleString()," Ratings"),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.textReviewsCount.toLocaleString()," Reviews")),n(g["default"],{tags:t.tags.concat(t.genres),categories:r}),n(y["default"],{html:t.description.html,truncated:t.description.truncated,fullContentUrl:t.description.fullContentUrl,className:"gr-deal__blurb"}),n(h["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n("div",{className:"u-floatRight u-bold"},void 0,n(f["default"],{expirationDate:t.expirationDate,size:k.LAYOUT_SIZE.WIDE})),n(S["default"],{retailerLinks:t.retailerLinks})),null!=t.social?n(P["default"],{social:t.social}):null)},N=function(e){var t=e.deal,r=e.categories;return n("div",{className:"gr-deal"},void 0,n("div",{className:"u-marginBottomXSmall"},void 0,React.createElement(u["default"],Object.assign({},t.book,{titleSize:"large"}),n("div",{},void 0,n(c["default"],{rating:parseFloat(t.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.ratingsCount.toLocaleString()," Ratings")),n(g["default"],{tags:t.tags.concat(t.genres),categories:r})),n(y["default"],{html:t.description.html,truncated:t.description.truncated,fullContentUrl:t.description.fullContentUrl,className:"gr-deal__blurb"}),n(h["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n("div",{className:"u-floatRight u-bold"},void 0,n(f["default"],{expirationDate:t.expirationDate,size:k.LAYOUT_SIZE.NARROW})),n(S["default"],{retailerLinks:t.retailerLinks})),null!=t.social?n(P["default"],{social:t.social}):null)},R=function(e){return e.size===k.LAYOUT_SIZE.WIDE?w(e):N(e)};R.propTypes={deal:i["default"].deal().isRequired,size:s.PropTypes.string},w.propTypes=N.propTypes=R.propTypes,r["default"]=R},{"../../modules/deals/deals_helper":13,"../book":79,"../community_rating":88,"../shared/gr_prop_types":196,"../user_content/truncated_html":227,"./deal_buy_button":90,"./deal_expiration_date":93,"./deal_friend_list":94,"./deal_price":96,"./deal_tags":98,react:"react"}],90:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=(0,u["default"])("gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","buttonGroup__dropdownMenuItem","u-displayBlock");r["default"]=a["default"].createClass({displayName:"DealBuyButton",getInitialState:function(){return{menuOpen:!1}},toggleMenuOpen:function(){this.setState({menuOpen:!this.state.menuOpen})},renderBuyLink:function(e){return n("a",{target:"_blank",className:d,"aria-label":"Buy this e-book on "+e.label,onClick:this.toggleMenuOpen,href:e.url},e.label,e.label)},renderAdditionalLinks:function(){var e=this,t=this.props.retailerLinks.additional;return this.state.menuOpen?n("div",{className:"buttonGroup__dropdownMenu gr-box gr-box--withShadowLarge"},void 0,t.map(function(t){return e.renderBuyLink(t)})):null},render:function(){var e=this.props.retailerLinks.preferred,t=this.props.retailerLinks.additional;return(0,i.isEmpty)(t)?n("div",{className:"u-marginTopXSmall"},void 0,n("a",{className:"gr-button",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label)):n("div",{},void 0,n("div",{className:"buttonGroup u-marginTopXSmall"},void 0,n("a",{className:"buttonGroup__button buttonGroup__button--first",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label),n("button",{className:"buttonGroup__button buttonGroup__button--last",onClick:this.toggleMenuOpen,"aria-label":"Click to show additional retailers for this e-book"},void 0,"▾"),this.renderAdditionalLinks()))}})},{"../gr_component_factory":129,classnames:"classnames",lodash:"lodash"}],91:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=e("classnames"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../book"),p=o(c),f=e("../community_rating"),m=o(f),h=e("./deal_price"),_=o(h),g=e("../user_content/truncated_html"),v=o(g),y=e("./deal_buy_button"),b=o(y),S=e("./deal_tags"),k=o(S),T=e("../share_social"),P=o(T),w={ratings:{"line-height":"150%","font-size":"14px"}},N=function(e){if(!e.sharing)return null;var t={social:{outsideModal:{facebook:!0,twitter:!0,pinterest:!0,copyLink:!0},fbOptions:e.sharing.fb,twitterOptions:e.sharing.twitter,pinterestOptions:e.sharing.pinterest}};return React.createElement(P["default"],s({className:"u-marginTopMedium"},t.social.outsideModal,{fbOptions:t.social.fbOptions,twitterOptions:t.social.twitterOptions,pinterestOptions:t.social.pinterestOptions}))},R=function(e){var t=e.deal,r=e.categories,o=e.className,s=(0,l["default"])("gr-deal",o);return n("div",{className:s},void 0,React.createElement(p["default"],Object.assign({},t.book,{bemModifiers:"xlarge"}),n("div",{className:"gr-metaText",style:w.ratings},void 0,n(m["default"],{rating:parseFloat(t.book.avgRating),size:"large",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{},void 0,t.book.ratingsCount.toLocaleString()," Ratings"),n("span",{},void 0," · "),n("span",{},void 0,t.book.textReviewsCount.toLocaleString()," Reviews")),n("div",{className:"u-marginTopSmall"},void 0,n(_["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n(b["default"],{retailerLinks:t.retailerLinks}),n(v["default"],{html:t.description.html,truncated:t.description.truncated,fullContentUrl:t.description.fullContentUrl,className:"gr-deal__blurb"}),n(k["default"],{tags:t.tags.concat(t.genres),categories:r}),N(t))))};R.propTypes={deal:d["default"].deal().isRequired,categories:a.PropTypes.array,className:a.PropTypes.string},r["default"]=R},{"../book":79,"../community_rating":88,"../share_social":194,"../shared/gr_prop_types":196,"../user_content/truncated_html":227,"./deal_buy_button":90,"./deal_price":96,"./deal_tags":98,classnames:"classnames",react:"react"}],92:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("../shared/gr_prop_types"),l=o(i),u=e("./deal_detail"),d=o(u),c=e("./deals_category_explorer"),p=o(c),f=e("./deals_ctas"),m=o(f),h=e("./deals_legalese"),_=o(h),g=e("../../modules/deals/deals_helper"),v=e("../../modules/deals/landing_page/filters"),y=e("../../modules/deals/landing_page/helper"),b=function(e){var t=e.deal,r=e.deals;return n("div",{className:"u-marginTopMedium u-marginBottomMedium"},void 0,n("h3",{className:"gr-h3 u-marginTopNone"},void 0,"More Deals"),n("div",{className:"u-inlineBlock"},void 0,(0,a.map)((0,a.sample)((0,v.getRelatedDeals)(t,r),4),function(e){return n("span",{className:"u-marginRightLarge"},e.book.title,n("a",{href:e.url},void 0,n("img",{src:e.book.imageUrl,alt:e.book.title})))})))};b.propTypes={deal:l["default"].deal(),deals:s.PropTypes.array};var S=function(e){var t=(0,y.prepareProps)(e),r=t.categories;return n("div",{className:"gr-deals"},void 0,n("h1",{className:"pageHeader textColor u-marginTopMedium"},void 0,"Goodreads Deals"),n("div",{className:"u-marginTopSmall u-marginBottomTiny"},void 0,n("a",{href:e.activeDealsUrl},void 0,"Goodreads Deals")," > Book Detail"),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,n(d["default"],{deal:e.deal,categores:r,className:"u-bottomGrayBorder u-paddingBottomLarge"}),React.createElement(b,e),n(_["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n(p["default"],{categories:r,activeDealsUrl:e.activeDealsUrl,size:g.LAYOUT_SIZE.WIDE}),n(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n("div",{className:"u-clearBoth"}))};S.propTypes={deal:l["default"].deal(),deals:s.PropTypes.array,categories:s.PropTypes.array,subscribed:s.PropTypes.bool,aboutUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string},r["default"]=S},{"../../modules/deals/deals_helper":13,"../../modules/deals/landing_page/filters":15,"../../modules/deals/landing_page/helper":16,"../shared/gr_prop_types":196,"./deal_detail":91,"./deals_category_explorer":99,"./deals_ctas":102,"./deals_legalese":104,lodash:"lodash",react:"react"}],93:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../time/relative_time"),i=o(a),l=e("../../modules/deals/deals_helper"),u=function(e){return n("span",{className:"gr-deal__expirationDate"},void 0,"Expires ",n(i["default"],{time:e,longFormat:!0}))},d=function(e){return n("span",{className:"gr-deal__expirationDate"},void 0,"Exp. ",n(i["default"],{time:e}))},c=function(e){var t=e.expirationDate,r=e.size;return r===l.LAYOUT_SIZE.WIDE?u(t):d(t)};c.propTypes={expirationDate:s.PropTypes.string.isRequired,size:s.PropTypes.string},r["default"]=c},{"../../modules/deals/deals_helper":13,"../time/relative_time":214,react:"react"}],94:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../user/user_icon_list"),l=o(i),u=e("./deal_friend_text"),d=o(u);r["default"]=a["default"].createClass({displayName:"DealFriendList",propTypes:{social:React.PropTypes.object},render:function(){return n("div",{className:"gr-deal__friendList"},void 0,n(l["default"],{users:this.props.social.friends}),React.createElement(d["default"],this.props.social))}})},{"../gr_component_factory":129,"../user/user_icon_list":221,"./deal_friend_text":95}],95:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealFriendText",propTypes:{friends:React.PropTypes.array.isRequired,totalFriends:React.PropTypes.number.isRequired,descriptor:React.PropTypes.string.isRequired,defaultUrl:React.PropTypes.string.isRequired},getFormattedText:function(){var e="gr-hyperlink gr-hyperlink--bold",t=this.props.friends.map(function(e){return e.viewableName}),r=this.props.friends.map(function(e){return e.profileUrl});switch(this.props.totalFriends){case 1:return n("a",{href:r[0],className:e},void 0,t[0]);case 2:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0])," and ",n("a",{href:r[1],className:e},void 0,t[1]));case 3:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0]),", ",n("a",{href:r[1],className:e},void 0,t[1])," and ",n("a",{href:r[2],className:e},void 0,t[2]));default:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0]),", ",n("a",{href:r[1],className:e},void 0,t[1])," and ",n("a",{href:this.props.defaultUrl,className:e},void 0,this.props.totalFriends-2," more friends"))}},render:function(){return n("span",{className:"gr-deal__friendText"},void 0,this.getFormattedText(),this.props.descriptor)}})},{"../gr_component_factory":129}],96:[function(e,t,r){"use strict";var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=function(e){var t=parseFloat(e);return isNaN(t)||0>=t?"FREE":"$"+e},a=function(e){var t=e.dealPrice,r=e.listPrice;return o("span",{className:"gr-deal__price"},void 0,o("span",{className:"gr-deal__price__deal u-marginRightXSmall"},void 0,s(t)),o("span",{className:"gr-deal__price__original"},void 0,o("strike",{},void 0,s(r)),"*"))};a.propTypes={dealPrice:n.PropTypes.string.isRequired,listPrice:n.PropTypes.string.isRequired},r["default"]=a},{react:"react"}],97:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.DealTag=r.TAG_CLASSES=r.TAG_TEXT=r.TAG_TYPE=void 0;var s=e("react"),a=e("classnames"),i=o(a),l=r.TAG_TYPE={WTR:"wtr",AUTHOR_FOLLOW:"author",FANTASY_AND_SCI_FI:"Fantasy & Science Fiction"},u=r.TAG_TEXT={};u[l.WTR]="You Want to Read",u[l.AUTHOR_FOLLOW]="Author You Follow",u[l.FANTASY_AND_SCI_FI]="Fantasy & Sci-Fi";var d=r.TAG_CLASSES={};d[l.WTR]="gr-deal__tag__green",d[l.AUTHOR_FOLLOW]="gr-deal__tag__brown";var c=function(e){return u[e]||e},p=r.DealTag=function(e){var t=e.text,r=e.url,o=(0,i["default"])("gr-deal__tag",d[t]);return n("div",{className:o},void 0,n("a",{href:r},void 0,c(t)))};p.propTypes={text:s.PropTypes.string.isRequired,url:s.PropTypes.string},r["default"]=p},{classnames:"classnames",react:"react"}],98:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("./deal_tag"),i=o(a),l=e("lodash"),u=function(e){var t=e.tags,r=e.categories,o=void 0===r?[]:r,s=t;return t.length>4&&(s=t.slice(0,4)),n("div",{},void 0,(0,l.map)(s,function(e){var t=(0,l.findIndex)(o,function(t){return t.headline==e});return("wtr"==e||"author"==e)&&(t=(0,l.findIndex)(o,function(e){return"Recommended for You"==e.headline})),n(i["default"],{text:e,url:t>=0?o[t].url:null},e)}))};u.propTypes={tags:s.PropTypes.array,categories:s.PropTypes.array},r["default"]=u},{"./deal_tag":97,lodash:"lodash",react:"react"}],99:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("classnames"),i=o(a),l=e("lodash"),u=e("../../modules/deals/deals_helper"),d={categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,activeDealsUrl:s.PropTypes.string},c=function(e){var t=e.selectedCategory,r=e.categories,o=e.activeDealsUrl;return r=(0,l.filter)(r,function(e){return e.visible}),n("div",{className:"gr-dealsCategoryExplorer u-paddingBottomSmall"},void 0,n("h3",{className:"gr-h3 u-marginTopNone"},void 0,"Explore by Category"),n("ul",{className:"u-unstyledListItem"},void 0,n("li",{},"home",n("a",{href:o,className:(0,i["default"])("gr-hyperlink",{"gr-hyperlink--bold":!t})},void 0,"All Deals")),(0,l.map)(r,function(e){return n("li",{},e.headline,n("a",{href:e.url,className:(0,i["default"])("gr-hyperlink",{"gr-hyperlink--bold":t&&t.url===e.url})},void 0,e.headline))})))};c.propTypes=d;var p=function(e){window.location.href=e.target.value},f=function(e){var t=e.selectedCategory,r=e.categories;return r=(0,l.filter)(r,function(e){return e.visible}),n("div",{className:"gr-dealsCategoryExplorer u-paddingBottomSmall"},void 0,n("select",{defaultValue:t&&t.url||"",onChange:p},void 0,n("option",{value:"",disabled:!0},void 0,"Browse by Category"),(0,l.map)(r,function(e){return n("option",{value:e.url},e.headline,e.headline)})))};f.propTypes=d;var m=function(e){return e.size===u.LAYOUT_SIZE.WIDE?c(e):f(e)};m.propTypes={size:s.PropTypes.oneOf((0,l.values)(u.LAYOUT_SIZE))},r["default"]=m},{"../../modules/deals/deals_helper":13,classnames:"classnames",lodash:"lodash",react:"react"}],100:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("classnames"),l=o(i),u=e("./deals_list"),d=o(u),c=function(e){return n("div",{className:"gr-metaText u-marginTopMedium u-marginBottomHuge"},void 0,"Sorry, there aren't any Deals in '",e.selectedCategory.headline,"' right now. ",n("a",{href:e.activeDealsUrl},void 0,"Check out our latest Deals."))};c.propTypes={selectedCategory:s.PropTypes.object,activeDealsUrl:s.PropTypes.string};var p=function(e){var t=void 0,r=e.signedIn,o=e.settingsUrl;return t=r?n("span",{},void 0,n("p",{},void 0,"There are no active deals on your Want to Read shelf or by Authors you follow."),n("p",{},void 0,"Tell us more about the types of Genres you like to read, so that we can improve our recommendations to you!")):n("span",{},void 0,"Create a Goodreads account to set your reading preferences and get personalized recommendations!"),n("div",{className:"u-marginTopMedium u-marginBottomHuge"},void 0,n("div",{className:"gr-metaText"},void 0,t),n("a",{className:"gr-button u-marginTopMedium",href:o},void 0,"Subscribe to Goodreads Deals"))};p.propTypes={signedIn:s.PropTypes.bool,settingsUrl:s.PropTypes.string};var f=function(e){var t=void 0;t=(0,a.isEmpty)(e.deals)?"Recommended for You"===e.selectedCategory.headline?p(e):c(e):n(d["default"],{deals:e.deals,size:e.size,categories:e.categories});var r=(0,l["default"])("u-paddingTopSmall",e.className);return n("div",{className:r},void 0,t)};f.propTypes={deals:s.PropTypes.array,size:s.PropTypes.string,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,signedIn:s.PropTypes.bool,settingsUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,className:s.PropTypes.string},r["default"]=f},{"./deals_list":105,classnames:"classnames",lodash:"lodash",react:"react"}],101:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("./deals_category_explorer"),l=o(i),u=e("./deals_category_list"),d=o(u),c=e("./deals_legalese"),p=o(c),f=e("./deals_ctas"),m=o(f),h=e("../../modules/deals/deals_helper"),_=e("../../modules/deals/landing_page/helper"),g=e("./deals_list_page_headers"),v={
deals:s.PropTypes.array,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,subscribed:s.PropTypes.bool,signedIn:s.PropTypes.bool,aboutUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string},y=function(e){var t=(0,a.flatten)(e.deals);return n("div",{},void 0,n(g.WideDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl,titleLinkUrl:e.activeDealsUrl}),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,n("h1",{className:"pageHeader textColor"},void 0,e.selectedCategory.headline),n(d["default"],{deals:t,size:h.LAYOUT_SIZE.WIDE,categories:e.categories,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl,className:"u-topGrayBorder"}),(0,a.isEmpty)(t)?null:n(p["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n("div",{className:"u-marginTopXSmall"},void 0,n(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:h.LAYOUT_SIZE.WIDE}),n(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl}))),n("div",{className:"u-clearBoth"}))};y.propTypes=v;var b=function(e){return n("div",{},void 0,n(g.NarrowDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl,titleLinkUrl:e.activeDealsUrl}),n("div",{className:"u-bottomGrayBorder u-marginTopMedium"},void 0,n(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:h.LAYOUT_SIZE.NARROW}),n(d["default"],{deals:(0,a.flatten)(e.deals),size:h.LAYOUT_SIZE.NARROW,categories:e.categories,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl})),n("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,n(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n(p["default"],{}))};b.propTypes=v;var S=function(e){return e=(0,_.prepareProps)(e),n("div",{className:"gr-deals"},void 0,n("div",{className:"visibleWide"},void 0,y(e)),n("div",{className:"visibleNarrow"},void 0,b(e)))};r["default"]=S},{"../../modules/deals/deals_helper":13,"../../modules/deals/landing_page/helper":16,"./deals_category_explorer":99,"./deals_category_list":100,"./deals_ctas":102,"./deals_legalese":104,"./deals_list_page_headers":106,lodash:"lodash",react:"react"}],102:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealsCtas",propTypes:{subscribed:React.PropTypes.bool,aboutUrl:React.PropTypes.string,settingsUrl:React.PropTypes.string},renderSettingsLinks:function(){return n("div",{className:"u-topGrayBorder u-paddingTopMedium u-paddingBottomMedium"},void 0,n("a",{href:this.props.aboutUrl,className:"u-displayBlock u-marginBottomSmall"},void 0,"About Goodreads Deals"),n("a",{href:this.props.settingsUrl,className:"u-displayBlock"},void 0,"Update Your Settings"))},render:function(){return n("div",{},void 0,this.props.subscribed?this.renderSettingsLinks():null)}})},{"../gr_component_factory":129}],103:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("./deals_welcome_message"),i=o(a),l=e("./deals_lists"),u=o(l),d=e("./deals_category_explorer"),c=o(d),p=e("./deals_legalese"),f=o(p),m=e("./deals_ctas"),h=o(m),_=e("../../modules/deals/deals_helper"),g=e("../../modules/deals/landing_page/helper"),v=e("./deals_list_page_headers"),y={deals:s.PropTypes.array,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,subscribed:s.PropTypes.bool,aboutUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string,customHeader:s.PropTypes.string},b=function(e){return n("div",{},void 0,n("div",{className:"u-bottomGrayBorder"},void 0,n(v.NarrowDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl}),React.createElement(i["default"],e),n(c["default"],{categories:e.categories,selectedCategory:e.selectedCategory,size:_.LAYOUT_SIZE.NARROW}),n(u["default"],{deals:e.deals,categories:e.categories,size:_.LAYOUT_SIZE.NARROW})),n("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,n(h["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n(f["default"],{}))};b.propTypes=y;var S=function(e){return n("div",{},void 0,n(v.WideDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl}),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,React.createElement(i["default"],e),n(u["default"],{deals:e.deals,categories:e.categories,size:_.LAYOUT_SIZE.WIDE}),n(f["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n(c["default"],{categories:e.categories,activeDealsUrl:e.activeDealsUrl,selectedCategory:e.selectedCategory,size:_.LAYOUT_SIZE.WIDE}),n(h["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl})),n("div",{className:"u-clearBoth"}))};S.propTypes=y;var k=function(e){return e=(0,g.prepareProps)(e),n("div",{className:"gr-deals"},void 0,n("div",{className:"visibleWide"},void 0,S(e)),n("div",{className:"visibleNarrow"},void 0,b(e)))};r["default"]=k},{"../../modules/deals/deals_helper":13,"../../modules/deals/landing_page/helper":16,"./deals_category_explorer":99,"./deals_ctas":102,"./deals_legalese":104,"./deals_list_page_headers":106,"./deals_lists":107,"./deals_welcome_message":108,react:"react"}],104:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealsLegalese",render:function(){return n("div",{className:"u-textAlignCenter u-topGrayBorder u-paddingTopMedium u-paddingBottomXSmall"},void 0,n("div",{className:"u-marginRightMedium u-marginLeftMedium"},void 0,n("div",{},void 0,n("small",{},void 0,"*Regular price provided by publisher or as shown on Amazon.com.")),n("small",{},void 0,"Prices and availability were accurate at the time the deal was featured. However, they may differ from those you see when you visit the retailer websites. The end date for the deal is provided by the publisher, and is subject to change.")))}})},{"../gr_component_factory":129}],105:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=e("react"),i=e("./deal"),l=o(i),u=e("moment"),d=o(u),c=function(e){var t=e.deals,r=e.listName,o=e.size,a=e.categories,i=(0,d["default"])().utc(),u=t.filter(function(e){return i.isBefore(e.expirationDate)});return(0,s.isEmpty)(u)?n("div",{}):n("div",{className:"gr-dealsList u-paddingBottomSmall"},void 0,r?n("h3",{className:"gr-h3 gr-dealsList__listName u-marginTopNone"},r,r):null,(0,s.map)(u,function(e){return n("div",{className:"gr-dealsList__listItem"},e.uri,n("div",{className:"u-anchorTarget",id:e.uri},void 0,n(l["default"],{deal:e,size:o,categories:a})))}))};c.propTypes={deals:a.PropTypes.array.isRequired,listName:a.PropTypes.string,size:a.PropTypes.string,categories:a.PropTypes.array},r["default"]=c},{"./deal":89,lodash:"lodash",moment:"moment",react:"react"}],106:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.WideDealsListPageHeader=r.NarrowDealsListPageHeader=void 0;var s=e("react"),a=e("append-query"),i=o(a),l={subscribed:s.PropTypes.bool.isRequired,signupUrl:s.PropTypes.string.isRequired,titleLinkUrl:s.PropTypes.string},u=function(e){return window.gtag_report_engagement("sign_up"),window.gtag_report_conversion(e)},d=r.NarrowDealsListPageHeader=function(e){var t=e.subscribed,r=e.signupUrl,o=e.titleLinkUrl,s=(0,i["default"])(r,{from:"dlp-m-banner"}),a=n("a",{href:s,className:"u-marginBottomSmall u-displayBlock",onClick:function(e){return e.preventDefault(),u(s)}},void 0,n("div",{className:"gr-deals__banner gr-deals--mobile__banner",ariaLabel:"Goodreads Deals Logo"}));return o?n("div",{},void 0,t?null:a,n("a",{href:o},void 0,"Goodreads Deals")):t?n("h1",{className:"pageHeadline u-marginTopLarge"},void 0,"Goodreads Deals"):a};d.propTypes=l;var c=r.WideDealsListPageHeader=function(e){var t=e.subscribed,r=e.signupUrl,o=e.titleLinkUrl,s=n("h1",{className:"u-marginTopLarge"},void 0,"Goodreads Deals"),a=(0,i["default"])(r,{from:"dlp-d-banner"}),l=n("a",{href:a,onClick:function(e){return e.preventDefault(),u(a)}},void 0,n("h1",{className:"gr-deals__banner gr-deals--desktop__banner",ariaLabel:"Goodreads Deals Logo"}));return o?n("div",{},void 0,t?null:l,n("a",{href:o},void 0,"Goodreads Deals")):t?s:l};c.propTypes=l},{"append-query":"append-query",react:"react"}],107:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){function e(e,t){var r=[],o=!0,n=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){n=!0,s=l}finally{try{!o&&i["return"]&&i["return"]()}finally{if(n)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=e("lodash"),l=e("./deals_list"),u=o(l),d=function(e){return s("div",{},void 0,(0,i.map)((0,i.zip)(e.categories,e.deals),function(t){var r=n(t,2),o=r[0],a=r[1];return s(u["default"],{listName:o.headline,deals:a,size:e.size,categories:e.categories},o.headline)}))};d.propTypes={deals:a.PropTypes.array,categories:a.PropTypes.array,size:a.PropTypes.string},r["default"]=d},{"./deals_list":105,lodash:"lodash",react:"react"}],108:[function(e,t,r){"use strict";var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=function(e){var t=e.firstTimeDealsUser,r=e.user,n=e.settingsUrl;return t?o("div",{className:"gr-infoMessageBox u-marginBottomMedium"},void 0,r?o("h3",{className:"gr-h3"},void 0,"Congratulations ",r.name,"!"):null,o("div",{},void 0,"You’re signed up for Goodreads Deals. You will now receive deals from genres you love! You can update your preferences anytime from the ",o("a",{href:n},void 0,"Settings page"),".")):o("div",{})};s.propTypes={firstTimeDealsUser:n.PropTypes.bool,user:n.PropTypes.object,settingsUrl:n.PropTypes.string};var a={},i=function(e){var t=e.readerRevenueCampaign,r=a[t]||s;return React.createElement(r,e)};i.propTypes={readerRevenueCampaign:n.PropTypes.string},r["default"]=i},{react:"react"}],109:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("../shared/cookies"),u=o(l),d=e("classnames"),c=o(d),p=function(e){return window.gtag_report_engagement("sign_up"),window.gtag_report_conversion(e)};r["default"]=i["default"].createClass({displayName:"Megaphone",propTypes:{id:s.PropTypes.string.isRequired,buttonText:s.PropTypes.string.isRequired,description:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,url:s.PropTypes.string.isRequired,className:s.PropTypes.string},getInitialState:function(){return{visible:null==u["default"].get(this.cookieName())}},cookieName:function(){return"mgphn_"+this.props.id},onDismiss:function(){this.setState({visible:!1}),u["default"].set(this.cookieName(),!1)},descriptionMarkup:function(){return{__html:this.props.description}},render:function(){var e=this;return this.state.visible?n("div",{id:"megaphone",className:(0,c["default"])("megaphone",this.props.className)},void 0,n("h2",{className:"megaphone__title"},void 0,this.props.title),n("div",{className:"megaphone__description",dangerouslySetInnerHTML:this.descriptionMarkup()}),n("a",{className:"megaphone__button","aria-label":"Sign up for Goodreads",href:this.props.url,onClick:function(){return p(e.props.url)}},void 0,this.props.buttonText),n("span",{className:"megaphone__close",onClick:this.onDismiss})):null}})},{"../gr_component_factory":129,"../shared/cookies":195,classnames:"classnames",react:"react"}],110:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("./gr_component_factory"),u=o(l);r["default"]=u["default"].createClass({displayName:"DotSeparatedElements",propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string])).isRequired,separator:a["default"].PropTypes.element},getDefaultProps:function(){return{separator:n("span",{},void 0," · ")}},joinElementsWithSeparator:function(){var e=this,t=(0,i.compact)(this.props.elements);return(0,i.transform)(t,function(r,o,n){r.push(o),n+1!==t.length&&r.push(e.props.separator)})},render:function(){return n("span",{className:this.props.className},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return n("span",{},t,e)}))}})},{"./gr_component_factory":129,lodash:"lodash",react:"react"}],111:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"DropDownList",propTypes:{showMoreLink:a["default"].PropTypes.bool,moreLinkURL:a["default"].PropTypes.string,moreLinkText:a["default"].PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"…More"}},render:function(){return n("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?n("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":129,react:"react"}],112:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("reflux"),d=o(u),c=e("./gr_component_factory"),p=o(c),f=e("../react_mixins/hover_intent"),m=o(f),h=e("classnames"),_=o(h),g=e("react-onclickoutside"),v=o(g),y=e("../modules/keys"),b=o(y),S=e("../react_stores/user_agent_capabilities_store"),k=o(S),T={HOVER:"hover",CLICK:"click"},P={LEFT:"left",RIGHT:"right"},w=100,N=w;r["default"]=p["default"].createClass({displayName:"Dropdown",mixins:[m["default"],v["default"],d["default"].connect(k["default"],"userAgentCapabilities")],propTypes:{alignment:a["default"].PropTypes.oneOf(l["default"].values(P)),fallbackUrl:a["default"].PropTypes.string,onShowCallback:a["default"].PropTypes.func,tooltipText:a["default"].PropTypes.string,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired,triggerEventType:a["default"].PropTypes.oneOf(l["default"].values(T))},statics:{TriggerEventTypes:T},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?T.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:T.CLICK,alignment:P.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){b["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),b["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):b["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,w)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,N)},handleTriggerClick:function(e){return this.state.dropdownOpen&&this.props.triggerEventType===T.HOVER&&this.state.userAgentCapabilities.touch!==!0?void e.preventDefault():void this.toggle(e)},triggerClasses:function(){return(0,_["default"])(this.withBemModifiers(["dropdown__trigger"]),{"dropdown__trigger--buttonReset":l["default"].isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===T.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList,title:this.props.tooltipText},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,title:this.props.tooltipText},void 0,this.props.trigger)},render:function(){var e=(0,_["default"])(this.withBemModifiers("dropdown")),t=(0,_["default"])(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),o=n("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case T.HOVER:return n("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,o);case T.CLICK:return n("div",{className:e},void 0,r,o)}}})},{"../modules/keys":24,"../react_mixins/hover_intent":256,"../react_stores/user_agent_capabilities_store":280,"./gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],113:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s);r["default"]=a["default"].createClass({displayName:"error_message.js",propTypes:{componentName:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],114:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),p=o(c),f=e("../../../../author/author_badge"),m=o(f);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultAuthor",propTypes:{result:d["default"].searchResults.author().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,p["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"Author pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Author",a["default"].createElement(m["default"],this.props.result.object)))}})},{"../../../../author/author_badge":77,"../../../../gr_component_factory":129,"../../../../shared/gr_prop_types":196,classnames:"classnames",react:"react"}],115:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),p=o(c),f=e("../../../../author/author_badge"),m=o(f);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultBook",propTypes:{result:d["default"].searchResults.book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,p["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-universalSearchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.imageUrl,alt:"Cover pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.title),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"by ",this.props.result.object.authorName,a["default"].createElement(m["default"],this.props.result.object))))}})},{"../../../../author/author_badge":77,"../../../../gr_component_factory":129,"../../../../shared/gr_prop_types":196,classnames:"classnames",react:"react"}],116:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),p=o(c);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultUser",propTypes:{result:d["default"].searchResults.user().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,p["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"User pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Goodreads User"))}})},{"../../../../gr_component_factory":129,"../../../../shared/gr_prop_types":196,classnames:"classnames",react:"react"}],117:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../../../gr_component_factory"),c=o(d),p=e("reflux"),f=o(p),m=e("react-onclickoutside"),h=o(m),_=e("classnames"),g=o(_),v=e("../../../../modules/keys"),y=o(v),b=e("../../../../react_stores/experimental/search/universal_search_store_factory"),S=o(b),k=e("./universal_search_results"),T=o(k),P=e("../../../spinner"),w=o(P),N=e("../../../../react_mixins/factory_store_mixin"),R=o(N);r["default"]=c["default"].createClass({displayName:"UniversalSearch",mixins:[h["default"],f["default"].ListenerMixin,(0,R["default"])(S["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:7,closeAfterResultChosen:!1}},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){this.actions.search(e.target.value,this.props.autocompleteUrl,this.props.maxResults)},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide();
},renderInputIcon:function(){var e=(0,g["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(w["default"],{})):s("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,g["default"])(this.withBemModifiers("searchBox")),t=(0,g["default"])(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,className:"searchBox__form",role:"search","aria-label":"Search for books to add to your shelves"},void 0,s("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books/authors","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../../../modules/keys":24,"../../../../react_mixins/factory_store_mixin":254,"../../../../react_stores/experimental/search/universal_search_store_factory":263,"../../../gr_component_factory":129,"../../../spinner":209,"./universal_search_results":118,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],118:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u),c=e("../../../drop_down_list"),p=o(c),f=e("./results/universal_search_result_book"),m=o(f),h=e("./results/universal_search_result_author"),_=o(h),g=e("./results/universal_search_result_user"),v=o(g),y=e("../../../shared/gr_prop_types"),b=o(y),S=e("../../../gr_component_factory"),k=o(S),T={author:_["default"],book:m["default"],friend:v["default"]};r["default"]=k["default"].createClass({displayName:"UniversalSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.oneOfType([b["default"].searchResults.author(),b["default"].searchResults.book(),b["default"].searchResults.user()])},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("gr-universalSearchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},renderResult:function(e){var t=this,r=T[e.type];return n("div",{className:(0,d["default"])("gr-universalSearchResults__item",{"gr-universalSearchResults__item--active":e===this.props.activeResult}),onMouseOver:function(){t.props.mouseoverAction(e)}},e.object.id,n(r,{result:e,onChooseResult:this.props.onChooseResult}))},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("gr-universalSearchResults"),"gr-box","gr-box--withShadow");return n("div",{className:t,id:"universalSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Universal search results"},void 0,n(p["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return e.renderResult(t)}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../../../drop_down_list":111,"../../../gr_component_factory":129,"../../../shared/gr_prop_types":196,"./results/universal_search_result_author":114,"./results/universal_search_result_book":115,"./results/universal_search_result_user":116,classnames:"classnames",lodash:"lodash",react:"react"}],119:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("reflux"),p=o(c),f=e("./genre_checkbox"),m=o(f),h=e("./../react_actions/modal_actions"),_=o(h),g=e("../react_actions/favorite_genres_form_actions"),v=o(g),y=e("../react_stores/favorite_genres_form_store"),b=o(y);r["default"]=d["default"].createClass({displayName:"FavoriteGenresForm",mixins:[p["default"].connect(b["default"],"favoriteGenresFormStore")],propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){v["default"].submitSelectedGenres(),_["default"].closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var e=this;return n("div",{className:"gr-genresForm__checkBoxes"},void 0,l["default"].map(this.props.genres,function(t){return n(m["default"],{genre:t.name,isFavorited:l["default"].includes(e.state.favoriteGenresFormStore.selectedGenres,t.name)},t.name)}))},render:function(){return n("div",{className:"gr-genresForm"},void 0,n("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),n("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),n("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),n("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":40,"../react_stores/favorite_genres_form_store":264,"./../react_actions/modal_actions":45,"./genre_checkbox":128,"./gr_component_factory":129,lodash:"lodash",react:"react",reflux:"reflux"}],120:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("./dot_separated_elements"),l=o(i),u=e("react"),d=o(u),c=e("classnames"),p=o(c),f=e("./click_tracking_wrapper"),m=o(f),h=e("../modules/ads/click_tracking_helper"),_="Read More";r["default"]=a["default"].createClass({displayName:"FeaturedContentBlog",propTypes:{blog:d["default"].PropTypes.shape({likeCount:d["default"].PropTypes.number.isRequired,commentCount:d["default"].PropTypes.number.isRequired,imageUrl:d["default"].PropTypes.string.isRequired,blogUrl:d["default"].PropTypes.string.isRequired,title:d["default"].PropTypes.string.isRequired}).isRequired,isMobile:d["default"].PropTypes.bool,isInline:d["default"].PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=(0,p["default"])("featuredContentImageBody__imageLink",{"featuredContentImageBody__imageLink--inline":this.props.isInline}),t=(0,p["default"])("featuredContentImageBody__image",{featuredContentImageBody__imageMobile:this.props.isMobile});if(this.props.blog.imageUrl){var r=n("a",{className:e,href:this.props.blog.blogUrl},void 0,n("img",{className:t,src:this.props.blog.imageUrl,alt:""+this.props.blog.title}));return n(m["default"],{trackingOptions:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_image,children:r})}return null},renderTitle:function(){var e=(0,p["default"])("featuredContentImageBody__title",{"featuredContentImageBody__title--mobile":this.props.isMobile,"featuredContentImageBody__title--inline":this.props.isInline}),t=n("a",{href:this.props.blog.blogUrl,className:e},void 0,this.props.blog.title);return n(m["default"],{trackingOptions:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_title,children:t})},renderLikesText:function(e){return n("span",{className:"gr-metaText featuredContentImageBody__likes"},void 0,e," likes")},renderCommentsText:function(e){return n("span",{className:"gr-metaText featuredContentImageBody__comments"},void 0,e," comments")},renderReadMore:function(){var e=(0,p["default"])("gr-button","featuredContentImageBody__button",{"featuredContentImageBody__button--mobile":this.props.isMobile,"featuredContentImageBody__button--inline":this.props.isInline}),t=n("a",{href:this.props.blog.blogUrl,className:e},void 0,_);return n(m["default"],{trackingOptions:h.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_blog_button,children:t})},renderLikesAndComments:function(){return n("div",{className:"featuredContentImageBody__likesAndComments"},void 0,this.renderLikesAndCommentsText())},renderLikesAndCommentsText:function(){var e=this.props.blog,t=this.renderLikesText(e.likeCount),r=this.renderCommentsText(e.commentCount);return e.likeCount&&e.commentCount?n(l["default"],{elements:[t,r]}):e.likeCount?t:e.commentCount?r:null},render:function(){return this.props.isInline?n("div",{className:"featuredContentImageBody--inline genreFeatureContainer"},void 0,this.renderImage(),n("div",{},void 0,this.renderTitle(),this.renderLikesAndComments(),this.renderReadMore())):n("div",{className:"featuredContentImageBody genreFeatureContainer"},void 0,this.renderTitle(),this.renderImage(),this.renderLikesAndComments(),this.renderReadMore())}})},{"../modules/ads/click_tracking_helper":3,"./click_tracking_wrapper":82,"./dot_separated_elements":110,"./gr_component_factory":129,classnames:"classnames",react:"react"}],121:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./book"),u=o(l),d=e("./book_description"),c=o(d),p=e("react"),f=o(p),m=e("./click_tracking_wrapper"),h=o(m),_=e("classnames"),g=o(_),v=e("../modules/ads/click_tracking_helper");r["default"]=i["default"].createClass({displayName:"FeaturedContentBook",propTypes:{book:f["default"].PropTypes.object.isRequired,isMobile:f["default"].PropTypes.bool,isInline:f["default"].PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=s("img",{alt:this.props.book.title,src:this.props.book.imageUrl,className:(0,g["default"])("featuredContentBook__imageMobile")}),t=s("a",{href:this.props.book.bookCoverUrl||this.props.book.bookUrl,className:(0,g["default"])("featuredContentBook__imageLinkMobile")},void 0,e);return s(h["default"],{trackingOptions:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_image,children:t})},renderDescription:function(){return this.props.book.description?s(c["default"],{bookDescription:this.props.book.description,className:(0,g["default"])("featuredContentBook__description"),bookDescriptionTargetingData:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_description}):null},renderLearnMore:function(){var e=(0,g["default"])("gr-button","featuredContentBook__button",{"featuredContentBook__button--mobile":this.props.isMobile,"featuredContentBook__button--inline":this.props.isInline}),t=s("a",{href:this.props.book.bookUrl,className:e},void 0,"Learn more");return s(h["default"],{trackingOptions:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_button,children:t})},render:function(){return this.props.isMobile?s("div",{className:(0,g["default"])("featuredContentBook","featuredContentBook--mobile")},void 0,this.renderImage(),this.renderDescription(),this.renderLearnMore()):s("div",{className:"featuredContentBook"},void 0,f["default"].createElement(u["default"],n({},this.props.book,{bookImageTrackingData:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_image,bookTitleTrackingData:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_title,authorLinkTrackingData:v.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_book_author}),this.renderDescription(),this.renderLearnMore()))}})},{"../modules/ads/click_tracking_helper":3,"./book":79,"./book_description":80,"./click_tracking_wrapper":82,"./gr_component_factory":129,classnames:"classnames",react:"react"}],122:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("react"),l=o(i),u=e("classnames"),d=o(u),c=e("./click_tracking_wrapper"),p=o(c),f=e("../modules/ads/click_tracking_helper"),m="Learn More";r["default"]=a["default"].createClass({displayName:"FeaturedContentGenre",propTypes:{genre:l["default"].PropTypes.shape({imageUrl:l["default"].PropTypes.string.isRequired,genreUrl:l["default"].PropTypes.string.isRequired,tagline:l["default"].PropTypes.string.isRequired}).isRequired,isMobile:l["default"].PropTypes.bool,isInline:l["default"].PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderImage:function(){var e=(0,d["default"])("featuredContentImageBody__image",{featuredContentImageBody__imageMobile:this.props.isMobile}),t=(0,d["default"])("featuredContentImageBody__imageLink",{"featuredContentImageBody__imageLink--inline":this.props.isInline});if(this.props.genre.imageUrl){var r=n("a",{className:t,href:this.props.genre.genreUrl},void 0,n("img",{className:e,src:this.props.genre.imageUrl,alt:""+this.props.genre.tagline}));return n(p["default"],{trackingOptions:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_image,children:r})}return null},renderTitle:function(){var e=this.props.isMobile?(0,d["default"])("featuredContentImageBody__title","featuredContentImageBody__title--mobile"):"featuredContentImageBody__title",t=n("a",{href:this.props.genre.genreUrl,className:e},void 0,this.props.genre.tagline);return n(p["default"],{trackingOptions:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_title,children:t})},renderCTAButton:function(){var e=(0,d["default"])("gr-button gr-microsite-link",{featuredContentImageBody__button:this.props.isMobile,"u-marginTopMedium":!this.props.isInline}),t=n("a",{href:this.props.genre.genreUrl,className:e},void 0,m);return n(p["default"],{trackingOptions:f.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_genre_button,children:t})},render:function(){return this.props.isInline?n("div",{className:"featuredContentImageBody--inline genreFeatureContainer"},void 0,this.renderImage(),n("div",{},void 0,this.renderTitle(),this.renderCTAButton())):n("div",{className:"featuredContentImageBody genreFeatureContainer"},void 0,this.renderTitle(),this.renderImage(),this.props.isMobile?this.renderCTAButton():null)}})},{"../modules/ads/click_tracking_helper":3,"./click_tracking_wrapper":82,"./gr_component_factory":129,classnames:"classnames",react:"react"}],123:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./book"),u=o(l),d=e("react"),c=o(d),p=e("./time/relative_time"),f=o(p),m=e("./user_content/expandable_html"),h=o(m),_=e("./shared/gr_prop_types"),g=o(_),v=e("./click_tracking_wrapper"),y=o(v),b=e("../modules/ads/click_tracking_helper");r["default"]=i["default"].createClass({displayName:"FeaturedContentGiveaway",propTypes:{giveaway:c["default"].PropTypes.shape({book:c["default"].PropTypes.object.isRequired,description:g["default"].expandableHtml().isRequired,endAt:c["default"].PropTypes.string.isRequired,giveawayUrl:c["default"].PropTypes.string.isRequired}).isRequired,isMobile:c["default"].PropTypes.bool},defaultProps:{isMobile:!1},render:function(){var e=this.props.giveaway;return s("div",{className:"featuredContentGiveaway"},void 0,c["default"].createElement(u["default"],n({},e.book,{bookImageTrackingData:b.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_image,bookTitleTrackingData:b.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_title,authorLinkTrackingData:b.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_author,bemModifiers:this.props.isMobile?"mobile":""}),c["default"].createElement(h["default"],n({},e.description,{className:"featuredContentGiveaway__description"})),s("div",{className:"featuredContentGiveaway__expiration gr-metaText"},void 0,"Ends ",s(f["default"],{time:e.endAt,longFormat:!0})),s(y["default"],{trackingOptions:b.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_giveaway_button},void 0,s("a",{href:e.giveawayUrl,className:"gr-button"},void 0,"Learn more"))))}})},{"../modules/ads/click_tracking_helper":3,"./book":79,"./click_tracking_wrapper":82,"./gr_component_factory":129,"./shared/gr_prop_types":196,"./time/relative_time":214,"./user_content/expandable_html":223,react:"react"}],124:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("react"),l=o(i),u=e("lodash"),d=e("./click_tracking_wrapper"),c=o(d),p=e("../modules/ads/click_tracking_helper"),f=e("classnames"),m=o(f);r["default"]=a["default"].createClass({displayName:"FeaturedContentList",propTypes:{list:l["default"].PropTypes.shape({listUrl:l["default"].PropTypes.string.isRequired,title:l["default"].PropTypes.string.isRequired,topBooksCovers:l["default"].PropTypes.array.isRequired}).isRequired,isMobile:l["default"].PropTypes.bool,isInline:l["default"].PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1},renderBookCovers:function(){var e=this,t=this.props.isMobile?"featuredContentList__bookCoverImage--allowOverlap":"featuredContentList__bookCoverImage--noOverlap",r=(0,m["default"])("featuredContentList__bookCovers",{"featuredContentList__bookCovers--inline":this.props.isInline});return n("div",{className:r},void 0,n(c["default"],{trackingOptions:p.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_books},void 0,n("a",{href:this.props.list.listUrl},void 0,(0,u.map)(this.props.list.topBooksCovers,function(r){return n("div",{className:"featuredContentList__bookCoverContainer"},r,n("img",{src:r,alt:e.props.list.title,className:t}))}))))},renderCTA:function(){return this.props.isMobile?n(c["default"],{trackingOptions:p.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_button},void 0,n("a",{className:"gr-button gr-button--fullWidth u-marginBottomSmall u-marginTopSmall",href:this.props.list.listUrl},void 0,"View list")):null},render:function(){var e=this.props.list,t=(0,m["default"])("featuredContentList",{"featuredContentList--inline":this.props.isInline}),r=(0,m["default"])("u-bold featuredContentList__title",{"featuredContentList__title--inline":this.props.isInline}),o=(0,m["default"])("u-bold featuredContentList__listDetailsContainer",{"featuredContentList__listDetailsContainer--inline":this.props.isInline}),s=(0,m["default"])("u-bold featuredContentList__listDetails",{"featuredContentList__listDetails--inline":this.props.isInline});return n("div",{className:t},void 0,this.renderBookCovers(),n(c["default"],{trackingOptions:p.TRACKED_CLASSES_PREMIUM_CAMPAIGN.fcm_list_title},void 0,n("a",{href:e.listUrl,className:r},void 0,e.title)),n("div",{className:o},void 0,n("div",{className:s},void 0,e.numBooks.toLocaleString()," books · ",e.numVoters.toLocaleString()," voters")),this.renderCTA())}})},{"../modules/ads/click_tracking_helper":3,"./click_tracking_wrapper":82,"./gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react"}],125:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("react"),l=o(i),u=e("./featured_content_blog"),d=o(u),c=e("./featured_content_book"),p=o(c),f=e("./featured_content_list"),m=o(f),h=e("./featured_content_genre"),_=o(h),g=e("./featured_content_giveaway"),v=o(g),y=e("./sponsored_footer"),b=o(y),S=e("classnames"),k=o(S);r["default"]=a["default"].createClass({displayName:"FeaturedContentModule",propTypes:{type:l["default"].PropTypes.string.isRequired,resource:l["default"].PropTypes.object.isRequired,sponsorName:l["default"].PropTypes.string,isSponsored:l["default"].PropTypes.bool,isMobile:l["default"].PropTypes.bool,hasBottomBorder:l["default"].PropTypes.bool,isInline:l["default"].PropTypes.bool},defaultProps:{isMobile:!1,isInline:!1,hasBottomBorder:!1},headerText:function(){switch(this.props.type){case"Blog":return"Featured Blog Post";case"Book":return"Featured Book";case"Giveaway":return"Featured Giveaway";case"List":return"Featured List";case"Genre":return"Featured Genre";default:return"Featured Content"}},renderContent:function(){switch(this.props.type){case"Blog":return this.renderBlog();case"Book":return this.renderBook();case"Giveaway":return this.renderGiveaway();case"List":return this.renderList();case"Genre":return this.renderGenre();default:return null}},renderHeader:function(){if(this.props.isMobile)return n("h3",{className:"gr-h3"},void 0,this.headerText());var e=(0,k["default"])("featuredContentModule__header",{"featuredContentModule__header--inline":this.props.isInline});return n("div",{className:e},void 0,this.headerText())},renderFooter:function(){return this.props.isSponsored?n(b["default"],{isSponsored:!0,sponsoredName:this.props.sponsorName}):null},renderBlog:function(){return n(d["default"],{blog:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderBook:function(){return n(p["default"],{book:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderGiveaway:function(){return n(v["default"],{giveaway:this.props.resource,isMobile:this.props.isMobile})},renderList:function(){return n(m["default"],{list:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},renderGenre:function(){return n(_["default"],{genre:this.props.resource,isMobile:this.props.isMobile,isInline:this.props.isInline})},render:function(){var e=(0,k["default"])("featuredContentModule",{"featuredContentModule--mobile":this.props.isMobile,"featuredContentModule--inline":this.props.isInline}),t="";return this.props.isMobile&&(t=this.props.hasBottomBorder?"featuredContentBorder__underline":"featuredContentBorder__overline"),n("div",{className:t},void 0,n("section",{className:e},void 0,this.renderHeader(),this.renderContent(),this.renderFooter()))}})},{"./featured_content_blog":120,"./featured_content_book":121,"./featured_content_genre":122,"./featured_content_giveaway":123,"./featured_content_list":124,"./gr_component_factory":129,"./sponsored_footer":210,classnames:"classnames",react:"react"}],126:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("classnames"),d=o(u);r["default"]=l["default"].createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:a["default"].PropTypes.string.isRequired},render:function(){var e=(0,d["default"])("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return n("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":129,classnames:"classnames",react:"react"}],127:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=e("./close_button"),c=o(d),p={ERROR:"error",INFO:"info",NOTICE_DEPRECATED:"notice",SUCCESS:"success",WARNING:"warning"};r["default"]=a["default"].createClass({displayName:"FlashMessage",propTypes:{category:a["default"].PropTypes.oneOf((0,i.values)(p)),message:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{isVisible:!0}},hideMessage:function(){this.setState({isVisible:!1})},flashMessageMarkup:function(){return{__html:this.props.message}},render:function(){if((0,i.isEmpty)(this.props.message))return null;var e=(0,u["default"])("gr-flashMessage",{"gr-flashMessage--dismissed":!this.state.isVisible,"gr-flashMessage--error":this.props.category===p.ERROR,"gr-flashMessage--info":this.props.category===p.INFO,"gr-flashMessage--warning":this.props.category===p.WARNING,"gr-flashMessage--success":this.props.category===p.SUCCESS});return n("div",{className:e,role:"alert"},void 0,n(c["default"],{action:this.hideMessage,className:"gr-flashMessage__dismissButton"}),n("span",{dangerouslySetInnerHTML:this.flashMessageMarkup()}))}})},{"./close_button":83,classnames:"classnames",lodash:"lodash",react:"react"}],128:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("classnames"),d=o(u),c=e("../react_actions/favorite_genres_form_actions"),p=o(c);r["default"]=l["default"].createClass({displayName:"GenreCheckbox",propTypes:{genre:a["default"].PropTypes.string,isFavorited:a["default"].PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?p["default"].deselectFavoriteGenre(this.props.genre):p["default"].selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,d["default"])("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return n("label",{className:e},void 0,n("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),a["default"].createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),n("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":40,"./gr_component_factory":129,classnames:"classnames",react:"react"}],129:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=e("react"),i=o(a),l=e("../react_mixins/bem_modifiers"),u=o(l),d=e("../react_mixins/deploy_service"),c=o(d),p=e("react-addons-pure-render-mixin"),f=o(p),m=e("../react_mixins/tracking_data_attributes_mixin"),h=o(m),_=e("./error_message"),g=o(_),v=e("../modules/env_utils"),y=o(v),b=e("../modules/gr_error_reporting"),S=o(b),k=[f["default"],u["default"],c["default"],h["default"]],T={showErrorMessage:"production"===y["default"].DEVELOPMENT},P=function(e,t){var r=e.render;t=(0,s.merge)({},T,t),e.render=function(){try{return r.apply(this,arguments)}catch(o){return S["default"].notifyException(o,"Failed to render "+e.displayName),t.showErrorMessage?n(g["default"],{componentName:e.displayName}):null}}},w=function(e){if((0,s.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.");
},N=function(e){var t=e.mixins||[];e.mixins=t.concat(k)},R=function(e,t){return N(e),"production"!==y["default"].TEST&&P(e,t),e};r["default"]={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return w(e.displayName),i["default"].createClass(R(e,t))}}},{"../modules/env_utils":21,"../modules/gr_error_reporting":23,"../react_mixins/bem_modifiers":252,"../react_mixins/deploy_service":253,"../react_mixins/tracking_data_attributes_mixin":257,"./error_message":113,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],130:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shape_icon"),d=o(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"GroupIcon",propTypes:{group:a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!1,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.group;return n(d["default"],{imageUrl:e.iconUrl,imageAlt:e.name,linkUrl:e.url,shape:c.ICON_SHAPES.ROUND_SQUARE,size:this.props.size,includeLink:this.props.includeLink})}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../shape_icon":191,react:"react"}],131:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u),c=e("../modal"),p=o(c),f=e("../spinner"),m=o(f),h=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"PreviewBroadcast",propTypes:{previewBroadcastURL:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{fetching:!1}},requestPreview:function(e,t){var r=this;(0,h.httpRequest)(this.props.previewBroadcastURL,{method:"GET",data:{message:{subject:e,body:t}}}).done(function(e){r.setState({modalHTML:{__html:e},fetching:!1})}).fail(function(){r.setState({modalHTML:{__html:"<div>There was an error processing your request.</div>"},fetching:!1})})},handlePreview:function(){var e=this,t=document.getElementById("message_body").value,r=document.getElementById("message_subject").value;this.setState({fetching:!0},function(){return e.requestPreview(r,t)})},renderModal:function(){return this.state.fetching?null:n(p["default"],{id:"previewBroadcast",centered:!0,bemModifiers:"previewBroadcast"},void 0,n("div",{className:"modalMessageBox"},void 0,n("h3",{className:"modalMessageBox__headerText"},void 0,"Message Preview"),n("div",{dangerouslySetInnerHTML:this.state.modalHTML})))},renderModalTrigger:function(){return this.state.fetching?n(m["default"],{isSmall:!0}):n(d["default"],{id:"previewBroadcast"},void 0,n("button",{className:"gr-buttonAsLink previewBroadcast__linkText",onClick:this.handlePreview},void 0,"(preview)"))},render:function(){var e=this.renderModal(),t=this.renderModalTrigger();return n("div",{className:"previewBroadcast"},void 0,n("div",{className:"previewBroadcast__openPreviewContainer"},void 0,t,e))}})},{"../../modules/ajax/ajax_helper":5,"../gr_component_factory":129,"../modal":167,"../modal_trigger":168,"../spinner":209,react:"react"}],132:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("./favorite_genres_pane"),p=o(c),f=e("./featured_genres"),m=o(f),h=e("./genre_list"),_=o(h),g=e("../menu_link"),v=o(g),y=e("./primary_nav_menu"),b=o(y),S=e("../../react_actions/featured_genres_actions"),k=o(S);r["default"]=d["default"].createClass({displayName:"BrowseMenu",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string.isRequired,choiceAwardsUrl:a["default"].PropTypes.string.isRequired,dealsUrl:a["default"].PropTypes.string.isRequired,editorsPicksUrl:a["default"].PropTypes.string.isRequired,favoriteGenres:a["default"].PropTypes.array,genresIndexUrl:a["default"].PropTypes.string.isRequired,sponsoredGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string.isRequired,listUrl:a["default"].PropTypes.string.isRequired,newReleasesUrl:a["default"].PropTypes.string.isRequired,recommendationsUrl:a["default"].PropTypes.string.isRequired,blogUrl:a["default"].PropTypes.string.isRequired,signedIn:a["default"].PropTypes.bool},render:function(){var e=function(){k["default"].trackMenuImpression(),k["default"].requestFeaturedBooks()},t=n("span",{},void 0,"Browse ▾");return n(b["default"],{tabName:"siteHeaderBrowseMenu",trigger:t,fallbackUrl:this.props.browseUrl,bemModifiers:["siteHeaderBrowseMenu"],onShowCallback:e},void 0,n("div",{className:"siteHeader__browseMenuDropdown"},void 0,n("ul",{className:"siteHeader__subNav"},void 0,n(v["default"],{href:this.props.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.dealsUrl,linkText:"Deals",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.genresIndexUrl,linkText:"Genres",linkClass:"siteHeader__subNavLink siteHeader__subNavLink--genresIndex"}),n(v["default"],{href:this.props.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.editorsPicksUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.browseUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"}),n(v["default"],{href:this.props.blogUrl,linkText:"Blog",linkClass:"siteHeader__subNavLink"}),n("div",{className:"siteHeader__sponsoredFillSpace"}),n(v["default"],{href:"https://www.goodreads.com/track/daily_click?pmet_click_tid=AEP_Header_BrowseMenu_TrafficDriver_Click&tid=AEP_Desktop_Header_BrowseEntrypoint&url=https://www.goodreads.com/audible",linkText:n("div",{},void 0,n("div",{className:"siteHeader__navDivider"}),n("span",{},void 0,"Listen with Audible")),linkClass:"siteHeader__sponsoredNavLink"}),n("div",{className:"siteHeader__sponsoredLabel"},void 0,n("span",{className:"siteHeader__sponsoredIcon googleNativeAd__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel siteHeader__sponsoredText"},void 0,"Sponsored"))),this.renderSpotlight()))},classesWithModifier:function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e},renderGenreList:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(_["default"],{genres:this.props.genres}))},renderFeaturedGenres:function(){return n("div",{className:this.classesWithModifier("browseMenu")},void 0,n(m["default"],{favoriteGenres:this.props.favoriteGenres,sponsoredGenres:this.props.sponsoredGenres,adId:this.props.adId}))},renderFavoriteGenresPane:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(p["default"],{genres:this.props.genres}))},renderSpotlight:function(){return this.props.signedIn?l["default"].isEmpty(this.props.favoriteGenres)?this.renderFavoriteGenresPane():this.renderFeaturedGenres():this.renderGenreList()}})},{"../../react_actions/featured_genres_actions":41,"../gr_component_factory":129,"../menu_link":166,"./favorite_genres_pane":137,"./featured_genres":138,"./genre_list":141,"./primary_nav_menu":151,lodash:"lodash",react:"react"}],133:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../menu_link"),p=o(c),f=e("../ads/google_banner_ad"),m=o(f),h=e("../../react_stores/google_ads_store"),_=o(h),g=e("../../react_actions/google_ads_actions"),v=o(g),y=e("./primary_nav_menu"),b=o(y);r["default"]=d["default"].createClass({displayName:"CommunityMenu",mixins:[l["default"].connect(_["default"],"googleAdsStore")],propTypes:{communityUrl:a["default"].PropTypes.string.isRequired,featuredAskAuthorUrl:a["default"].PropTypes.string.isRequired,groupsUrl:a["default"].PropTypes.string.isRequired,discussionsUrl:a["default"].PropTypes.string.isRequired,quotesUrl:a["default"].PropTypes.string.isRequired,eventUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},renderSpotlightAd:function(){var e=_["default"].findAd(/goodr.nav.browse.300x250/);return e?n("div",{className:"siteHeader__spotlight--withoutSubMenu siteHeader__spotlight--communityMenu googleAd"},void 0,n("div",{className:"spotlightAd"},void 0,n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"u-marginTopTiny"},void 0,n(m["default"],{adId:e.id,delayImpressionTracking:!0}))))):void 0},renderMenuLink:function(e,t){return e?n(p["default"],{href:e,linkText:t,linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=n("span",{},void 0,"Community ▾"),t=function(){var e=_["default"].findAd(/goodr.nav.browse.300x250/);e&&v["default"].trackImpression(e.id,e.ad.impressionCode)};return n(b["default"],{tabName:"siteHeaderCommunityMenu",trigger:e,fallbackUrl:this.props.communityUrl,onShowCallback:t},void 0,n("ul",{className:"siteHeader__subNav"},void 0,this.renderMenuLink(this.props.groupsUrl,"Groups"),this.renderMenuLink(this.props.discussionsUrl,"Discussions"),this.renderMenuLink(this.props.quotesUrl,"Quotes"),this.renderMenuLink(this.props.featuredAskAuthorUrl,"Ask the Author"),this.renderMenuLink(this.props.triviaUrl,"Trivia"),this.renderMenuLink(this.props.quizzesUrl,"Quizzes"),this.renderMenuLink(this.props.storiesUrl,"Creative Writing"),this.renderMenuLink(this.props.peopleUrl,"People"),this.renderMenuLink(this.props.eventUrl,"Events")),this.renderSpotlightAd())}})},{"../../react_actions/google_ads_actions":42,"../../react_stores/google_ads_store":267,"../ads/google_banner_ad":66,"../gr_component_factory":129,"../menu_link":166,"./primary_nav_menu":151,react:"react",reflux:"reflux"}],134:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../shared/gr_prop_types"),l=o(i),u=e("append-query"),d=o(u),c=e("../../../modules/shape_icon_values"),p=e("../../time/relative_time"),f=o(p),m=e("../../group/group_icon"),h=o(m),_=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsGroupBanner",propTypes:{group:l["default"].group()},render:function(){var e=this.props.group;return n("a",{href:(0,d["default"])(e.url,{ref:_.URLTrackingParams.DISCUSSIONS_PANE_GROUP}),"aria-label":"Visit your group "+this.props.group.name,className:"gr-hyperlink\n                          gr-hyperlink--naked\n                          gr-hyperlink--noUnderline"},void 0,n("div",{className:"gr-mediaFlexbox\n                              gr-mediaFlexbox--alignItemsCenter\n                              gr-headerDiscussions__groupBanner"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(h["default"],{group:e,size:c.ICON_SIZES.SMALL})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__groupTitle"},void 0,e.name),n("small",{},void 0,"Active ",n(f["default"],{time:e.lastActiveAt,longFormat:!0})))))}})},{"../../../analytics/url_tracking_params":2,"../../../modules/shape_icon_values":27,"../../gr_component_factory":129,"../../group/group_icon":130,"../../shared/gr_prop_types":196,"../../time/relative_time":214,"append-query":"append-query"}],135:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../shared/gr_prop_types"),l=o(i),u=e("append-query"),d=o(u),c=e("moment"),p=o(c),f=e("../../time/relative_time"),m=o(f),h=e("../../dot_separated_elements"),_=o(h),g=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsTopic",propTypes:{topic:l["default"].topic()},getTitleAriaLabel:function(){var e=void 0;return e=this.props.topic.newPosts?"New comments in topic "+this.props.topic.title:"Topic "+this.props.topic.title,e+=this.props.topic.folder?" in folder "+this.props.topic.folder.name+".":".",e+=" "+(0,p["default"])(this.props.topic.updatedAt).fromNow()+".",this.props.topic.newPosts&&(e+=" "+this.props.topic.newPosts+"."),e},getTopicUrl:function(){var e=this.props.topic.newCommentsUrl?this.props.topic.newCommentsUrl:this.props.topic.url;return(0,d["default"])(e,{ref:g.URLTrackingParams.DISCUSSIONS_PANE_DISCUSSION})},renderFolder:function(){return this.props.topic.folder?n("span",{className:"gr-headerDiscussions__topicFolderTitle"},void 0,"in ",this.props.topic.folder.name):null},renderPosts:function(){return this.props.topic.newPosts?n("div",{className:"gr-smallAlert"},void 0,this.props.topic.newPosts):n("small",{},void 0,this.props.topic.totalPosts)},render:function(){var e=this.props.topic,t=[this.renderPosts(),n("small",{},void 0,n(m["default"],{time:e.updatedAt,longFormat:!0}))];return n("a",{className:"gr-headerDiscussions__topic\n                         gr-hyperlink\n                         gr-hyperlink--noUnderline",href:this.getTopicUrl(),"aria-label":this.getTitleAriaLabel()},void 0,n("span",{className:"gr-headerDiscussions__topicTitle"},void 0,e.title)," ",this.renderFolder(),n("div",{className:"gr-headerDiscussions__posts"},void 0,n(_["default"],{elements:t,separator:n("small",{className:"u-marginLeftTiny u-marginRightTiny"},void 0,"·")})))}})},{"../../../analytics/url_tracking_params":2,"../../dot_separated_elements":110,"../../gr_component_factory":129,"../../shared/gr_prop_types":196,"../../time/relative_time":214,"append-query":"append-query",moment:"moment"}],136:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("reflux"),i=o(a),l=e("lodash"),u=e("append-query"),d=o(u),c=e("../gr_component_factory"),p=o(c),f=e("../dropdown"),m=o(f),h=e("../../react_actions/discussions_pane_actions"),_=o(h),g=e("../../react_stores/group_store"),v=o(g),y=e("./discussions/group_banner"),b=o(y),S=e("./discussions/topic"),k=o(S),T=e("../spinner"),P=o(T),w=e("../shape_icon"),N=o(w),R=e("../../analytics/url_tracking_params");r["default"]=p["default"].createClass({mixins:[i["default"].connect(v["default"],"groupStore")],displayName:"DiscussionsPane",propTypes:{discussionsUrl:s.PropTypes.string.isRequired,groupsUrl:s.PropTypes.string.isRequired},getGroupState:function(){return this.state.groupStore},renderAllUnreadPostsLink:function(e){var t="All unread posts in group "+e.name;return n("a",{className:"gr-headerDiscussions__moreDiscussionsLink gr-hyperlink u-textAlignCenter","aria-label":t,href:(0,d["default"])(e.allUnreadPostsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS})},void 0,"All unread posts")},renderDiscussionsList:function(){var e=this;return(0,l.map)(this.getGroupState().groups,function(t){return n("div",{},"discussionsGroup"+t.group.id,n(b["default"],{group:t.group}),(0,l.map)(t.topics,function(e){return n(k["default"],{topic:e},"discussionsTopic"+e.id)}),e.renderAllUnreadPostsLink(t.group))})},renderSparseState:function(){var e=this.getGroupState().sparse;return n("div",{className:"gr-headerDiscussions u-defaultType"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeading"},void 0,"Group Discussions"),n("div",{},void 0,n("div",{className:"gr-headerDiscussions__sparseBody"},void 0,n("div",{className:"gr-headerDiscussions__groupsExplanation"},void 0,"Want to connect with readers who love the same books as you? Goodreads has a group for almost any interest."),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(N["default"],{imageUrl:e.groupModeratorImageUrl,imageAlt:"Moderator of a book group"})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"I\'ve been reading more since I became involved with groups. I especially love reading challenges…"'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Moderator of a book group"),n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.groupsWithReadingChallengesUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES})},void 0,"See groups with reading challenges"))),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n(N["default"],{className:"gr-mediaFlexbox__media",imageUrl:e.groupMemberImageUrl,imageAlt:"Member of a group"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"When I first joined a group, I finally felt like I had friends interested in the same books as me."'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Member of a group"),n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.popularGroupsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_POPULAR})},void 0,"See popular groups"))))),n("div",{className:"u-topGrayBorder gr-headerDiscussions__moreDiscussionsLink u-textAlignCenter u-marginTopSmall"},void 0,n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.allGroupsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_ALL})},void 0,"View all groups")))},renderPaneContents:function(){var e=this.getGroupState();return e.errorMessage?n("div",{className:"dropdown__container\n                             gr-headerDiscussions\n                             u-paddingTopBottomXSmall\n                             u-textAlignCenter"},void 0,e.errorMessage):e.sparse?this.renderSparseState():(0,l.isEmpty)(e.groups)?n("div",{className:"dropdown__container\n                             gr-headerDiscussions\n                             u-paddingTopBottomXSmall\n                             u-textAlignCenter"},void 0,n(P["default"],{})):n("section",{className:"dropdown__container"},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Group Discussions"),n("a",{className:"u-displayBlock gr-hyperlink",href:(0,d["default"])(this.props.discussionsUrl,{discussion_filter:"groups",ref:R.URLTrackingParams.DISCUSSIONS_PANE_ALL_DISCUSSIONS})},void 0,"View all group discussions")),n("div",{className:"gr-headerDiscussions gr-box gr-box--forceScrollBar"},void 0,this.renderDiscussionsList()))},render:function(){var e=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--discussions","aria-label":"My group discussions"});return n(m["default"],{trigger:e,triggerEventType:m["default"].TriggerEventTypes.CLICK,fallbackUrl:this.getGroupState().sparse?this.props.groupsUrl:(0,d["default"])(this.props.discussionsUrl,{discussion_filter:"groups"}),tooltipText:"My group discussions",bemModifiers:"discussions",isInPersonalNav:"true",onShowCallback:_["default"].openPane},void 0,this.renderPaneContents())}})},{"../../analytics/url_tracking_params":2,"../../react_actions/discussions_pane_actions":37,"../../react_stores/group_store":268,"../dropdown":112,"../gr_component_factory":129,"../shape_icon":191,"../spinner":209,"./discussions/group_banner":134,"./discussions/topic":135,"append-query":"append-query",lodash:"lodash",react:"react",reflux:"reflux"}],137:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u);r["default"]=l["default"].createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},render:function(){return n("div",{className:"favoriteGenresPane"},void 0,n("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),n("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),n("div",{className:"favoriteGenresPane__buttonContainer"},void 0,n(d["default"],{id:"favGenres"},void 0,n("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),n("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":129,"../modal_trigger":168,react:"react"}],138:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=o(a),l=e("reflux"),u=o(l),d=e("../gr_component_factory"),c=o(d),p=e("./featured_genres_book"),f=o(p),m=e("./featured_genres_list"),h=o(m),_=e("../spinner"),g=o(_),v=e("../../react_stores/featured_genres_store"),y=o(v),b=e("../../react_stores/user_agent_capabilities_store"),S=o(b),k=e("../../react_stores/google_ads_store"),T=o(k),P=e("../ads/google_native_nav_ad"),w=o(P),N=e("../ads/google_native_nav_creative"),R=o(N),M=e("./../tab_content"),C=o(M),A=e("../../modules/ads/google_ad_helper"),x=/goodr.nav.browse.400x300/,I=1108;r["default"]=c["default"].createClass({displayName:"FeaturedGenres",propTypes:{sponsoredGenres:React.PropTypes.array,adId:React.PropTypes.string},getDefaultProps:function(){return{sponsoredGenres:[]}},mixins:[u["default"].connect(y["default"],"featuredGenres"),u["default"].connect(S["default"],"userAgentCapabilities"),u["default"].connect(T["default"],"googleAdsStore")],renderBooks:function(){if(this.state.userAgentCapabilities.touch===!0){var e=this.state.featuredGenres.featuredGenreBookInfo[0];return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(f["default"],{book:e.book,genre:e.genre,alwaysShown:!0}))}return i["default"].map(this.state.featuredGenres.featuredGenreBookInfo,function(e){return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(f["default"],{book:e.book,genre:e.genre}))})},renderSponsoredSpotlight:function(e){var t=this;if(e){var r=function(){var e={enableTracking:!0,adId:t.props.adId};return{v:i["default"].map(t.props.sponsoredGenres,function(r){var o=s(R["default"],{adId:t.props.adId,genre:r.name,trackingOptions:e});return s("div",{className:"featuredGenres__genreSpotlight"},r.name,s(C["default"],{group:"featuredGenres",name:"featuredGenre-"+r.name},void 0,o))})}}();if("object"===("undefined"==typeof r?"undefined":n(r)))return r.v}},render:function(){var e=T["default"].findAd(x),t=window.innerWidth,r=(0,A.googletagDefined)();return this.state.featuredGenres.featuredGenreBookInfo?t>=I&&e&&r&&this.state.googleAdsStore.nativeAds[this.props.adId]&&!this.state.googleAdsStore.nativeAds[this.props.adId].creative?s("div",{className:"featuredGenres featuredGenres--sparse"},void 0,s(g["default"],{}),s(w["default"],{adId:this.props.adId})):s("div",{className:"featuredGenres"},void 0,s("span",{className:"featuredGenres__genreList"},void 0,s(h["default"],{genres:i["default"].pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre"),sponsoredGenres:this.props.sponsoredGenres,showSponsoredGenres:this.state.googleAdsStore.nativeAds[this.props.adId]&&!this.state.googleAdsStore.nativeAds[this.props.adId].empty&&r})),r?this.renderSponsoredSpotlight(e):null,this.renderBooks()):this.state.featuredGenres.errorMessage?s("span",{},void 0,this.state.featuredGenres.errorMessage):s("div",{className:"featuredGenres featuredGenres--sparse"},void 0,s(g["default"],{}))}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/featured_genres_store":266,"../../react_stores/google_ads_store":267,"../../react_stores/user_agent_capabilities_store":280,"../ads/google_native_nav_ad":70,"../ads/google_native_nav_creative":71,"../gr_component_factory":129,"../spinner":209,"./../tab_content":213,"./featured_genres_book":139,"./featured_genres_list":140,lodash:"lodash",reflux:"reflux"}],139:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../shared/gr_prop_types"),c=o(d),p=e("./../book"),f=o(p),m=e("./../community_rating"),h=o(m),_=e("./../tab_content"),g=o(_),v=e("./../user_content/truncated_html"),y=o(v),b=e("../want_to_read/want_to_read_button"),S=o(b),k=e("lodash"),T=e("../../analytics/origins");r["default"]=u["default"].createClass({displayName:"FeaturedGenresBook",propTypes:{alwaysShown:i["default"].PropTypes.bool,genre:i["default"].PropTypes.shape({name:i["default"].PropTypes.string.isRequired,url:i["default"].PropTypes.string.isRequired}).isRequired,book:c["default"].book().isRequired},renderBookDescription:function(){return(0,k.isUndefined)(this.props.book.description)?null:s("div",{className:"featuredGenres__bookDescription"},void 0,i["default"].createElement(y["default"],this.props.book.description))},renderBook:function(){var e=this.props.genre;return s("div",{className:"featuredGenres__book"},void 0,s("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Among Most Read This Week in "+e.name),s("div",{className:"u-marginTopSmall"},void 0,i["default"].createElement(f["default"],n({},this.props.book,{key:this.props.book.bookId,size:p.VALID_BOOK_SIZES.LARGE}),s(h["default"],{rating:parseFloat(this.props.book.avgRating),displayAvg:!0}),s("div",{className:"featuredGenres__bookWantToReadButton"},void 0,s(S["default"],{bookTitle:this.props.book.title,uniqueId:(0,k.random)(1e6).toString(),bookId:this.props.book.bookId,origin:T.ShelvedBookOrigin.BROWSE_SPOTLIGHT,showMenu:!1})),this.renderBookDescription())),s("a",{href:e.url,className:"u-defaultType gr-hyperlink"},void 0,"More in "+e.name))},render:function(){return this.props.alwaysShown===!0?this.renderBook():s(g["default"],{group:"featuredGenres",name:"featuredGenre-"+this.props.genre.name},void 0,this.renderBook())}})},{"../../analytics/origins":1,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../want_to_read/want_to_read_button":237,"./../book":79,"./../community_rating":88,"./../tab_content":213,"./../user_content/truncated_html":227,lodash:"lodash",react:"react"}],140:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;
if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("classnames"),a=o(s),i=e("reflux"),l=o(i),u=e("react"),d=o(u),c=e("lodash"),p=e("../dropdown"),f=o(p),m=e("../gr_component_factory"),h=o(m),_=e("./../tab"),g=o(_),v=e("../../react_stores/user_agent_capabilities_store"),y=o(v),b=8,S=1;r["default"]=h["default"].createClass({displayName:"FeaturedGenresList",mixins:[l["default"].connect(y["default"],"userAgentCapabilities")],propTypes:{adId:d["default"].PropTypes.string,genres:d["default"].PropTypes.array.isRequired,sponsoredGenres:d["default"].PropTypes.array,showSponsoredGenres:d["default"].PropTypes.bool},onClick:function(e){e.preventDefault()},allGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},"allGenres",n("a",{href:"/genres",className:"siteHeader__subNavLink"},void 0,"All Genres"))},renderGenreLink:function(e,t){var r=(0,a["default"])(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),o=n("a",{href:e.url,className:r},void 0,e.name);return this.state.userAgentCapabilities.touch===!0?o:n(g["default"],{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:f["default"].TriggerEventTypes.HOVER,initiallySelected:t},void 0,o)},renderSponsoredGenresList:function(){var e=this;return this.props.showSponsoredGenres?n("div",{className:"featuredGenres__list genreList genreList--featuredSidebar"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Featured Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.sponsoredGenres,S),function(t){return n("li",{role:"menuitem",className:"genreList__genre"},t.name,e.renderGenreLink(t,!0))}))):null},renderFavoritesList:function(){var e=this,t=(0,c.random)(0,this.props.genres.length-1),r=this.props.showSponsoredGenres?b-2:b;return n("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,n("div",{className:"siteHeader__title siteHeader__heading"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.genres,r),function(r,o){return n("li",{role:"menuitem",className:"genreList__genre"},r.name,e.renderGenreLink(r,e.props.showSponsoredGenres?!1:o===t))}),this.allGenresLink()))},render:function(){return n("div",{},void 0,this.renderSponsoredGenresList(),this.renderFavoritesList())}})},{"../../react_stores/user_agent_capabilities_store":280,"../dropdown":112,"../gr_component_factory":129,"./../tab":212,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],141:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("../gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"GenreList",renderMoreGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},void 0,n("a",{href:"/genres",className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,"More Genres"))},render:function(){for(var e=this,t=10,r=[],o=this.props.genres.slice(0);r.length*t<this.props.genres.length;)r.push(o.splice(0,t));var s=r.length;return n("div",{className:"genreListContainer"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,"Genres"),a["default"].map(r,function(t,r){return n("ul",{className:"genreList"},"genreList"+r,a["default"].map(t,function(e){return n("li",{role:"menuitem",className:"genreList__genre"},e.name,n("a",{href:e.url,className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,e.name))}),s===r+1?e.renderMoreGenresLink():null)}))}})},{"../gr_component_factory":129,lodash:"lodash"}],142:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("../shared/cookies"),i=o(a),l=e("react"),u=o(l),d=e("../gr_component_factory"),c=o(d),p=e("classnames"),f=o(p),m=e("redux"),h=e("react-redux"),_=e("redux-logger"),g=o(_),v=e("../favorite_genres_form"),y=o(v),b=e("../modal"),S=o(b),k=e("../modal_trigger"),T=o(k),P=e("./personal_nav"),w=o(P),N=e("./personal_nav_drawer"),R=o(N),M=e("./primary_nav_menus"),C=o(M),A=e("./profile_menu_jewel"),x=o(A),I=e("./home_icon"),L=o(I),U=e("./header_logo"),E=o(U),O=e("../search/search_toggle"),D=o(O),B=e("./nav_search"),F=o(B),j=e("./primary_nav_separate_line"),q=o(j),H=e("../../react_reducers/header/header_reducer"),G=o(H),$=e("../../modules/env_utils"),z=o($),W=[];z["default"].isDevelopment()&&z["default"].hasDom()&&W.push((0,g["default"])());var K=(0,m.createStore)(G["default"],{},m.applyMiddleware.apply(void 0,W));r["default"]=c["default"].createClass({displayName:"Header",getInitialState:function(){return{scrolling:!1,userLikelyHasAccount:!1}},propTypes:{adId:u["default"].PropTypes.string,autocomleteUrl:u["default"].PropTypes.string,browseUrl:u["default"].PropTypes.string,choiceAwardsUrl:u["default"].PropTypes.string,communityUrl:u["default"].PropTypes.string,editorsPicksUrl:u["default"].PropTypes.string,eventUrl:u["default"].PropTypes.string,discussionsUrl:u["default"].PropTypes.string,favoriteGenres:u["default"].PropTypes.array,sponsoredGenres:u["default"].PropTypes.array,friendIconUrl:u["default"].PropTypes.string,genres:u["default"].PropTypes.array.isRequired,genresIndexUrl:u["default"].PropTypes.string,giveawayUrl:u["default"].PropTypes.string,groupsUrl:u["default"].PropTypes.string,featuredAskAuthorUrl:u["default"].PropTypes.string,helpUrl:u["default"].PropTypes.string,homeUrl:u["default"].PropTypes.string,listUrl:u["default"].PropTypes.string,messageIconUrl:u["default"].PropTypes.string,myBooksUrl:u["default"].PropTypes.string,myFriendsUrl:u["default"].PropTypes.string,myGroupsUrl:u["default"].PropTypes.string,myQuotesUrl:u["default"].PropTypes.string,myReadingChallengeUrl:u["default"].PropTypes.string,myRecsUrl:u["default"].PropTypes.string,name:u["default"].PropTypes.string,newReleasesUrl:u["default"].PropTypes.string,notificationIconUrl:u["default"].PropTypes.string,peopleUrl:u["default"].PropTypes.string,preferences:u["default"].PropTypes.object,profileImage:u["default"].PropTypes.string,profileUrl:u["default"].PropTypes.string,quizzesUrl:u["default"].PropTypes.string,quotesUrl:u["default"].PropTypes.string,recommendationsUrl:u["default"].PropTypes.string,signedIn:u["default"].PropTypes.bool,searchPath:u["default"].PropTypes.string,signInUrl:u["default"].PropTypes.string,signInWithReturnUrl:u["default"].PropTypes.bool,signUpUrl:u["default"].PropTypes.string,storiesUrl:u["default"].PropTypes.string,tempFriendRequestCount:u["default"].PropTypes.number,tempUnreadMessageCount:u["default"].PropTypes.number,topFullImage:u["default"].PropTypes.shape({topFullImageUrl:u["default"].PropTypes.string.isRequired,xs:u["default"].PropTypes.object,md:u["default"].PropTypes.object}),triviaUrl:u["default"].PropTypes.string,logoUrl:u["default"].PropTypes.string},componentDidMount:function(){(i["default"].get("p")||i["default"].get("u"))&&this.setState({userLikelyHasAccount:!0})},handleScrollBegin:function(){this.setState({scrolling:!0})},handleScrollEnd:function(){this.setState({scrolling:!1})},render:function(){return s(h.Provider,{store:K},void 0,s("header",{},void 0,this.renderTopFullImage(),s("div",{className:"siteHeader__topLine gr-box gr-box--withShadow"},void 0,s("div",{className:"siteHeader__contents"},void 0,s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--searchIcon"},void 0,s(D["default"],{toggleType:O.SEARCH_TOGGLE_TYPES.ICON})),this.renderHomeIcon(),u["default"].createElement(E["default"],this.props),s("nav",{className:"siteHeader__primaryNavInline"},void 0,u["default"].createElement(C["default"],this.props)),u["default"].createElement(F["default"],this.props),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderProfileDrawerTrigger(),this.renderModals(),this.renderPersonalNavDrawer())),u["default"].createElement(q["default"],this.props)))},renderHomeIcon:function(){return this.isFeatureEnabled("logo_doodle")?u["default"].createElement(L["default"],this.props):void 0},renderPersonalNav:function(){return s("div",{className:"siteHeader__personal"},void 0,u["default"].createElement(w["default"],this.props))},renderPersonalNavDrawer:function(){return u["default"].createElement(R["default"],this.props)},renderProfileDrawerTrigger:function(){if(this.props.signedIn){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl};return s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--profileIcon"},void 0,s("span",{className:"headerPersonalNav"},void 0,s(T["default"],{id:N.personalNavDrawerModalId},void 0,u["default"].createElement(x["default"],n({},this.props,{user:e})))))}var t=(0,f["default"])("gr-button","gr-button--dark");return this.state.userLikelyHasAccount?s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signUp"},void 0,s("a",{href:this.getSignInUrl(),className:t,rel:"nofollow"},void 0,"Sign in")):s("div",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signUp"},void 0,s("a",{href:this.props.signUpUrl,className:t,rel:"nofollow"},void 0,"Sign up"))},getSignInUrl:function(){var e=z["default"].getCurrentPath();return this.props.signInWithReturnUrl?this.props.signInUrl+"?returnurl="+e:this.props.signInUrl},renderLoginLinks:function(){return s("ul",{className:"siteHeader__personal"},void 0,s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,s("a",{href:this.getSignInUrl(),rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Sign In")),s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,s("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Join")))},renderModals:function(){return this.props.signedIn?s(S["default"],{id:"favGenres"},void 0,s(y["default"],{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null},renderTopFullImage:function(){return this.isFeatureEnabled("site_header_top_full_image")?s("div",{className:"siteHeader__topFullImageContainer"},void 0,s("a",{className:"siteHeader__topFullImageLink",href:this.props.topFullImage.topFullImageUrl},void 0,s("picture",{},void 0,s("source",{media:"(min-width: 768px)",srcSet:this.props.topFullImage.md["1x"]+" 1x, "+this.props.topFullImage.md["2x"]+" 2x"}),s("img",{alt:this.props.topFullImage.topFullImageAlt,className:"siteHeader__topFullImage",src:this.props.topFullImage.xs["1x"],srcSet:this.props.topFullImage.xs["2x"]+" 2x"})))):null}})},{"../../modules/env_utils":21,"../../react_reducers/header/header_reducer":258,"../favorite_genres_form":119,"../gr_component_factory":129,"../modal":167,"../modal_trigger":168,"../search/search_toggle":190,"../shared/cookies":195,"./header_logo":143,"./home_icon":145,"./nav_search":146,"./personal_nav":149,"./personal_nav_drawer":150,"./primary_nav_menus":152,"./primary_nav_separate_line":153,"./profile_menu_jewel":155,classnames:"classnames",react:"react","react-redux":"react-redux",redux:"redux","redux-logger":"redux-logger"}],143:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"HeaderLogo",render:function(){return n("a",{href:this.props.logoActionUrl,className:this.isFeatureEnabled("logo_doodle")?"siteHeader__logo siteHeader__logo--doodle":"siteHeader__logo","aria-label":this.props.logoAltText,title:this.props.logoAltText})}})},{"../gr_component_factory":129}],144:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("../gr_component_factory"),i=o(a),l=e("reflux"),u=o(l),d=e("./header"),c=o(d),p=e("../../react_stores/current_user_store"),f=o(p),m=e("../../react_stores/favorite_genres_store"),h=o(m);r["default"]=i["default"].createClass({displayName:"HeaderStoreConnector",mixins:[u["default"].connect(f["default"],"currentUser"),u["default"].connect(h["default"],"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!s["default"].isNull(e),r={adId:this.state.favoriteGenres.adId,signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres,sponsoredGenres:this.state.favoriteGenres.sponsoredGenres};return t&&s["default"].merge(r,e),s["default"].merge(r,this.props),React.createElement(c["default"],r)}})},{"../../react_stores/current_user_store":262,"../../react_stores/favorite_genres_store":265,"../gr_component_factory":129,"./header":142,lodash:"lodash",reflux:"reflux"}],145:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"HomeIcon",render:function(){return n("div",{className:"siteHeader__homeIconContainer"},void 0,n("a",{href:this.props.defaultLogoActionUrl,className:"siteHeader__homeIcon","aria-label":this.props.defaultLogoAltText,title:this.props.defaultLogoAltText}))}})},{"../gr_component_factory":129}],146:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../analytics/url_tracking_params"),d=e("../../modules/env_utils"),c=o(d),p=e("../search/book_search"),f=o(p),m=e("../experimental/search/universal/universal_search"),h=o(m);r["default"]=l["default"].createClass({displayName:"NavSearch",propTypes:{autocompleteUrl:a["default"].PropTypes.string,autoFocus:a["default"].PropTypes.bool,searchPath:a["default"].PropTypes.string,bemModifiers:a["default"].PropTypes.string},getDefaultProps:function(){return{autoFocus:!1,bemModifiers:"navbar"}},onSearchSelection:function(e){var t=null;t=this.isFeatureEnabled("universal_search")?e.destination+"?"+u.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+u.URLTrackingParams.FROM_SEARCH_PARAM:e.bookUrl+"?"+u.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+u.URLTrackingParams.FROM_SEARCH_PARAM,c["default"].setLocationUrl(t)},render:function(){return this.isFeatureEnabled("universal_search")?n(h["default"],{bemModifiers:this.props.bemModifiers,searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection}):n(f["default"],{autoFocus:this.props.autoFocus,bemModifiers:this.props.bemModifiers,searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection})}})},{"../../analytics/url_tracking_params":2,"../../modules/env_utils":21,"../experimental/search/universal/universal_search":117,"../gr_component_factory":129,"../search/book_search":186,react:"react"}],147:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=e("../../modules/shared/image_registry"),u=e("../../modules/to_sentence"),d=o(u),c=e("../user/user_icon"),p=o(c),f=e("../time/relative_time"),m=o(f),h=e("../shape_icon"),_=o(h);r["default"]=a["default"].createClass({displayName:"Notification",mixins:[d["default"]],propTypes:{notification:React.PropTypes.object.isRequired},userLink:function(e){return n("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,n("b",{},void 0,e.viewableName))},userLinks:function g(e){var t=this,g=(0,i.map)(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(g):this.toSentence(g)},renderActorIcon:function(e){return e.actor?n(p["default"],{user:e.actor}):n(_["default"],{imageUrl:(0,l.getImages)().notificationFromGRIcon||"",imageAlt:"Goodreads Notification"})},renderNewNotificationFlag:function(e){return e.viewed?void 0:n("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},renderHistoryMessage:function(e){return e.historyMessage?n("small",{className:"gr-notification__historyMessage"},void 0,e.historyMessage):void 0},render:function(){var e=this.props.notification;return e.error?null:n("div",{className:"gr-mediaBox gr-notification"},void 0,n("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,this.renderActorIcon(e)),n("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),!e.actor||e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?n("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,n("div",{},void 0,this.renderNewNotificationFlag(e),n("small",{},void 0,n(m["default"],{time:e.createdAt,longFormat:!0}))),n("div",{},void 0,this.renderHistoryMessage(e))))}})},{"../../modules/shared/image_registry":28,"../../modules/to_sentence":30,"../gr_component_factory":129,"../shape_icon":191,"../time/relative_time":214,"../user/user_icon":220,lodash:"lodash"}],148:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("reflux"),p=o(c),f=e("../spinner"),m=o(f),h=e("../dropdown"),_=o(h),g=e("../../react_stores/notifications_store"),v=o(g),y=e("../../react_actions/notifications_actions"),b=o(y),S=e("./notification"),k=o(S);r["default"]=d["default"].createClass({displayName:"Notifications",mixins:[p["default"].connect(v["default"],"notificationsStore")],propTypes:{notificationIconUrl:a["default"].PropTypes.string.isRequired,withDropdowns:a["default"].PropTypes.bool},getDefaultProps:function(){return{withDropdowns:!0}},getStoreState:function(){return this.state.notificationsStore},generateKey:function(e){return e.actor?""+e.actor.profileUrl+e.createdAt:e.resource?""+e.resource.url+e.createdAt:""+e.body+e.createdAt},notificationsCountString:function(){var e=this.getStoreState();return e.unreadCount+(e.unreadCountMore?"+":"")},renderNotificationList:function(){var e=this,t=this.getStoreState(),r=t.notifications;return t.errorOccurred?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n("span",{},void 0,"An error occurred loading your notifications")):l["default"].isUndefined(r)?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n(m["default"],{})):l["default"].isEmpty(r)?n("div",{className:"dropdown__container\n                        gr-notifications\n                        gr-notifications--sparse"},void 0,n("span",{},void 0,"No notifications")):n("section",{className:"dropdown__container"},void 0,n("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:"/notifications"},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Notifications"),n("span",{},void 0,"View all notifications"))),n("div",{className:"gr-notifications gr-box gr-box--forceScrollBar"},void 0,l["default"].map(r,function(t){return n(k["default"],{notification:t},e.generateKey(t))})))},render:function(){var e=this.getStoreState(),t=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,e.unreadCount>0?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null);return this.props.withDropdowns?n("div",{},void 0,n(_["default"],{trigger:t,triggerEventType:_["default"].TriggerEventTypes.CLICK,fallbackUrl:this.props.notificationIconUrl,tooltipText:"Notifications",onShowCallback:b["default"].requestNotifications,bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList())):n("a",{href:this.props.notificationIconUrl,className:"headerPersonalNav"},void 0,t)}})},{"../../react_actions/notifications_actions":47,"../../react_stores/notifications_store":271,"../dropdown":112,"../gr_component_factory":129,"../spinner":209,"./notification":147,lodash:"lodash",react:"react",reflux:"reflux"}],149:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),p=e("../dropdown"),f=o(p),m=e("./notifications"),h=o(m),_=e("./profile_menu"),g=o(_),v=e("./profile_menu_jewel"),y=o(v),b=e("./discussions_pane"),S=o(b);r["default"]=c["default"].createClass({displayName:"PersonalNav",propTypes:{author:i["default"].PropTypes.shape({id:i["default"].PropTypes.number,editProfileUrl:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,dashboardUrl:i["default"].PropTypes.string}),commentsUrl:i["default"].PropTypes.string,discussionsUrl:i["default"].PropTypes.string,editFavGenresUrl:i["default"].PropTypes.string,includeProfileMenu:i["default"].PropTypes.bool,groupInvitesCount:i["default"].PropTypes.number,groupsUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,pendingRecsCount:i["default"].PropTypes.number,preferences:i["default"].PropTypes.object,profileEditUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,signOutUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,withDropdowns:i["default"].PropTypes.bool},getDefaultProps:function(){return{includeProfileMenu:!0,withDropdowns:!0}},render:function(){var e=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,this.props.tempUnreadMessageCount>0?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),t=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,this.props.tempFriendRequestCount>0?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null);return s("ul",{className:"personalNav"},void 0,s("li",{className:"personalNav__listItem"},void 0,this.renderNotifications()),this.isFeatureEnabled("nav_bar_discussions_pane")?s("li",{className:"personalNav__listItem"},void 0,this.renderDiscussionsPane()):null,s("li",{className:"personalNav__listItem"},void 0,s("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,e)),s("li",{className:"personalNav__listItem"},void 0,s("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,t)),this.renderProfileMenu())},renderDiscussionsPane:function(){return this.props.withDropdowns===!0?s(S["default"],{groupsUrl:this.props.groupsUrl,discussionsUrl:this.props.discussionsUrl}):s("a",{href:this.props.discussionsUrl,className:"headerPersonalNav"},void 0,s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--discussions","aria-label":"My group discussions"}))},renderNotifications:function(){return s(h["default"],{notificationIconUrl:this.props.notificationIconUrl,preferences:this.props.preferences,withDropdowns:this.props.withDropdowns})},renderProfileName:function(){var e=this.props.name;return e.length>23&&(e=e.substring(0,22)+"…"),s("span",{className:"siteHeader__subNavLink gr-h3 gr-h3--noMargin"},void 0," ",e," ")},renderProfileMenu:function(){if(this.props.includeProfileMenu===!0){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=i["default"].createElement(y["default"],n({},this.props,{user:e,showNotificationsFlag:!1})),r=0===u["default"].size(this.props.author)?this.props.profileUrl:this.props.author.profileUrl;return s("li",{className:"personalNav__listItem"},void 0,s(f["default"],{trigger:t,fallbackUrl:r,bemModifiers:"profileMenu",isInPersonalNav:"true"},void 0,s("div",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,this.renderProfileName(),i["default"].createElement(g["default"],n({},this.props,{profileUrl:r})))))}return null}})},{"../dropdown":112,"../gr_component_factory":129,"./discussions_pane":136,"./notifications":148,"./profile_menu":154,"./profile_menu_jewel":155,lodash:"lodash",react:"react"}],150:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.personalNavDrawerModalId=void 0;var a=e("../modal"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("./personal_nav"),c=o(d),p=e("./profile_menu"),f=o(p),m=e("../user/user_icon"),h=o(m),_=e("../../modules/shape_icon_values"),g=r.personalNavDrawerModalId="personalNavDrawerModal";r["default"]=u["default"].createClass({displayName:"PersonalNavDrawer",render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl};return s(i["default"],{asDrawer:!0,id:g},void 0,s("div",{className:"personalNavDrawer"},void 0,s("div",{className:"personalNavDrawer__personalNavContainer"},void 0,React.createElement(c["default"],n({},this.props,{includeProfileMenu:!1,withDropdowns:!1}))),s("div",{className:"personalNavDrawer__profileAndLinksContainer"},void 0,s("div",{className:"personalNavDrawer__profileContainer gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter"},void 0,s("div",{className:"gr-mediaFlexbox__media"},void 0,s(h["default"],{user:e,size:_.ICON_SIZES.LARGE})),s("div",{className:"gr-mediaFlexbox__desc"},void 0,s("a",{href:this.props.profileUrl,className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.props.name),s("div",{className:"u-displayBlock"},void 0,s("a",{href:this.props.profileUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,"View profile")))),s("div",{className:"personalNavDrawer__profileMenuContainer"},void 0,React.createElement(f["default"],this.props)))))}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../modal":167,"../user/user_icon":220,"./personal_nav":149,"./profile_menu":154}],151:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.PRIMARY_NAV_MENU_TAB_GROUP=void 0;var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("reflux"),d=o(u),c=e("../gr_component_factory"),p=o(c),f=e("classnames"),m=o(f),h=e("react-onclickoutside"),_=o(h),g=e("../../modules/keys"),v=o(g),y=e("../../react_actions/tab_actions"),b=o(y),S=e("../../react_stores/tabs_store"),k=o(S),T=e("../../react_stores/user_agent_capabilities_store"),P=o(T),w=r.PRIMARY_NAV_MENU_TAB_GROUP="siteHeaderPrimaryNav";
r["default"]=p["default"].createClass({displayName:"Dropdown",mixins:[_["default"],d["default"].connect(k["default"],"tabsStore"),d["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{fallbackUrl:a["default"].PropTypes.string,onShowCallback:a["default"].PropTypes.func,tabName:a["default"].PropTypes.string.isRequired,tooltipText:a["default"].PropTypes.string,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired},hide:function(){b["default"].deselectTab(this.props.tabName,w)},isMenuActive:function(){return this.props.tabName===this.state.tabsStore[w]},show:function(){b["default"].selectTab(this.props.tabName,w),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.isMenuActive()?this.hide():this.show()},openList:function(e){v["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),v["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):v["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},triggerClasses:function(){return(0,m["default"])(this.withBemModifiers(["primaryNavMenu__trigger"]),{"primaryNavMenu__trigger--buttonReset":l["default"].isUndefined(this.props.fallbackUrl)},{"primaryNavMenu__trigger--active":this.isMenuActive()})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.isMenuActive(),onClick:this.toggle,onKeyDown:this.openList,title:this.props.tooltipText},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.toggle,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.isMenuActive(),title:this.props.tooltipText},void 0,this.props.trigger)},render:function(){var e=(0,m["default"])(this.withBemModifiers("primaryNavMenu"),"ignore-react-onclickoutside"),t=(0,m["default"])("primaryNavMenu__menu",{"primaryNavMenu__menu--show":this.isMenuActive()},"gr-box gr-box--withShadowLarge"),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),o=n("div",{className:t,role:"menu"},void 0,this.props.children);return n("div",{className:e},void 0,r,o)}})},{"../../modules/keys":24,"../../react_actions/tab_actions":52,"../../react_stores/tabs_store":276,"../../react_stores/user_agent_capabilities_store":280,"../gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],152:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./community_menu"),d=o(u),c=e("./browse_menu"),p=o(c);r["default"]=l["default"].createClass({displayName:"PrimaryNavMenus",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string,choiceAwardsUrl:a["default"].PropTypes.string,communityUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editorsPicksUrl:a["default"].PropTypes.string,eventUrl:a["default"].PropTypes.string,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,featuredAskAuthorUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string,groupsUrl:a["default"].PropTypes.string,homeUrl:a["default"].PropTypes.string,listUrl:a["default"].PropTypes.string,myBooksUrl:a["default"].PropTypes.string,newReleasesUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,quotesUrl:a["default"].PropTypes.string,recommendationsUrl:a["default"].PropTypes.string,signedIn:a["default"].PropTypes.bool,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},render:function(){return n("ul",{role:"menu",className:"siteHeader__menuList"},void 0,n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--home"},void 0,n("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),n("li",{className:"siteHeader__topLevelItem"},void 0,n("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),n("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(p["default"],this.props)),n("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--community"},void 0,a["default"].createElement(d["default"],this.props)))}})},{"../gr_component_factory":129,"./browse_menu":132,"./community_menu":133,react:"react"}],153:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.mapStateToProps=r.component=void 0;var s=e("lodash"),a=o(s),i=e("react"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("./primary_nav_menus"),p=o(c),f=e("react-headroom"),m=o(f),h=e("reflux"),_=o(h),g=e("../search/search_mobile_nav"),v=o(g),y=e("../../react_stores/tabs_store"),b=o(y),S=e("react-redux"),k=e("./primary_nav_menu"),T=r.component=d["default"].createClass({displayName:"PrimaryNavSeparateLine",mixins:[_["default"].connect(b["default"],"tabs")],propTypes:{autocompleteUrl:l["default"].PropTypes.string.isRequired,searchPath:l["default"].PropTypes.string.isRequired,signedIn:l["default"].PropTypes.bool.isRequired,mobviousDeviceType:l["default"].PropTypes.string,searchIsActive:l["default"].PropTypes.bool,adId:l["default"].PropTypes.string,browseUrl:l["default"].PropTypes.string,choiceAwardsUrl:l["default"].PropTypes.string,communityUrl:l["default"].PropTypes.string,discussionsUrl:l["default"].PropTypes.string,editorsPicksUrl:l["default"].PropTypes.string,eventUrl:l["default"].PropTypes.string,favoriteGenres:l["default"].PropTypes.array,sponsoredGenres:l["default"].PropTypes.array,featuredAskAuthorUrl:l["default"].PropTypes.string,genres:l["default"].PropTypes.array.isRequired,giveawayUrl:l["default"].PropTypes.string,groupsUrl:l["default"].PropTypes.string,homeUrl:l["default"].PropTypes.string,listUrl:l["default"].PropTypes.string,myBooksUrl:l["default"].PropTypes.string,newReleasesUrl:l["default"].PropTypes.string,peopleUrl:l["default"].PropTypes.string,quizzesUrl:l["default"].PropTypes.string,quotesUrl:l["default"].PropTypes.string,recommendationsUrl:l["default"].PropTypes.string,storiesUrl:l["default"].PropTypes.string,triviaUrl:l["default"].PropTypes.string},getDefaultProps:function(){return{searchIsActive:!1}},isNavPinned:function(){return this.props.searchIsActive||!a["default"].isEmpty(this.state.tabs[k.PRIMARY_NAV_MENU_TAB_GROUP])},renderDefaultSeparateLine:function(){return n("nav",{className:"siteHeader__primaryNavSeparateLine gr-box gr-box--withShadow"},void 0,l["default"].createElement(p["default"],this.props))},renderSearch:function(){return l["default"].createElement(v["default"],this.props)},render:function(){return n(m["default"],{disable:this.isNavPinned()},void 0,this.props.searchIsActive?this.renderSearch():this.renderDefaultSeparateLine())}}),P=r.mapStateToProps=function(e,t){return Object.assign({},t,e)};r["default"]=(0,S.connect)(P)(T)},{"../../react_stores/tabs_store":276,"../gr_component_factory":129,"../search/search_mobile_nav":189,"./primary_nav_menu":151,"./primary_nav_menus":152,lodash:"lodash",react:"react","react-headroom":"react-headroom","react-redux":"react-redux",reflux:"reflux"}],154:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../menu_link"),p=o(c);r["default"]=d["default"].createClass({displayName:"ProfileMenu",propTypes:{author:a["default"].PropTypes.shape({id:a["default"].PropTypes.number,editProfileUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,dashboardUrl:a["default"].PropTypes.string}),commentsUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editFavGenresUrl:a["default"].PropTypes.string,groupInvitesCount:a["default"].PropTypes.number,helpUrl:a["default"].PropTypes.string,myFriendsUrl:a["default"].PropTypes.string,myGroupsUrl:a["default"].PropTypes.string,myQuotesUrl:a["default"].PropTypes.string,myReadingChallengeUrl:a["default"].PropTypes.string,myRecsUrl:a["default"].PropTypes.string,name:a["default"].PropTypes.string,pendingRecsCount:a["default"].PropTypes.number,profileEditUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,readingNotesUrl:a["default"].PropTypes.string,signOutUrl:a["default"].PropTypes.string},isAuthor:function(){return!l["default"].isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return this.props.groupInvitesCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return this.props.pendingRecsCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?n(p["default"],{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return n("ul",{},void 0,n(p["default"],{},void 0,n("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink"},void 0,"Profile")),this.renderAuthorDashboardLink(),n(p["default"],{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),n(p["default"],{},void 0,n("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink"},void 0,"Groups",this.renderGroupInvites())),n(p["default"],{href:this.props.discussionsUrl,linkText:"Discussions",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.commentsUrl,linkText:"Comments",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.myReadingChallengeUrl,linkText:"Reading Challenge",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.readingNotesUrl,linkText:"Kindle Notes & Highlights",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.myQuotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.editFavGenresUrl,linkText:"Favorite genres",linkClass:"siteHeader__subNavLink"}),n(p["default"],{},void 0,n("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink"},void 0,"Friends’ recommendations",this.renderPendingRecs())),n(p["default"],{href:e,linkText:"Account settings",linkClass:"siteHeader__subNavLink u-topGrayBorder"}),n(p["default"],{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),n(p["default"],{href:this.props.signOutUrl,linkText:"Sign out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../gr_component_factory":129,"../menu_link":166,lodash:"lodash",react:"react"}],155:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../../react_stores/notifications_store"),l=o(i),u=e("react"),d=o(u),c=e("reflux"),p=o(c),f=e("../user/user_icon"),m=o(f);r["default"]=a["default"].createClass({displayName:"ProfileMenuJewel",mixins:[p["default"].connect(l["default"],"notificationsStore")],propTypes:{notificationIconUrl:d["default"].PropTypes.string,showNotificationsFlag:d["default"].PropTypes.bool,tempFriendRequestCount:d["default"].PropTypes.number,tempUnreadMessageCount:d["default"].PropTypes.number,user:d["default"].PropTypes.shape({viewableName:d["default"].PropTypes.string.isRequired,profileImage:d["default"].PropTypes.string.isRequired,profileUrl:d["default"].PropTypes.string}).isRequired},getDefaultProps:function(){return{showNotificationsFlag:!0,tempFriendRequestCount:0,tempUnreadMessageCount:0}},notificationsCountString:function(){var e=this.state.notificationsStore;return e.unreadCount+this.props.tempFriendRequestCount+this.props.tempUnreadMessageCount+(e.unreadCountMore?"+":"")},render:function(){return n("span",{className:"headerPersonalNav__icon"},void 0,this.renderNotificationsCountFlag(),n(m["default"],{user:this.props.user,includeLink:!1}))},renderNotificationsCountFlag:function(){return this.props.showNotificationsFlag===!0&&(this.state.notificationsStore.unreadCount>0||this.props.tempFriendRequestCount>0||this.props.tempUnreadMessageCount>0)?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null}})},{"../../react_stores/notifications_store":271,"../gr_component_factory":129,"../user/user_icon":220,react:"react",reflux:"reflux"}],156:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.JobsListComponent=void 0;var a=e("./gr_component_factory"),i=o(a),l=e("react"),u=e("../modules/env_utils"),d=o(u),c=e("lodash"),p=e("react-router/lib/Router"),f=o(p),m=e("react-router/lib/RouterContext"),h=o(m),_=e("react-router/lib/Route"),g=o(_),v=e("react-router/lib/Link"),y=o(v),b=e("react-router/lib/browserHistory"),S=o(b),k=e("react-router/lib/match"),T=o(k),P="/jobs",w=r.JobsListComponent=i["default"].createClass({displayName:"JobsList",getJobMarkup:function(e){return{__html:e}},renderLocation:function(e){return e.city+", "+e.state+", "+e.country_code},renderJob:function(e){return s("div",{},void 0,s("h2",{},void 0,e.title),s("p",{className:"jobMetadata"},void 0,s("b",{},void 0,e.job_category+" | "+this.renderLocation(e))),s("p",{dangerouslySetInnerHTML:this.getJobMarkup(e.description)}),s("div",{className:"jobsHeader "},void 0,"Basic Qualifications:"),s("div",{className:"jobBasicQualifications",dangerouslySetInnerHTML:this.getJobMarkup(e.basic_qualifications)}),s("div",{className:"jobsHeader"},void 0,"Preferred Qualifications:"),s("div",{className:"jobPreferredQualifications",dangerouslySetInnerHTML:this.getJobMarkup(e.preferred_qualifications)}),this.renderFooter(e.id_icims))},renderFooter:function(e){return s("div",{},void 0,s("div",{id:"jobsFooter"},void 0,s("div",{id:"legalNotice"},void 0,"Qualified applicants with criminal histories will be considered in a manner consistent with all applicable local, state and federal laws, including the San Francisco Fair Chance Ordinance.")),s("a",{className:"gr-button",href:"https://us-amazon.icims.com/jobs/"+e+"/job?mode=apply"},void 0,"Apply now"),s(y["default"],{to:P},void 0,s("button",{className:"gr-buttonAsLink allJobsButton"},void 0,"Back to all jobs")))},renderJobLink:function(e){var t=this.props.route.jobs[e];return t?s("li",{id:e},e,s("div",{className:"right"},void 0,this.renderLocation(t)),s("div",{className:"left"},void 0,s(y["default"],{to:P+"?id="+e},void 0,s("button",{className:"gr-buttonAsLink jobLink"},void 0,t.title))),s("div",{className:"clearFix"})):null},render:function(){var e=this,t=this.props.route.jobs[this.props.location.query.id];return t?this.renderJob(t):s("div",{},void 0,s("h2",{},void 0,"Our Jobs"),(0,c.map)(this.props.route.categories,function(t,r){return s("div",{},r,s("div",{className:"jobsHeader"},void 0,r),s("div",{className:"aboutDividerDark indentedBox"}),s("ul",{},void 0,(0,c.map)(t,function(t){return e.renderJobLink(t)})))}),s("section",{className:"big_margin"},void 0,s("b",{},void 0,"To all recruitment agencies: "),"Goodreads does not accept agency resumes. Please do not forward resumes to Goodreads employees or any other company location. Goodreads is not responsible for any fees related to unsolicited resumes.",s("div",{className:"big_margin"},void 0,s("a",{href:"https://en-amazon.icims.com/jobs/dashboard"},void 0,"Check on an application you've submitted"))))}}),N=function(e){var t=React.createElement(g["default"],n({path:P+"(?id=*)",component:w},e));if(d["default"].domUnavailable()){var r=void 0,o=P;return e.selectedId&&(o+="?id="+e.selectedId),(0,T["default"])({routes:t,location:o},function(e,t,o){r=o}),React.createElement(h["default"],r)}return s(f["default"],{history:S["default"]},void 0,t)};N.propTypes={selectedId:l.PropTypes.string,categories:l.PropTypes.object.isRequired,jobs:l.PropTypes.object.isRequired},r["default"]=N},{"../modules/env_utils":21,"./gr_component_factory":129,lodash:"lodash",react:"react","react-router/lib/Link":290,"react-router/lib/Route":294,"react-router/lib/Router":296,"react-router/lib/RouterContext":297,"react-router/lib/browserHistory":300,"react-router/lib/match":308}],157:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_mixins/gr_reflux"),d=e("../../react_actions/like_actions"),c=o(d),p=e("../../react_stores/like_store"),f=o(p),m=e("../spinner"),h=o(m),_=e("classnames"),g=o(_);r["default"]=l["default"].createClass({displayName:"LikeButton",mixins:[(0,u.connectToLazyStore)(f["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,showAsLink:a["default"].PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?c["default"].unLike(this.props.resourceKey):c["default"].like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,g["default"])({"gr-buttonAsLink":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return n("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?n(h["default"],{}):a["default"].createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":44,"../../react_mixins/gr_reflux":255,"../../react_stores/like_store":269,"../gr_component_factory":129,"../spinner":209,classnames:"classnames",react:"react"}],158:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/like_store"),d=o(u),c=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"LikeCount",mixins:[(0,c.connectToLazyStore)(d["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return this.state.likeCount>0?n("span",{},void 0,n("a",{className:"gr-hyperlink--quiet",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," · "):null}})},{"../../react_mixins/gr_reflux":255,"../../react_stores/like_store":269,"../gr_component_factory":129,react:"react"}],159:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("reflux"),p=o(c),f=e("../../react_stores/like_store"),m=o(f);r["default"]=d["default"].createClass({displayName:"LikeInformation",mixins:[p["default"].connectFilter(m["default"],"likeStore",function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getNameLink:function(){var e=this.state.likeStore.likedBy,t=l["default"].isUndefined(e.friends)?e.others[0]:e.friends[0];return n("a",{href:t.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,t.name)},getPluralPerson:function(e){return e>1?"people":"person"},getYouLikeMessage:function(){return n("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return n("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink())},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-2;return n("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getSomeoneLikeMessage:function(){return n("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-1;return n("span",{},void 0,this.getNameLink()," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getLikeMessage:function(){var e=this.state.likeStore;if(e.isLiked)switch(e.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}else switch(e.likeCount){case 1:return this.getSomeoneLikeMessage();default:return this.getManyPeopleLikeMessage()}},render:function(){var e=this.state.likeStore;return!e.isLiked&&l["default"].isEmpty(e.likedBy)?null:n("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":269,"../gr_component_factory":129,lodash:"lodash",react:"react",reflux:"reflux"}],160:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./like_count"),d=o(u),c=e("./like_button"),p=o(c);r["default"]=l["default"].createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired,showAsLink:a["default"].PropTypes.bool},render:function(){return n("span",{},void 0,n(d["default"],{resourceKey:this.props.resourceKey}),this.props.isLikeable?n(p["default"],{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":129,"./like_button":157,"./like_count":158,react:"react"}],161:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=o(i);r["default"]=a["default"].createClass({displayName:"AmazonLoginButton",propTypes:{enabled:l["default"].PropTypes.bool,amazonSignInUrl:l["default"].PropTypes.string.isRequired,fullWidth:l["default"].PropTypes.bool},getDefaultProps:function(){return{enabled:!1,fullWidth:!1}},handleButtonPress:function(){window.open(this.props.amazonSignInUrl,"","width=900,height=540")},render:function(){if(this.props.enabled){var e=n("button",{className:"gr-button gr-button--amazon "+(this.props.fullWidth?"gr-button--fullWidth":""),onClick:this.handleButtonPress},void 0,n("div",{className:"gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter gr-mediaFlexbox--justifyHorizontalContentCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media gr-button--amazon__icon"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,"Continue with Amazon")));return e}return null}})},{"../gr_component_factory":129,react:"react"}],162:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=o(i);r["default"]=a["default"].createClass({displayName:"FacebookLoginButton",propTypes:{enabled:l["default"].PropTypes.bool,redirectUrl:l["default"].PropTypes.string.isRequired,fullWidth:l["default"].PropTypes.bool},getDefaultProps:function(){return{enabled:!1,fullWidth:!1}},render:function(){if(this.props.enabled&&"undefined"!=typeof $grfb){var e=n("a",{className:"fbjsLogin",href:this.props.redirectUrl},void 0,n("button",{className:"gr-button gr-button--facebook "+(this.props.fullWidth?"gr-button--fullWidth":"")},void 0,n("div",{className:"gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter gr-mediaFlexbox--justifyHorizontalContentCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media gr-button--facebook__icon"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,"Continue with Facebook"))));return e}return null}})},{"../gr_component_factory":129,react:"react"}],163:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../login/amazon_login_button"),a=o(s),i=e("../../login/facebook_login_button"),l=o(i),u=e("../../gr_component_factory"),d=o(u),c=e("../../modal"),p=o(c),f=e("../../login/register_button"),m=o(f),h=e("../../login/service_terms_and_privacy"),_=o(h),g=e("../../../modules/ajax/ajax_helper");r["default"]=d["default"].createClass({displayName:"LoginInterstitial",propTypes:{allowAmazonSignIn:React.PropTypes.bool,allowFacebookSignIn:React.PropTypes.bool,path:React.PropTypes.shape({amazonSignInUrl:React.PropTypes.string.isRequired,facebookSignInRedirectUrl:React.PropTypes.string.isRequired,signInUrl:React.PropTypes.string.isRequired,signUpUrl:React.PropTypes.string.isRequired,termsUrl:React.PropTypes.string.isRequired,privacyUrl:React.PropTypes.string.isRequired}).isRequired},getDefaultProps:function(){return{allowAmazonSignIn:!1,allowFacebookSignIn:!1}},onCloseHandler:function(){(0,g.httpPost)("/track/track_click",{data:{feature:"LoginInterstitial:dismiss"}})},renderContent:function(){var e=n("div",{className:"loginModal"},void 0,n("div",{className:"loginModal__icon",alt:"Goodreads"}),n("div",{className:"loginModal__header u-topGrayBorder"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Discover & Read More")),n("div",{className:"loginModal__body"},void 0,n("span",{className:"u-defaultType"},void 0,"Log in to get better recommendations with a free account"),n("div",{className:"loginModal__form"},void 0,n("div",{className:"loginModal__button"},void 0,n(l["default"],{enabled:this.props.allowFacebookSignIn,redirectUrl:this.props.path.facebookSignInRedirectUrl,fullWidth:!0})),n("div",{className:"loginModal__button"},void 0,n(a["default"],{enabled:this.props.allowAmazonSignIn,amazonSignInUrl:this.props.path.amazonSignInUrl,
fullWidth:!0})),n("div",{className:"loginModal__button"},void 0,n(m["default"],{fullWidth:!0,signUpUrl:this.props.path.signUpUrl})),n("span",{className:"u-defaultType"},void 0,"Already a member?  ",n("a",{href:this.props.path.signInUrl,rel:"nofollow"},void 0,"Sign In"))),n(_["default"],{termsUrl:this.props.path.termsUrl,privacyUrl:this.props.path.privacyUrl})));return e},render:function(){var e=n(p["default"],{id:"LoginInterstitial",bemModifiers:"login",centered:!0,onCloseHandler:this.onCloseHandler,showByDefault:!0},void 0,this.renderContent());return e}})},{"../../../modules/ajax/ajax_helper":5,"../../gr_component_factory":129,"../../login/amazon_login_button":161,"../../login/facebook_login_button":162,"../../login/register_button":164,"../../login/service_terms_and_privacy":165,"../../modal":167}],164:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=o(i);r["default"]=a["default"].createClass({displayName:"RegisterButton",propTypes:{fullWidth:l["default"].PropTypes.bool,signUpUrl:l["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{fullWidth:!1}},render:function(){var e=n("a",{className:"gr-button "+(this.props.fullWidth?"gr-button--fullWidth":""),href:this.props.signUpUrl},void 0,"Sign up with email");return e}})},{"../gr_component_factory":129,react:"react"}],165:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=o(i);r["default"]=a["default"].createClass({displayName:"ServiceTermsAndPrivacy",propTypes:{privacyUrl:l["default"].PropTypes.string.isRequired,termsUrl:l["default"].PropTypes.string.isRequired},render:function(){var e=n("small",{},void 0,"By clicking “Sign up” I agree to the Goodreads ",n("a",{href:this.props.termsUrl,rel:"nofollow",target:"_blank"},void 0,"Terms of Service")," and confirm that I am at least 13 years old.  Read our ",n("a",{href:this.props.privacyUrl,rel:"nofollow",target:"_blank"},void 0,"Privacy Policy"));return e}})},{"../gr_component_factory":129,react:"react"}],166:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"MenuLink",propTypes:{href:a["default"].PropTypes.string,linkText:a["default"].PropTypes.any,linkClass:a["default"].PropTypes.string,method:a["default"].PropTypes.oneOf(["POST","PUT","DELETE"])},render:function(){return n("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?n("span",{},void 0,this.props.children):n("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method},void 0,this.props.linkText))}})},{"./gr_component_factory":129,react:"react"}],167:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("classnames"),p=o(c),f=e("../react_stores/modal_store"),m=o(f),h=e("../react_actions/modal_actions"),_=o(h),g=e("./close_button"),v=o(g),y=e("../modules/keys"),b=o(y),S=e("lodash"),k=e("../modules/close_button_values");r["default"]=l["default"].createClass({displayName:"Modal",mixins:[d["default"].connect(m["default"],"modalStore")],propTypes:{asDrawer:a["default"].PropTypes.bool,id:a["default"].PropTypes.string.isRequired,centered:a["default"].PropTypes.bool,showByDefault:a["default"].PropTypes.bool,onCloseHandler:a["default"].PropTypes.func,onConfirmHandler:a["default"].PropTypes.func,lockBodyScroll:a["default"].PropTypes.bool},getCloseButtonVariant:function(){return this.props.asDrawer?k.VARIANTS.DARK_BG:k.VARIANTS.DEFAULT},getDefaultProps:function(){return{asDrawer:!1,centered:!1,showByDefault:!1,lockBodyScroll:!0}},componentDidMount:function(){this.props.showByDefault&&_["default"].openModal(this.props.id)},componentDidUpdate:function(){this.updateBodyScrollability()},updateBodyScrollability:function(){this.props.lockBodyScroll&&this.isActive()?document.body.classList.add("modalOpened"):this.state.modalStore.currentActiveModal||document.body.classList.remove("modalOpened")},hide:function(){_["default"].closeModal(),this.props.onCloseHandler&&(0,S.isFunction)(this.props.onCloseHandler)&&this.props.onCloseHandler()},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){e.target.className.indexOf("modal--overlay")>-1&&this.hide()},hideOnEscape:function(e){b["default"].isDefaultCloserKey(e.keyCode)&&this.hide()},handleConfirm:function(){this.props.onConfirmHandler&&this.props.onConfirmHandler(),this.hide()},renderConfirmButtons:function(){return n("div",{className:"modal__confirmButtonsContainer"},void 0,n("button",{className:"gr-button gr-button--large gr-button--dark u-marginRightMedium","data-testid":"confirm",onClick:this.handleConfirm,type:"button"},void 0,"Confirm"),n("button",{className:"gr-button gr-button--large","data-testid":"cancel",onClick:this.hide,type:"button"},void 0,"Cancel"))},render:function(){var e=(0,p["default"])("modal","modal--overlay",{"modal--show":this.isActive(),"modal--centered":this.isActive()&&this.props.centered,"modal--drawer":this.props.asDrawer});return a["default"].createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},this.renderContents())},renderContents:function(){return this.props.asDrawer?n("div",{},void 0,n("div",{className:"modal__close"},void 0,n(v["default"],{action:this.hide,variant:this.getCloseButtonVariant()})),n("div",{className:this.withBemModifiers("modal__content")},void 0,this.props.children)):n("div",{className:this.withBemModifiers("modal__content")},void 0,n("div",{className:"modal__close"},void 0,n(v["default"],{action:this.hide,variant:this.getCloseButtonVariant()})),this.props.children,this.props.onConfirmHandler&&this.renderConfirmButtons())}})},{"../modules/close_button_values":9,"../modules/keys":24,"../react_actions/modal_actions":45,"../react_stores/modal_store":270,"./close_button":83,"./gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],168:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("../react_actions/modal_actions"),l=o(i),u=e("../react_stores/modal_store"),d=o(u),c=e("react"),p=o(c),f=e("reflux"),m=o(f);r["default"]=a["default"].createClass({displayName:"ModalTrigger",mixins:[m["default"].connect(d["default"],"modalStore")],propTypes:{id:p["default"].PropTypes.string.isRequired,clickHandler:p["default"].PropTypes.func},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},openModal:function(){this.props.clickHandler&&this.props.clickHandler(),l["default"].openModal(this.props.id)},render:function(){return n("a",{className:this.withBemModifiers("modalTrigger"),onClick:this.openModal,role:"button","aria-expanded":this.isActive(),"aria-haspopup":!0},void 0,this.props.children)}})},{"../react_actions/modal_actions":45,"../react_stores/modal_store":270,"./gr_component_factory":129,react:"react",reflux:"reflux"}],169:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../gr_component_factory"),l=o(i),u=e("../../dot_separated_elements"),d=o(u),c=e("reflux"),p=o(c),f=e("../../../react_stores/user_agent_capabilities_store"),m=o(f),h=e("lodash"),_=e("../../preview_book/preview_book"),g=o(_),v=e("../../click_tracking_wrapper"),y=o(v),b=e("../../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"NewsfeedItemFooterActions",mixins:[p["default"].connect(m["default"],"userAgentCapabilities")],propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.element),isSponsored:a["default"].PropTypes.bool,sponsoredBy:a["default"].PropTypes.string,sponsoredUrl:a["default"].PropTypes.string,footerClasses:a["default"].PropTypes.string},filteredElements:function(){var e=this;return(0,h.select)(this.props.elements,function(t){return t.type==g["default"]?(0,_.shouldDisplayPreviewBookButton)(t.props.book,e.state.userAgentCapabilities):!0})},renderSponsoredFooter:function(){var e=this.props.sponsoredBy?"Sponsored by ":"Sponsored",t=this.filteredElements(),r=t.length>0?n("span",{className:"gr-newsfeedItem__dotSeparatedElements"},void 0,n(d["default"],{elements:t})):null,o=n("div",{className:this.props.footerClasses},void 0,r,n("span",{className:"googleNativeAd__sponsoredBadgeIcon"}),n("span",{className:"googleNativeAd__sponsoredLabel"},void 0,e),n("a",{target:"_blank",href:this.props.sponsoredUrl,className:"gr-hyperlink"},void 0,this.props.sponsoredBy));return n(y["default"],{trackingOptions:b.TRACKED_CLASSES.sponsored_footer_actions,children:o})},renderFooter:function(){return n("div",{className:"gr-newsfeedItem__footerActions"},void 0,n(d["default"],{elements:this.filteredElements()}))},render:function(){return this.props.isSponsored?this.renderSponsoredFooter():this.renderFooter()}})},{"../../../modules/ads/click_tracking_helper":3,"../../../react_stores/user_agent_capabilities_store":280,"../../click_tracking_wrapper":82,"../../dot_separated_elements":110,"../../gr_component_factory":129,"../../preview_book/preview_book":173,lodash:"lodash",react:"react",reflux:"reflux"}],170:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("react"),l=o(i);r["default"]=a["default"].createClass({displayName:"PageSkin",propTypes:{imageUrl:l["default"].PropTypes.string,backgroundColor:l["default"].PropTypes.string},render:function(){var e={};return this.props.imageUrl&&(e.backgroundImage="url("+this.props.imageUrl+")",e.backgroundRepeat="no-repeat",e.backgroundPosition="center top"),this.props.backgroundColor&&(e.backgroundColor=this.props.backgroundColor),n("div",{className:"pageskin",style:e})}})},{"./gr_component_factory":129,react:"react"}],171:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u),c=e("./gr_component_factory"),p=o(c),f=e("./pagination_single_page_link"),m=o(f),h=e("./shared/gr_prop_types"),_=o(h);r["default"]=p["default"].createClass({displayName:"PaginationLinks",propTypes:{asButtons:a["default"].PropTypes.bool,totalSize:_["default"].naturalNumber.isRequired,currentPageNumber:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string,perPage:_["default"].naturalNumber.isRequired,changePageAction:a["default"].PropTypes.func.isRequired},getDefaultProps:function(){return{asButtons:!1}},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderLinkToPage:function(e){return n(m["default"],{pageNumber:e,currentPageNumber:this.props.currentPageNumber,changePageAction:this.props.changePageAction},e)},renderPageLinks:function(){var e=this,t=this.maxPageNumber();return 1!==t?6>=t?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,l["default"].times(t,function(t){return e.renderLinkToPage(t+1)})):this.props.currentPageNumber<=3?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,l["default"].times(4,function(t){return e.renderLinkToPage(t+1)}),"…",this.renderLinkToPage(this.maxPageNumber())):this.props.currentPageNumber>=this.maxPageNumber()-3?n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,this.renderLinkToPage(1),"…",this.renderLinkToPage(this.maxPageNumber()-3),this.renderLinkToPage(this.maxPageNumber()-2),this.renderLinkToPage(this.maxPageNumber()-1),this.renderLinkToPage(this.maxPageNumber())):n("span",{className:"gr-paginationLinks__pageLinksWrapper"},void 0,this.renderLinkToPage(1),"…",this.renderLinkToPage(this.props.currentPageNumber),this.renderLinkToPage(this.props.currentPageNumber+1),this.renderLinkToPage(this.props.currentPageNumber+2),"…",this.renderLinkToPage(this.maxPageNumber())):void 0},renderPrevLink:function(){if(1===this.maxPageNumber())return null;var e=(0,d["default"])({"gr-paginationLinks__previousLink":!this.props.asButtons,"gr-paginationLinks__previousButton":this.props.asButtons,"gr-button":this.props.asButtons,"gr-button--large":this.props.asButtons});return n("button",{"aria-label":"Previous page",className:e,onClick:this.moveToPrevPage,disabled:1===this.props.currentPageNumber},void 0,"← Previous")},renderNextLink:function(){if(1===this.maxPageNumber())return null;var e=(0,d["default"])({"gr-paginationLinks__nextLink":!this.props.asButtons,"gr-paginationLinks__nextButton":this.props.asButtons,"gr-button":this.props.asButtons,"gr-button--large":this.props.asButtons});return n("button",{"aria-label":"Next page",className:e,onClick:this.moveToNextPage,disabled:this.props.currentPageNumber===this.maxPageNumber()},void 0,"Next →")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){var e=(0,d["default"])("gr-paginationLinks",{"gr-paginationLinks--asButtons":this.props.asButtons},this.props.className);return n("div",{className:e},void 0,n("span",{className:"gr-paginationLinks__previousLinkWrapper"},void 0,this.renderPrevLink()),this.renderPageLinks(),n("span",{className:"gr-paginationLinks__nextLinkWrapper"},void 0,this.renderNextLink()))}})},{"./gr_component_factory":129,"./pagination_single_page_link":172,"./shared/gr_prop_types":196,classnames:"classnames",lodash:"lodash",react:"react"}],172:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:a["default"].PropTypes.number,currentPageNumber:a["default"].PropTypes.number,changePageAction:a["default"].PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?n("span",{"aria-label":this.props.pageNumber+" current page",className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):n("button",{className:"gr-paginationLinks__pageNumLink",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":129,react:"react"}],173:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.shouldDisplayPreviewBookButton=void 0;var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal"),p=o(c),f=e("../modal_trigger"),m=o(f),h=e("../../react_stores/modal_store"),_=o(h),g=e("../../react_actions/newsfeed_actions"),v=o(g),y=e("./report_wrong_book_button"),b=o(y),S=e("./report_wrong_book_form"),k=o(S),T=e("./wrong_book_report_acknowledgment"),P=o(T),w=e("../../react_stores/user_agent_capabilities_store"),N=o(w),R=e("../../modules/ads/click_tracking_helper"),M=r.shouldDisplayPreviewBookButton=function(e,t){return t&&t.touch===!0?!1:!!e.kcrPreviewUrl};r["default"]=l["default"].createClass({displayName:"PreviewBook",mixins:[a["default"].connect(_["default"],"modalStore"),a["default"].connect(N["default"],"userAgentCapabilities")],propTypes:{book:d["default"].book().isRequired},getDefaultProps:function(){return{trackingOptions:R.TRACKED_CLASSES.preview_book}},getInitialState:function(){return{previewViewed:!1,uniqueId:Math.random(1e6)}},getReportWrongBookModalId:function(){return"report-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},getPreviewModalId:function(){return this.props.book.kcrPreviewUrl+this.state.uniqueId},getAcknowledgmentModalId:function(){return"acknowledge-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},openBookPreview:function(){v["default"].previewBook(),this.setState({previewViewed:!0})},render:function(){var e=null,t=null,r=null,o=this.getPreviewModalId(),s=this.getReportWrongBookModalId(),a=this.getAcknowledgmentModalId();return this.state.modalStore.currentActiveModal===o&&(e=n("div",{className:"previewBook__container"},void 0,n("div",{className:"previewBook__topBanner"},void 0,n("div",{className:"previewBook__headerText"},void 0,"Preview - ",n("cite",{},void 0,this.props.book.title)),n(b["default"],{book:this.props.book,modalId:s})),n("iframe",{className:"previewBook__kcrPreview",src:this.props.book.kcrPreviewUrl}))),this.state.previewViewed&&(t=n(k["default"],{book:this.props.book,modalId:s,acknowledgmentModalId:a}),r=n(P["default"],{modalId:a})),M(this.props.book,this.state.userAgentCapabilities)?n("span",{className:"previewBook"},void 0,n(m["default"],{id:o},void 0,n("button",{"aria-label":"Preview "+this.props.book.title,className:"gr-buttonAsLink\n                             previewBook__openPreview",onClick:this.openBookPreview},void 0,"Preview Book")),t,r,n(p["default"],{id:o,bemModifiers:"preview"},void 0,e)):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/newsfeed_actions":46,"../../react_stores/modal_store":270,"../../react_stores/user_agent_capabilities_store":280,"../gr_component_factory":129,"../modal":167,"../modal_trigger":168,"../shared/gr_prop_types":196,"./report_wrong_book_button":174,"./report_wrong_book_form":175,"./wrong_book_report_acknowledgment":176,reflux:"reflux"}],174:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal_trigger"),p=o(c);r["default"]=l["default"].createClass({displayName:"ReportWrongBookButton",propTypes:{book:d["default"].book().isRequired,modalId:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__reportWrongBookButtonContainer"},void 0,n(p["default"],{id:this.props.modalId},void 0,n("button",{"aria-label":"This is not the right book.",className:"gr-buttonAsLink\n                               previewBook__reportWrongBookButton"},void 0,"Not the book you’re looking for?")))}})},{"../gr_component_factory":129,"../modal_trigger":168,"../shared/gr_prop_types":196,react:"react"}],175:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal"),p=o(c),f=e("../../react_actions/modal_actions"),m=o(f),h=e("lodash"),_=o(h),g={wrongBook:"It’s the wrong book",wrongEdition:"It’s the wrong edition",other:"Other"};r["default"]=l["default"].createClass({displayName:"ReportWrongBookForm",propTypes:{book:d["default"].book().isRequired,modalId:a["default"].PropTypes.string.isRequired,acknowledgmentModalId:a["default"].PropTypes.string.isRequired},getAuthorString:function(){return"by "+this.props.book.authorName},showReportAcknowledgement:function(){m["default"].openModal(this.props.acknowledgmentModalId)},closeModal:function(e){e.preventDefault(),m["default"].closeModal()},renderWrongBookForm:function(){var e=[];return _["default"].forEach(g,function(t,r){e.push(n("option",{value:r},r,t))}),n("form",{className:"previewBook__reportWrongBookForm",action:"/kindle_book_mapping_flags","data-remote":"true",method:"post"},void 0,"We’d love your help. Let us know what’s wrong with this preview of ",n("cite",{},void 0,this.props.book.title),this.props.book.authorName?this.getAuthorString():"",".",n("br",{}),n("input",{type:"hidden",name:"kindle_book_mapping_flag[book_id]",value:this.props.book.bookId},void 0),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_reason"},void 0,"Problem"),n("select",{name:"kindle_book_mapping_flag[reason]",id:"kindle_book_mapping_flag_reason"},void 0,e)),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_other_reason"},void 0,"Details (if other)"),n("input",{name:"kindle_book_mapping_flag[other_reason]",id:"kindle_book_mapping_flag_other_reason"})),n("button",{className:"gr-button gr-button--modalPrimaryLeft",type:"submit",onClick:this.showReportAcknowledgement},void 0,"Report Problem"),n("button",{className:"gr-buttonAsLink",onClick:this.closeModal,type:"button"},void 0,"Cancel"))},render:function(){return n(p["default"],{id:this.props.modalId},void 0,n("h2",{},void 0,"See a Problem?"),this.renderWrongBookForm())}})},{"../../react_actions/modal_actions":45,"../gr_component_factory":129,"../modal":167,"../shared/gr_prop_types":196,lodash:"lodash",react:"react"}],176:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal"),d=o(u),c=e("../../react_actions/modal_actions"),p=o(c);r["default"]=l["default"].createClass({displayName:"WrongBookReportAcknowledgment",propTypes:{modalId:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__wrongBookReportAcknowledgment"},void 0,n(d["default"],{id:this.props.modalId},void 0,"Thanks for telling us about the problem.",n("div",{},void 0,n("button",{className:"gr-button",onClick:p["default"].closeModal},void 0,"Close"))))}})},{"../../react_actions/modal_actions":45,"../gr_component_factory":129,"../modal":167,react:"react"}],177:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../shared/gr_prop_types"),a=o(s),i=function(e){return e.noSharedAnnotations?n("div",{},void 0,n("div",{className:"annotatedBookItem__bookInfo__knhCta annotatedBookItem__bookInfo__knhCta--noneVisible"},void 0,e.knhCta)):n("div",{},void 0,n("div",{className:"annotatedBookItem__bookInfo__knhCta"},void 0,e.knhCta))},l=function(e){return n("div",{className:"annotatedBookItem"},void 0,n("a",{className:"annotatedBookItem__knhLink",href:e.annotatedBookData.readingNotesUrl},void 0,n("div",{className:"gr-row"},void 0,n("div",{className:"annotatedBookItem__imageColumn gr-col-12 gr-col-lg-auto"},void 0,n("img",{src:e.annotatedBookData.imageUrl})),n("div",{className:"annotatedBookItem__mainColumn gr-col-12 gr-col-lg-auto"},void 0,n("div",{className:"annotatedBookItem__bookInfo"},void 0,n("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.annotatedBookData.title),n("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.annotatedBookData.authorName),i(e.annotatedBookData))))))};l.propTypes={annotatedBookData:a["default"].readingNotesAnnotatedBookItem().isRequired},r["default"]=l},{"../shared/gr_prop_types":196}],178:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("../shared/gr_prop_types"),u=o(l),d=e("./reading_notes_header"),c=o(d),p=e("./annotated_books_page"),f=o(p);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksLandingPage",propTypes:{user:u["default"].user().isRequired,viewerIsOwner:i.PropTypes.bool.isRequired,canViewProfile:i.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,headline:i.PropTypes.string.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string,isSignedIn:React.PropTypes.bool.isRequired,signInRedirectUrl:React.PropTypes.string.isRequired},renderView:function(){return n("div",{},void 0,n(c["default"],{user:this.props.user,headline:this.props.headline,isSignedIn:this.props.isSignedIn,signInRedirectUrl:this.props.signInRedirectUrl,viewerIsOwner:this.props.viewerIsOwner}),n(f["default"],{user:this.props.user,viewerIsOwner:this.props.viewerIsOwner,canViewProfile:this.props.canViewProfile,ownerHasLinkedAmazonAccount:this.props.ownerHasLinkedAmazonAccount,createLinking:this.props.createLinking,updateLinking:this.props.updateLinking,learnMore:this.props.learnMore,contactUs:this.props.contactUs}))},render:function(){return n("div",{className:"gr-annotatedBooksPage"},void 0,this.renderView())}})},{"../gr_component_factory":129,"../shared/gr_prop_types":196,"./annotated_books_page":180,"./reading_notes_header":182,react:"react"}],179:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;
if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("lodash"),u=e("./annotated_book_item"),d=o(u);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksList",propTypes:{annotatedBooksCollection:i.PropTypes.array.isRequired},render:function(){return n("div",{className:"annotatedBooksList"},void 0,(0,l.map)(this.props.annotatedBooksCollection,function(e){return n(d["default"],{annotatedBookData:e},e.asin)}))}})},{"../gr_component_factory":129,"./annotated_book_item":177,lodash:"lodash",react:"react"}],180:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("../shared/gr_prop_types"),u=o(l),d=e("reflux"),c=o(d),p=e("lodash"),f=e("../../modules/reading_notes/reading_notes_helper"),m=e("./annotated_books_list"),h=o(m),_=e("../flash_message"),g=o(_),v=e("../../react_actions/reading_notes/annotated_books_actions"),y=o(v),b=e("../../react_stores/reading_notes/annotated_books_store"),S=o(b),k=e("../spinner"),T=o(k);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksPage",mixins:[c["default"].connect(S["default"],"annotatedBooksStore")],propTypes:{user:u["default"].user().isRequired,viewerIsOwner:i.PropTypes.bool.isRequired,canViewProfile:i.PropTypes.bool.isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string},createLinkHandler:function(){window.open(this.props.createLinking,"","width=900, height=540")},loadAnnotatedBooksHandler:function(){y["default"].loadAnnotatedBooks(this.props.user.id)},componentWillMount:function(){this.props.ownerHasLinkedAmazonAccount&&y["default"].loadAnnotatedBooks(this.props.user.id)},render:function(){var e=this.state.annotatedBooksStore,t=void 0;return t=this.props.viewerIsOwner?this.props.ownerHasLinkedAmazonAccount?(0,p.isEmpty)(e.annotatedBooksCollection)?e.showSpinner?this.renderLoadingView():this.renderEmptyOwnerView():this.renderOwnerCollection():this.renderUnlinkedView():this.props.canViewProfile&&this.props.ownerHasLinkedAmazonAccount?(0,p.isEmpty)(e.annotatedBooksCollection)?e.showSpinner?this.renderLoadingView():this.renderEmptyVisitorView():this.renderVisitorCollection():this.renderEmptyVisitorView(),n("div",{className:"annotatedBooksPage"},void 0,e.showError?n(g["default"],{category:"error",message:f.BOOK_LOAD_ERROR_MSG}):null,t)},renderLoadingView:function(){return n("div",{className:"annotatedBooksPage__loading"},void 0,n(T["default"],{}))},renderUnlinkedView:function(){return n("div",{className:"annotatedBooksPage__unlinked"},void 0,n("div",{className:"annotatedBooksPage__unlinked__gkLogo"}),n("p",{className:"annotatedBooksPage__unlinked__description"},void 0,"Link your Goodreads and Amazon accounts to access your Kindle notes and highlights on Goodreads."),n("p",{className:"annotatedBooksPage__unlinked__learnMore"},void 0,n("a",{href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")),n("div",{className:"annotatedBooksPage__unlinked__linkBtn"},void 0,n("button",{className:"gr-button gr-button--dark gr-button--fullWidth",onClick:this.createLinkHandler},void 0,"Connect your accounts")))},renderEmptyOwnerView:function(){return n("div",{className:"annotatedBooksPage__empty"},void 0,n("div",{className:"annotatedBooksPage__empty__description"},void 0,"It looks like you don’t have any Kindle ebooks with notes or highlights.",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.learnMore},void 0,"Learn More"),"about Kindle Notes & Highlights and",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.contactUs},void 0,"contact us"),"if you have any questions."),n("div",{className:"annotatedBooksPage__empty__content"},void 0,n("div",{className:"annotatedBooksPage__empty__gkLogo"}),n("p",{className:"annotatedBooksPage__emptyOwner__status"},void 0,"Your Goodreads account is connected to your Amazon account."),n("div",{className:"annotatedBooksPage__empty__updateLink"},void 0,n("a",{href:this.props.updateLinking},void 0,"Update account linking"))))},renderEmptyVisitorView:function(){return n("div",{className:"annotatedBooksPage__empty"},void 0,n("div",{className:"annotatedBooksPage__empty__description"},void 0,this.props.user.firstName," has not posted any Kindle Notes & Highlights yet.",n("a",{className:"annotatedBooksPage__empty__description__link",href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")))},renderOwnerCollection:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection"},void 0,n("div",{className:"annotatedBooksPage__collection__description"},void 0,n("span",{},void 0,"Below are all of the books in your Kindle Library with highlights, starting with the most recently updated.")),n(h["default"],{annotatedBooksCollection:e.annotatedBooksCollection}),this.renderLoadMore())},renderVisitorCollection:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection"},void 0,n("div",{className:"annotatedBooksPage__collection__description"},void 0,n("span",{},void 0,"Join in the conversation. View, like, and comment on ",this.props.user.firstName,"’s notes and highlights.")),n(h["default"],{annotatedBooksCollection:e.annotatedBooksCollection}))},renderLoadMore:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection__loadMoreContainer"},void 0,e.showSpinner?n(T["default"],{}):e.nextToken?n("button",{className:"annotatedBooksPage__collection__loadMoreButton gr-button gr-button--dark",onClick:this.loadAnnotatedBooksHandler},void 0,"Load More"):null)}})},{"../../modules/reading_notes/reading_notes_helper":26,"../../react_actions/reading_notes/annotated_books_actions":48,"../../react_stores/reading_notes/annotated_books_store":272,"../flash_message":127,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../spinner":209,"./annotated_books_list":179,lodash:"lodash",react:"react",reflux:"reflux"}],181:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("react"),d=e("../author/author_follow_button"),c=o(d),p=e("../../modules/shape_icon_values"),f=e("../user/user_follow_widget"),m=o(f),h=e("../user/user_icon"),_=o(h),g=e("../user/user_profile_link"),v=o(g);r["default"]=a["default"].createClass({displayName:"ReadingNotesAnnotator",propTypes:{displayUser:l["default"].user().isRequired,isSignedIn:React.PropTypes.bool.isRequired,showFollowWidget:u.PropTypes.bool,signInRedirectUrl:React.PropTypes.string.isRequired},defaultProps:{showFollowWidget:!1},renderFollowComponentIfNeeded:function(){return this.props.showFollowWidget?this.props.isSignedIn?this.props.displayUser.authorId?n(c["default"],{authorId:this.props.displayUser.authorId,className:"gr-button--small u-displayBlock"}):n(m["default"],{displayUser:this.props.displayUser}):n("a",{href:this.props.signInRedirectUrl,className:"gr-button gr-button--small gr-box gr-box--inline gr-box--marginRightSmall",rel:"nofollow"},void 0,"Follow"):void 0},render:function(){return n("div",{className:"readingNotesAnnotator gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"readingNotesAnnotator__userIcon gr-mediaFlexbox__media"},void 0,n(_["default"],{user:this.props.displayUser,size:p.ICON_SIZES.MEDIUM})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"readingNotesAnnotator__name"},void 0,"by ",n(v["default"],{user:this.props.displayUser,className:"u-defaultType"})),this.renderFollowComponentIfNeeded()))}})},{"../../modules/shape_icon_values":27,"../author/author_follow_button":78,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../user/user_follow_widget":219,"../user/user_icon":220,"../user/user_profile_link":222,react:"react"}],182:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("../shared/gr_prop_types"),u=o(l),d=e("./reading_notes_annotator"),c=o(d);r["default"]=a["default"].createClass({displayName:"ReadingNotesHeader",propTypes:{user:u["default"].user().isRequired,headline:i.PropTypes.string.isRequired,isSignedIn:React.PropTypes.bool.isRequired,signInRedirectUrl:React.PropTypes.string.isRequired,viewerIsOwner:i.PropTypes.bool.isRequired},renderAnnotator:function(){return this.props.viewerIsOwner?void 0:n(c["default"],{displayUser:this.props.user,isSignedIn:this.props.isSignedIn,showFollowWidget:!this.props.viewerIsOwner,signInRedirectUrl:this.props.signInRedirectUrl})},render:function(){return n("div",{className:"readingNotesHeader"},void 0,n("div",{className:"gr-h3 gr-h3--serif readingNotesHeader__headline"},void 0,this.props.headline),this.renderAnnotator())}})},{"../gr_component_factory":129,"../shared/gr_prop_types":196,"./reading_notes_annotator":181,react:"react"}],183:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.MESSAGE=void 0;var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal"),d=o(u),c=e("../../react_components/want_to_read/want_to_read_button"),p=o(c),f=r.MESSAGE="To make your notes and highlights visible, first add this book to one of your shelves.";r["default"]=l["default"].createClass({displayName:"ReadingNotesShelvingModal",propTypes:{book:a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired}).isRequired},renderModalContent:function(){return n("div",{className:"gr-mediaFlexbox"},void 0,n("img",{className:"gr-mediaFlexbox__media u-marginRightMedium",src:this.props.book.imageUrl,alt:this.props.book.title}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("h3",{className:"gr-h3 gr-h3--noTopMargin gr-h3--serif"},void 0,"Add your book"),n("div",{className:"readingNotesShelvingModal__text"},void 0,f),n(p["default"],{bookId:this.props.book.id,bookTitle:this.props.book.title,uniqueId:"readingNotesShelvingModalWTR"})))},render:function(){return n(d["default"],{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,this.renderModalContent())}})},{"../../react_components/want_to_read/want_to_read_button":237,"../gr_component_factory":129,"../modal":167,react:"react"}],184:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u),c=e("../../react_stores/shelvings_store"),p=o(c),f=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"ReadingNotesShelvingModalTrigger",propTypes:{bookId:a["default"].PropTypes.string.isRequired,innerHtml:a["default"].PropTypes.string.isRequired},mixins:[(0,f.connectToLazyStore)(p["default"],"bookId",{stateKey:"shelvings"})],renderInnerHtml:function(){return n("span",{dangerouslySetInnerHTML:{__html:this.props.innerHtml}})},render:function(){return null===this.state.shelvings.exclusiveShelfName?n(d["default"],{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,n("div",{className:"readingNotesShelvingModalTrigger__unclickableInnerHtml"},void 0,this.renderInnerHtml())):this.renderInnerHtml()}})},{"../../react_mixins/gr_reflux":255,"../../react_stores/shelvings_store":275,"../gr_component_factory":129,"../modal_trigger":168,react:"react"}],185:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("../modules/ads/google_ad_helper");r["default"]=l["default"].createClass({displayName:"ScrollTracker",propTypes:{experiments:a["default"].PropTypes.arrayOf(a["default"].PropTypes.string),trackedEventId:a["default"].PropTypes.string.isRequired,viewportExpansion:a["default"].PropTypes.number},getDefaultProps:function(){return{experiments:[],viewportExpansion:0}},componentDidMount:function(){(0,u.lazyLoadOnView)(function(e){e.target.id===this.props.trackedEventId&&(this.props.experiments.length?$j.post("/track_conversion_action",{event:this.props.trackedEventId,options:{experiments:this.props.experiments,multiple:!0}}):$j.post("/track/track",{tid:this.props.trackedEventId}))}.bind(this))},render:function(){return n("div",{id:this.props.trackedEventId,className:"lazyload","data-expand":""+this.props.viewportExpansion})}})},{"../modules/ads/google_ad_helper":4,"./gr_component_factory":129,react:"react"}],186:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),p=e("reflux"),f=o(p),m=e("react-onclickoutside"),h=o(m),_=e("classnames"),g=o(_),v=e("../../modules/keys"),y=o(v),b=e("../../react_stores/book_search_store_factory"),S=o(b),k=e("./book_search_results"),T=o(k),P=e("../spinner"),w=o(P),N=e("../../react_mixins/factory_store_mixin"),R=o(N),M=300;r["default"]=c["default"].createClass({displayName:"BookSearch",mixins:[h["default"],f["default"].ListenerMixin,(0,R["default"])(S["default"])],propTypes:{autoFocus:i["default"].PropTypes.bool,onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,shelfName:i["default"].PropTypes.string,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{autoFocus:!1,maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var e=this;this.delayedSearch=u["default"].debounce(function(t){e.actions.search(t.target.value,e.props.autocompleteUrl)},M)},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){u["default"].isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=this.withBemModifiers("searchBox__icon","loadingSpinner"),t=(0,g["default"])("searchBox__icon--magnifyingGlass gr-iconButton",this.withBemModifiers("searchBox__icon"));return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(w["default"],{})):s("button",{type:"submit",className:t,"aria-label":"Search"})},render:function(){var e=(0,g["default"])(this.withBemModifiers("searchBox")),t=(0,g["default"])(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,className:"searchBox__form",role:"search","aria-label":"Search for books to add to your shelves"},void 0,s("input",{className:t,autoComplete:"off",autoFocus:this.props.autoFocus,name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../modules/keys":24,"../../react_mixins/factory_store_mixin":254,"../../react_stores/book_search_store_factory":260,"../gr_component_factory":129,"../spinner":209,"./book_search_results":188,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],187:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("classnames"),p=o(c),f=e("../author/author_badge"),m=o(f);r["default"]=l["default"].createClass({displayName:"BookSearchResult",propTypes:{book:d["default"].book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,p["default"])("gr-mediaFlexbox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-bookSearchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,n("img",{className:"gr-mediaFlexbox__media",src:this.props.book.imageUrl,alt:""}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),n("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,a["default"].createElement(m["default"],this.props.book.author))))}})},{"../author/author_badge":77,"../gr_component_factory":129,"../shared/gr_prop_types":196,classnames:"classnames",react:"react"}],188:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u),c=e("../drop_down_list"),p=o(c),f=e("./book_search_result"),m=o(f),h=e("../gr_component_factory"),_=o(h);r["default"]=_["default"].createClass({displayName:"BookSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired})},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","gr-bookSearchResults__lastItem",this.withBemElement("gr-bookSearchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("gr-bookSearchResults"),"gr-box","gr-box--withShadow");return n("div",{className:t,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,n(p["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return n("div",{className:(0,d["default"])("gr-bookSearchResults__item",{"gr-bookSearchResults__item--active":t===e.props.activeResult}),onMouseOver:function(){e.props.mouseoverAction(t.bookId)}},t.bookId,n(m["default"],{book:t,onChooseResult:e.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":111,"../gr_component_factory":129,"./book_search_result":187,classnames:"classnames",lodash:"lodash",react:"react"}],189:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../header/nav_search"),c=o(d),p=e("../search/search_toggle"),f=o(p);r["default"]=u["default"].createClass({displayName:"SearchMobileNav",propTypes:{autocompleteUrl:i["default"].PropTypes.string.isRequired,searchPath:i["default"].PropTypes.string.isRequired},render:function(){return s("div",{className:"siteHeader__primaryNavSeparateLine siteHeader__primaryNavSeparateLine--search"},void 0,i["default"].createElement(c["default"],n({},this.props,{autoFocus:!0,bemModifiers:"primaryNavSeparateLine"})),s(f["default"],{toggleType:p.SEARCH_TOGGLE_TYPES.CANCEL}))}})},{"../gr_component_factory":129,"../header/nav_search":146,"../search/search_toggle":190,react:"react"}],190:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.mapDispatchToProps=r.mapStateToProps=r.component=r.SEARCH_TOGGLE_TYPES=void 0;var s=e("react"),a=o(s),i=e("react-redux"),l=e("../gr_component_factory"),u=o(l),d=e("lodash"),c=e("../../react_actions/header/search_actions"),p=r.SEARCH_TOGGLE_TYPES={ICON:"icon",CANCEL:"Cancel"},f=r.component=u["default"].createClass({displayName:"SearchToggle",propTypes:{searchIsActive:a["default"].PropTypes.bool.isRequired,toggleType:a["default"].PropTypes.oneOf((0,d.values)(p)),onToggleSearch:a["default"].PropTypes.func.isRequired},getDefaultProps:function(){return{searchIsActive:!1}},toggleSearch:function(){return this.props.onToggleSearch(!this.props.searchIsActive)},hideSearch:function(){return this.props.onToggleSearch(!1)},render:function(){switch(this.props.toggleType){case p.ICON:return n("button",{className:"siteHeader__searchIcon gr-iconButton",onClick:this.toggleSearch,"aria-label":"Toggle search",type:"button"});case p.CANCEL:return n("button",{className:"gr-buttonAsLink",onClick:this.hideSearch,"aria-label":"Hide search",type:"button"},void 0,p.CANCEL);default:return null}}}),m=r.mapStateToProps=function(e,t){return Object.assign({},t,e)},h=r.mapDispatchToProps=function(e){return{onToggleSearch:function(t){return e((0,c.toggleSearch)(t))}}};r["default"]=(0,i.connect)(m,h)(f)},{"../../react_actions/header/search_actions":43,"../gr_component_factory":129,lodash:"lodash",react:"react","react-redux":"react-redux"}],191:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("./gr_component_factory"),u=o(l),d=e("classnames"),c=o(d),p=e("../modules/shape_icon_values"),f=e("lodash");r["default"]=u["default"].createClass({displayName:"ShapeIcon",propTypes:{imageUrl:i["default"].PropTypes.string.isRequired,imageAlt:i["default"].PropTypes.string.isRequired,includeLink:i["default"].PropTypes.bool,linkUrl:i["default"].PropTypes.string,size:i["default"].PropTypes.oneOf((0,f.values)(p.ICON_SIZES)),shape:i["default"].PropTypes.oneOf((0,f.values)(p.ICON_SHAPES)),border:i["default"].PropTypes.bool},getShapeClass:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.props.shape+"Icon";return e&&(t+="--"+e),t},getDefaultProps:function(){return{includeLink:!1,size:p.ICON_SIZES.SMALL,shape:p.ICON_SHAPES.CIRCLE,border:!1}},render:function(){var e,t=(0,c["default"])(this.props.className,(e={},n(e,""+this.getShapeClass(),!0),n(e,""+this.getShapeClass("medium"),this.props.size===p.ICON_SIZES.MEDIUM),n(e,""+this.getShapeClass("large"),this.props.size===p.ICON_SIZES.LARGE),n(e,""+this.getShapeClass("border"),this.props.border),e));return this.props.includeLink&&this.props.linkUrl?s("a",{href:this.props.linkUrl},void 0,s("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})):s("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/shape_icon_values":27,"./gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react"}],192:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"ShareButton",propTypes:{textLabel:a["default"].PropTypes.string},getDefaultProps:function(){return{textLabel:"Share"}},render:function(){return n("button",{className:"gr-shareButton",type:"button"},void 0,n("span",{className:"gr-shareButton__innerWrapper"},void 0,n("span",{className:"gr-shareButton__icon"}),n("span",{className:"gr-shareButton__textLabel"},void 0,this.props.textLabel)))}})},{"./gr_component_factory":129,react:"react"}],193:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./shared/gr_prop_types"),u=o(l),d=e("reflux"),c=o(d),p=e("./modal_trigger"),f=o(p),m=e("./share_button"),h=o(m),_=e("./modal"),g=o(_),v=e("./share_social"),y=o(v),b=e("./user_content/string_counter"),S=o(b),k=e("../react_stores/share_dialog_store"),T=o(k),P=e("../react_actions/share_dialog_actions"),w=o(P),N=e("classnames"),R=o(N),M=e("../modules/env_utils"),C=o(M),A=e("./flash_message"),x=o(A),I=e("./sharing/previews/share_dialog_book_preview"),L=o(I),U=e("./sharing/previews/share_dialog_topic_preview"),E=o(U);
r["default"]=i["default"].createClass({displayName:"ShareDialog",mixins:[c["default"].connect(T["default"],"sharingDialog")],propTypes:u["default"].shareDialog(),getDefaultProps:function(){return{includePreview:!1}},getInitialState:function(){return{uniqueId:Math.random(1e6)}},getResourceTypeIdentifier:function(){return this.props.sharingData.resourceTypeFriendlyText.replace(/\s/g,"").toLowerCase()},getShareModalId:function(){return"share-"+this.getResourceTypeIdentifier()+"-modal"+this.state.uniqueId},socialExists:function(e){return this.props.social[e].facebook||this.props.social[e].twitter||this.props.social[e].pinterest||this.props.social[e].copyLink},renderPreview:function(){if(!this.props.includePreview)return null;var e=void 0,t=this.props.sharingData.resourceTypeFriendlyText;switch(t){case"book":e=React.createElement(L["default"],this.props.previewData);break;case"discussion":e=React.createElement(E["default"],this.props.previewData)}return e?e:void 0},renderSocialInModal:function(e){if(this.socialExists("inModal")){var t=e+" share on:";return s("div",{className:"shareModal__socialContainer"},void 0,s("div",{className:"shareModal__socialPrompt"},void 0,t),React.createElement(y["default"],n({},this.props.social.inModal,{bemModifiers:"modal",fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_sharingModal"})))}return null},renderCharacterCounter:function(){var e=this.state.sharingDialog.sharingTextInputValue||"";return s(S["default"],{counterType:"character",maxLength:k.MAXIMUM_SHARING_TEXT_LENGTH,warnLength:k.WARNING_SHARING_TEXT_LENGTH,text:e})},handleShare:function(){var e=this.props.sharingData,t=this.state.sharingDialog.sharingTextInputValue;w["default"].submitShare(e,t)},renderSharePrompt:function(){var e=(0,R["default"])("shareModal__bottomContainer",{"shareModal__bottomContainer--noSocial":!this.socialExists("inModal"),"shareModal__bottomContainer--social":this.socialExists("inModal")});return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Share this ",this.props.sharingData.resourceTypeFriendlyText," on Goodreads"),this.renderShareError(),s("textarea",{"aria-label":"Share text",placeholder:"Say something about this "+this.props.sharingData.resourceTypeFriendlyText+"...",value:this.state.sharingDialog.sharingTextInputValue,onChange:function(e){w["default"].updateSharingTextInputValue(e.target.value)},className:"gr-textInput shareModal__textInput"}),this.renderCharacterCounter(),this.renderPreview(),s("button",{className:"gr-button gr-button--Large shareModal__button",onClick:this.handleShare,type:"button",disabled:this.state.sharingDialog.shareModalButtonDisabled},void 0,"Share"),s("div",{className:e},void 0,this.renderSocialInModal("Or")))},renderShareSuccess:function(){return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Shared!"),s("h3",{className:"gr-hyperlink shareModal__link"},void 0,s("a",{href:this.state.sharingDialog.sharingUrl,"aria-label":"Link to "+this.state.sharingDialog.sharingDisplayName},void 0,"View post")),s("div",{className:"shareModal__bottomContainer shareModal__bottomContainer--shared"},void 0,this.renderSocialInModal("Also")))},renderShareError:function(){if(this.state.sharingDialog.error){var e=this.props.sharingData.resourceTypeFriendlyText,t=this.state.sharingDialog.errorText||"Something went wrong, and your "+e+" wasn't shared. Please try again later.";return s(x["default"],{category:"error",message:t})}return null},renderModalContent:function(){return this.state.sharingDialog.shared?this.renderShareSuccess():this.renderSharePrompt()},renderSocialOutsideModal:function(){return this.socialExists("outsideModal")?React.createElement(y["default"],n({},this.props.social.outsideModal,{fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_shareModuleBar",bemModifiers:"shareBar"})):null},shouldRedirect:function(){return this.props.signInUrl&&!this.props.signedIn},handleClick:function(){this.shouldRedirect()?this.redirectToSignIn():w["default"].openShareModal(this.getResourceTypeIdentifier())},getSignInUrl:function(){var e=C["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},redirectToSignIn:function(){C["default"].setLocationUrl(this.getSignInUrl())},renderModal:function(){return this.shouldRedirect()?null:s(g["default"],{id:this.getShareModalId(),bemModifiers:"share"},void 0,this.renderModalContent())},render:function(){return s("div",{},void 0,this.renderModal(),s("div",{className:"shareModuleBar"},void 0,s(f["default"],{id:this.getShareModalId(),clickHandler:this.handleClick,bemModifiers:"shareModule"},void 0,s(h["default"],{})),this.renderSocialOutsideModal()))}})},{"../modules/env_utils":21,"../react_actions/share_dialog_actions":50,"../react_stores/share_dialog_store":273,"./flash_message":127,"./gr_component_factory":129,"./modal":167,"./modal_trigger":168,"./share_button":192,"./share_social":194,"./shared/gr_prop_types":196,"./sharing/previews/share_dialog_book_preview":201,"./sharing/previews/share_dialog_topic_preview":203,"./user_content/string_counter":226,classnames:"classnames",reflux:"reflux"}],194:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("./sharing/facebook_share"),d=o(u),c=e("./sharing/twitter_share"),p=o(c),f=e("./sharing/pinterest_share"),m=o(f),h=e("classnames"),_=o(h);r["default"]=l["default"].createClass({displayName:"ShareSocial",propTypes:{facebook:a["default"].PropTypes.bool,twitter:a["default"].PropTypes.bool,pinterest:a["default"].PropTypes.bool,copyLink:a["default"].PropTypes.bool,fbOptions:a["default"].PropTypes.object,twitterOptions:a["default"].PropTypes.object,pinterestOptions:a["default"].PropTypes.object,metricName:a["default"].PropTypes.string},getDefaultProps:function(){return{facebook:!1,twitter:!1,pinterest:!1,copyLink:!1,metricName:""}},renderSocialPlatform:function(e){if(!this.props[e])return null;var t="SocialSharing_"+this.props.metricName+"_"+e;switch(e){case"facebook":return n(d["default"],{options:this.props.fbOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"twitter":return n(p["default"],{options:this.props.twitterOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"pinterest":return n(m["default"],{options:this.props.pinterestOptions,metricName:t,bemModifiers:this.props.bemModifiers})}},render:function(){var e=(0,_["default"])(this.withBemModifiers("shareSocialButtons"),this.props.className);return n("div",{className:e},void 0,this.renderSocialPlatform("facebook"),this.renderSocialPlatform("twitter"),this.renderSocialPlatform("pinterest"))}})},{"./gr_component_factory":129,"./sharing/facebook_share":199,"./sharing/pinterest_share":200,"./sharing/twitter_share":204,classnames:"classnames",react:"react"}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={get:function(e){var t=null,r=window.$j;return r&&r.each(document.cookie.split("; "),function(r,o){var n=o.split("=");n[0]===e&&(t=n[1])}),t},set:function(e,t,r){r=r||365;var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);var n="; expires="+o.toGMTString();document.cookie=e+"="+encodeURIComponent(t)+n+"; path=/"}}},{}],196:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){function t(t,r,o,n){return n||(n="<<anonymous>>"),l["default"].isNull(r[o])||l["default"].isUndefined(r[o])?t?new Error("Required property `"+o+"` was not specified in "+("`"+n+"`.")):null:e(r,o,n)}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=function(e,t,r){var o=e[t],n=l["default"].isString(o)?new Date(o):o;return!l["default"].isDate(n)||l["default"].isNaN(n.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+o+"'."):void 0},d=function(e,t,r){var o=e[t];return 0>=o?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+o+"'."):void 0},c=function(e,t){return l["default"].merge({},e,t)},p=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string,informalName:a["default"].PropTypes.string};return a["default"].PropTypes.shape(c(t,e))},f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={bookId:a["default"].PropTypes.string,workId:a["default"].PropTypes.string,bookUrl:a["default"].PropTypes.string,authorName:a["default"].PropTypes.string,title:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,numPages:a["default"].PropTypes.number};return a["default"].PropTypes.shape(c(t,e))},m=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=g();return a["default"].PropTypes.shape(c(t,e))},h=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string.isRequired})},_=function(){return{html:a["default"].PropTypes.string.isRequired,truncatedHtml:a["default"].PropTypes.string}},g=function(){return{html:a["default"].PropTypes.string,fullContentUrl:a["default"].PropTypes.string,fullContentText:a["default"].PropTypes.string,truncated:a["default"].PropTypes.bool.isRequired,className:a["default"].PropTypes.string,bookDescriptionTargetingData:a["default"].PropTypes.object}},v=function(){return a["default"].PropTypes.shape({user:p().isRequired,friendUser:p().isRequired,isMyFriend:a["default"].PropTypes.bool.isRequired,addFriendUrl:a["default"].PropTypes.string,compareBooksUrl:a["default"].PropTypes.string,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:f()})},y=function(){return a["default"].PropTypes.shape({user:p().isRequired,followingUser:p().isRequired,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:f()})},b=function(){return a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},S=function(){return a["default"].PropTypes.shape({canComment:a["default"].PropTypes.bool.isRequired,commentable:a["default"].PropTypes.bool.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:b(),subjectUrl:a["default"].PropTypes.string})},k=function(){return a["default"].PropTypes.shape({key:a["default"].PropTypes.string.isRequired,label:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired})},T=function(){return a["default"].PropTypes.shape({author:h().isRequred,title:a["default"].PropTypes.string,url:a["default"].PropTypes.string})},P=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,typeDisplayName:a["default"].PropTypes.string})},w=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string,body:a["default"].PropTypes.object,url:a["default"].PropTypes.string,authorImageUrl:a["default"].PropTypes.string,author:a["default"].PropTypes.string,bookImageUrl:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,typeDisplayName:a["default"].PropTypes.string})},N=function(){return a["default"].PropTypes.shape({user:p().isRequired,author:h().isRequred,userAuthorFollowingsUrl:a["default"].PropTypes.string})},R=function(){return a["default"].PropTypes.shape({author:h().isRequired,message:a["default"].PropTypes.string,url:a["default"].PropTypes.string.isRequired})},M=function(){return a["default"].PropTypes.shape({author:h().isRequired,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,quotesAuthorUrl:a["default"].PropTypes.string.isRequired})},C=function(){return a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,lastActiveAt:n(u)})},A=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,totalPosts:a["default"].PropTypes.string.isRequired,newPosts:a["default"].PropTypes.string,newCommentsUrl:a["default"].PropTypes.string,updatedAt:n(u),folder:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,url:a["default"].PropTypes.string})})},x={user:p().isRequired,pollName:a["default"].PropTypes.string.isRequired,answer:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,isGroupPoll:a["default"].PropTypes.bool.isRequired,isChoicePoll:a["default"].PropTypes.bool.isRequired,groupName:a["default"].PropTypes.string,groupUrl:a["default"].PropTypes.string},I=function(){return a["default"].PropTypes.shape(x)},L=function(){return a["default"].PropTypes.shape(c(x,{choiceYear:a["default"].PropTypes.number.isRequired,choiceUrl:a["default"].PropTypes.string.isRequired,badgeUrl:a["default"].PropTypes.string.isRequired,votedBook:f().isRequired}))},U=function(){return{category:a["default"].PropTypes.number.isRequired,questionText:a["default"].PropTypes.string.isRequired,isSpoiler:a["default"].PropTypes.bool.isRequired,questionUrl:a["default"].PropTypes.string.isRequired,user:p().isRequired,authorQuestionsUrl:a["default"].PropTypes.string,book:f()}},E=function(){return{user:p().isRequired,answerText:a["default"].PropTypes.shape(g()),isSpoiler:a["default"].PropTypes.bool.isRequired,communityQuestion:a["default"].PropTypes.shape(U()).isRequired}},O=function(){return a["default"].PropTypes.shape({book:f(),customText:a["default"].PropTypes.object,helpLink:a["default"].PropTypes.string,defaultIcon:a["default"].PropTypes.string,numAdditionalFriends:a["default"].PropTypes.number,friendActionText:a["default"].PropTypes.string,firstFriend:p(),customTextReview:a["default"].PropTypes.object,similarBook:f(),similarBookShelf:a["default"].PropTypes.string,similarBookShelfUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array})},D=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={actor:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string}),actors:a["default"].PropTypes.array,createdAt:a["default"].PropTypes.string,body:a["default"].PropTypes.string,resource:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string}),viewed:a["default"].PropTypes["boolean"],moreActors:a["default"].PropTypes["boolean"]};return a["default"].PropTypes.shape(c(t,e))},B=a["default"].PropTypes.shape({label:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}),F=function(){return a["default"].PropTypes.shape({uri:a["default"].PropTypes.string,book:f(),description:a["default"].PropTypes.shape(g()),dealPrice:a["default"].PropTypes.string,listPrice:a["default"].PropTypes.string,expirationDate:a["default"].PropTypes.string,genres:a["default"].PropTypes.array,tags:a["default"].PropTypes.array,retailerLinks:a["default"].PropTypes.shape({preferred:B.isRequired,additional:a["default"].PropTypes.arrayOf(B)})})},j=function(e){return a["default"].PropTypes.shape({destination:a["default"].PropTypes.string.isRequired,type:a["default"].PropTypes.string.isRequired,object:e})},q=function(){return j(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string}))},H=function(){return j(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,title:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string}))},G=function(){return j(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string}))},$=function(){return a["default"].PropTypes.shape({asin:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,sharedCount:a["default"].PropTypes.number.isRequired,highlightCount:a["default"].PropTypes.number,noteCount:a["default"].PropTypes.number,readingNotesUrl:a["default"].PropTypes.string.isRequired,knhCta:a["default"].PropTypes.string.isRequired,noSharedAnnotations:a["default"].PropTypes.bool.isRequired})},z=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,year:a["default"].PropTypes.number.isRequired,type:a["default"].PropTypes.string.isRequired,maxGoal:a["default"].PropTypes.number.isRequired,isFinished:a["default"].PropTypes.bool,images:a["default"].PropTypes.shape({badge:a["default"].PropTypes.string.isRequired,completed:a["default"].PropTypes.string.isRequired})})},W=function(){return{signedIn:a["default"].PropTypes.bool,signInUrl:a["default"].PropTypes.string,social:a["default"].PropTypes.shape({inModal:a["default"].PropTypes.shape({facebook:a["default"].PropTypes.bool.isRequired,twitter:a["default"].PropTypes.bool.isRequired,pinterest:a["default"].PropTypes.bool.isRequired,copyLink:a["default"].PropTypes.bool.isRequired}).isRequired,outsideModal:a["default"].PropTypes.shape({facebook:a["default"].PropTypes.bool.isRequired,twitter:a["default"].PropTypes.bool.isRequired,pinterest:a["default"].PropTypes.bool.isRequired,copyLink:a["default"].PropTypes.bool.isRequired}).isRequired,fbOptions:a["default"].PropTypes.object,twitterOptions:a["default"].PropTypes.object,pinterestOptions:a["default"].PropTypes.object}).isRequired,sharingData:a["default"].PropTypes.shape({resourceTypeFriendlyText:a["default"].PropTypes.string.isRequired,resourceId:a["default"].PropTypes.number.isRequired,sharerUserId:a["default"].PropTypes.number}).isRequired,includePreview:a["default"].PropTypes.bool,previewData:a["default"].PropTypes.object}};r["default"]={user:p,author:h,blogNewsfeedResource:P,interviewNewsfeedResource:w,book:f,bookDescription:m,quote:M,commentSubject:b,comment:S,like:k,group:C,topic:A,authorBlogPostNewsfeedResource:T,authorFollowNewsfeedResource:N,authorQaSettingNewsfeedResource:R,communityQuestion:U,communityAnswer:E,friendNewsfeedResource:v,userFollowingNewsfeedResource:y,pollVoteNewsfeedResource:I,expandableHtml:_,truncatedHtml:g,choicePollVoteNewsfeedResource:L,date:n(u),naturalNumber:n(d),creative:O,notification:D,deal:F,searchResults:{book:H,author:q,user:G},readingNotesAnnotatedBookItem:$,readingChallenge:z,shareDialog:W}},{lodash:"lodash",react:"react"}],197:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("react-dom"),i=o(a),l=e("lodash"),u=o(l),d=e("../user_content/spoiler"),c=o(d);r["default"]={replaceSpoilerHTMLWithReactComponents:function(e,t){var r=t||window.$j,o=r(".jsShowSpoiler",e);u["default"].each(o,function(e){var t=r(e),o=t.next(".spoilerContainer");if(o){var n=o.text().replace("(hide spoiler)",""),a=s["default"].createElement(c["default"],{html:n}),l=r("<span></span>");t.replaceWith(l),i["default"].render(a,r(l)[0])}})}}},{"../user_content/spoiler":225,lodash:"lodash",react:"react","react-dom":"react-dom"}],198:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("../modal_trigger"),u=o(l),d=e("../modal"),c=o(d),p=e("../spinner"),f=o(p),m=e("../../modules/ajax/ajax_helper"),h=e("../flash_message"),_=o(h);r["default"]=i["default"].createClass({displayName:"ShareableLinkbutton",propTypes:{getShareableLinkURL:s.PropTypes.string.isRequired,resourceType:s.PropTypes.string.isRequired},getShareableLinkModalId:function(){return"shareableLinkModal"},getInitialState:function(){return{error:!1,fetching:!1,copiedToClipboard:!1,shareableLink:null,ttl:null}},requestLink:function(){var e=this;(0,m.httpRequest)(this.props.getShareableLinkURL,{method:"GET"}).done(function(t){var r=t.link,o=t.ttl;e.setState({shareableLink:r,ttl:o})}).fail(function(){e.setState({error:!0})}).always(function(){e.setState({fetching:!1})})},handleClick:function(){return this.state.shareableLink?null:this.setState({fetching:!0,error:!1},this.requestLink)},copyLinkToClipboard:function(){return this.selectShareableLinkInput(),document.execCommand("copy"),this.setState({copiedToClipboard:!0})},selectShareableLinkInput:function(){return this.shareableLinkInput.select()},renderError:function(){if(this.state.error){var e="Oops, something went wrong. Please try again.";return n(_["default"],{category:"error",message:e})}return null},renderModal:function(){var e=this;if(this.state.shareableLink){var t=parseInt(this.state.ttl/86400);return n(c["default"],{id:this.getShareableLinkModalId(),centered:!0,bemModifiers:"share"},void 0,n("div",{className:"shareableLinkModalContainer"},void 0,n("div",{className:"u-paddingBottomMedium"},void 0,n("h2",{className:"gr-h2"},void 0,"Share this ",this.props.resourceType," link with others")),n("div",{className:"u-fullWidth u-paddingBottomTiny"},void 0,n("label",{htmlFor:"inviteUrl"},void 0,"Invite Link:"),React.createElement("input",{className:"shareableLinkInput",ref:function(t){e.shareableLinkInput=t},readOnly:!0,id:"inviteUrl",type:"text",value:this.state.shareableLink,onClick:this.selectShareableLinkInput})),n("div",{className:"u-paddingBottomMedium"},void 0,this.state.ttl&&"This link will expire after "+t+" days. ",this.state.copiedToClipboard&&"Link copied to clipboard!"),n("div",{},void 0,n("button",{type:"button",className:"gr-button",onClick:this.copyLinkToClipboard},void 0,"Copy link to clipboard"))))}return null},renderModalTrigger:function(){return this.state.fetching?n(f["default"],{isSmall:!0}):n(u["default"],{id:"shareableLinkModal"},void 0,n("button",{type:"button",className:"gr-button",onClick:this.handleClick},void 0,"Get link"))},render:function(){return n("div",{className:"u-paddingTopBottomTiny"},void 0,n("div",{},void 0,this.renderModalTrigger(),this.renderModal(),this.renderError()))}})},{"../../modules/ajax/ajax_helper":5,"../flash_message":127,"../gr_component_factory":129,"../modal":167,"../modal_trigger":168,"../spinner":209,react:"react"}],199:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"FacebookShare",propTypes:{options:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,link:a["default"].PropTypes.string,description:a["default"].PropTypes.string,caption:a["default"].PropTypes.string,picture:a["default"].PropTypes.string,properties:a["default"].PropTypes.object,action_link_text:a["default"].PropTypes.string,resource_type:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string},onFacebookButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),$grfb.feedDialog(this.props.options)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--facebook","aria-label":"Share to Facebook",type:"button",onClick:function(){return e.onFacebookButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"./../gr_component_factory":129,react:"react"}],200:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=o(d);r["default"]=l["default"].createClass({displayName:"PinterestShare",propTypes:{options:a["default"].PropTypes.shape({desription:a["default"].PropTypes.string,url:a["default"].PropTypes.string,media:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:700,height:800}}},onPinterestButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://pinterest.com/pin/create/link/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--pinterest","aria-label":"Share to Pinterest",type:"button",onClick:function(){return e.onPinterestButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":129,react:"react"}],201:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("./share_dialog_preview"),u=o(l),d=e("../../community_rating"),c=o(d),p=e("../../author/author_badge"),f=o(p);r["default"]=i["default"].createClass({displayName:"ShareDialogBookPreview",propTypes:{author:s.PropTypes.shape({name:s.PropTypes.string.isRequired,isGoodreadsAuthor:s.PropTypes.bool.isRequired}).isRequired,rating:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,imageUrl:s.PropTypes.string.isRequired,ratingsCount:s.PropTypes.number.isRequired,textReviewsCount:s.PropTypes.number.isRequired},renderAuthorText:function(){return n("div",{},void 0,"by ",this.props.author.name,n(f["default"],{isGoodreadsAuthor:this.props.author.isGoodreadsAuthor}))},render:function(){return n(u["default"],{primaryText:this.props.title,secondaryText:this.renderAuthorText(),imageUrl:this.props.imageUrl},void 0,n("div",{className:"u-marginTopXSmall"},void 0,n(c["default"],{rating:parseFloat(this.props.rating),displayAvg:!0,displayAvgRatingText:!1,ratingsCount:this.props.ratingsCount,size:c["default"].ICON_SIZES.MEDIUM,textReviewsCount:this.props.textReviewsCount})))}})},{"../../author/author_badge":77,"../../community_rating":88,"../../gr_component_factory":129,"./share_dialog_preview":202,react:"react"}],202:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a);r["default"]=i["default"].createClass({displayName:"ShareDialogPreview",propTypes:{imageUrl:s.PropTypes.string.isRequired,primaryText:s.PropTypes.string.isRequired,secondaryText:s.PropTypes.oneOfType([s.PropTypes.element,s.PropTypes.string])},renderSecondaryText:function(){return this.props.secondaryText?n("div",{className:"sharePreview__secondaryText"},void 0,this.props.secondaryText):null},render:function(){return n("div",{className:"gr-mediaFlexbox shareModal__previewContainer"},void 0,n("img",{className:"gr-mediaFlexbox__media sharePreview__image",src:this.props.imageUrl,alt:this.props.primaryText}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,this.props.primaryText),this.renderSecondaryText(),n("div",{className:"u-marginTopXSmall"},void 0,this.props.children)))}})},{"../../gr_component_factory":129,react:"react"}],203:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./share_dialog_preview"),a=o(s),i=e("react"),l=e("../../gr_component_factory"),u=o(l),d=e("../../user_content/truncated_html"),c=o(d);r["default"]=u["default"].createClass({displayName:"ShareDialogTopicPreview",propTypes:{topicTitle:i.PropTypes.string.isRequired,groupTitle:i.PropTypes.string.isRequired,imageUrl:i.PropTypes.string.isRequired,description:i.PropTypes.string
},render:function(){var e=this.props.groupTitle+" - Discussion";return n(a["default"],{primaryText:this.props.topicTitle,secondaryText:e,imageUrl:this.props.imageUrl},void 0,n("div",{className:"sharePreview__description"},void 0,n(c["default"],{html:this.props.description,truncated:!1})))}})},{"../../gr_component_factory":129,"../../user_content/truncated_html":227,"./share_dialog_preview":202,react:"react"}],204:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=o(d);r["default"]=l["default"].createClass({displayName:"TwitterShare",propTypes:{options:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string,via:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:600,height:500}}},onTwitterButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://twitter.com/intent/tweet/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--twitter","aria-label":"Share to Twitter",type:"button",onClick:function(){return e.onTwitterButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":129,react:"react"}],205:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u);r["default"]=a["default"].createClass({displayName:"ChoiceSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,description:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string,totalVotes:React.PropTypes.number.isRequired},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!l["default"].isEmpty(this.props.targetUrl)},renderAnnouncementTitle:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__title";return e?n("a",{className:(0,d["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},render:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl},void 0,n("img",{src:this.props.imageUrl,alt:this.props.imageAlt})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,this.renderAnnouncementTitle(),n("div",{className:"siteAnnouncement__description"},void 0,this.props.description),n("div",{className:"siteAnnouncement__choiceVoteCount"},void 0,this.props.totalVotes.toLocaleString()," votes")))}})},{"../gr_component_factory":129,classnames:"classnames",lodash:"lodash"}],206:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shape_icon"),l=o(i),u=e("../../modules/shape_icon_values"),d=e("lodash"),c=o(d),p=e("classnames"),f=o(p);r["default"]=a["default"].createClass({displayName:"SimpleSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!c["default"].isEmpty(this.props.targetUrl)},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__simpleText";return e?n("a",{className:(0,f["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?n("span",{className:"siteAnnouncement__simpleSecondaryLinkSection"},void 0,n("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return n("div",{className:"siteAnnouncement\n                      siteAnnouncement--simple\n                      gr-mediaFlexbox\n                      gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__simpleBody"},void 0,n("h5",{className:"gr-h5 gr-h5--noMargin siteAnnouncement__simpleHeader"},void 0,"Goodreads news"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../shape_icon":191,classnames:"classnames",lodash:"lodash"}],207:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("./simple_site_announcement"),u=o(l);r["default"]=i["default"].createClass({displayName:"SiteAnnouncement",propTypes:{title:s.PropTypes.string.isRequired,targetUrl:s.PropTypes.string,displayData:s.PropTypes.shape({description:s.PropTypes.string,mastheadUrl:s.PropTypes.string,imageUrl:s.PropTypes.string}).isRequired},shouldRenderLargeAnnouncement:function(){var e=this.props.displayData;return e&&e.description&&e.mastheadUrl},renderLargeAnnouncement:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl,"aria-label":this.props.title},void 0,n("img",{src:this.props.displayData.mastheadUrl,alt:this.props.title})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,n("a",{className:"siteAnnouncement__title gr-hyperlink",href:this.props.targetUrl},void 0,this.props.title),n("div",{className:"siteAnnouncement__description"},void 0,this.props.displayData.description)))},render:function(){return this.shouldRenderLargeAnnouncement()?this.renderLargeAnnouncement():n(u["default"],{imageUrl:this.props.displayData.imageUrl,announcementText:this.props.title,targetUrl:this.props.targetUrl})}})},{"../gr_component_factory":129,"./simple_site_announcement":206,react:"react"}],208:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shape_icon"),l=o(i),u=e("../../modules/shape_icon_values");r["default"]=a["default"].createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return n("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,n("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),n("div",{className:"siteAnnouncement__welcomeBody"},void 0,n("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),n("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../shape_icon":191}],209:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("classnames"),l=o(i);r["default"]=a["default"].createClass({displayName:"Spinner",propTypes:{isSmall:React.PropTypes.bool},getDefaultProps:function(){return{isSmall:!1}},render:function(){var e=(0,l["default"])("spinnerContainer",this.props.className),t=this.props.isSmall?"small":null;return n("div",{className:e},void 0,n("div",{className:this.withBemModifiers("spinner",t)},void 0,n("div",{className:this.withBemModifiers("spinner__mask",t)},void 0,n("div",{className:this.withBemModifiers("spinner__maskedCircle",t)}))),n("div",{className:"spinnerFallbackText"},void 0,"Loading…"))}})},{"./gr_component_factory":129,classnames:"classnames"}],210:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"SponsoredFooter",propTypes:{sponsoredName:a["default"].PropTypes.string},renderSponsoredName:function(){return this.props.sponsoredName?n("span",{className:"featuredContentModule__sponsoredName"},void 0,this.props.sponsoredName):void 0},render:function(){var e="featuredContentModule__sponsoredFooter",t=this.props.sponsoredName?"Sponsored by ":"Sponsored";return n("div",{className:e},void 0,n("span",{className:"featuredContentModule__sponsoredBadgeIcon"}),n("span",{className:"featuredContentModule__sponsoredLabel"},void 0,t),this.renderSponsoredName())}})},{"./gr_component_factory":129,react:"react"}],211:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./gr_component_factory"),s=o(n);r["default"]=s["default"].createClass({displayName:"StoresInitializer",render:function(){return null}})},{"./gr_component_factory":129}],212:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("./gr_component_factory"),i=o(a),l=e("../react_actions/tab_actions"),u=o(l),d={CLICK:"click",HOVER:"hover"};r["default"]=i["default"].createClass({displayName:"Tab",propTypes:{group:s["default"].PropTypes.string.isRequired,name:s["default"].PropTypes.string.isRequired,initiallySelected:s["default"].PropTypes.bool,triggerEventType:s["default"].PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:d.CLICK}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){u["default"].selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case d.CLICK:e.onClick=this.selectTab;break;case d.HOVER:e.onMouseOver=this.selectTab}return s["default"].createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":52,"./gr_component_factory":129,react:"react"}],213:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../react_stores/tabs_store"),p=o(c);r["default"]=l["default"].createClass({displayName:"TabContent",mixins:[d["default"].connect(p["default"],"tabsStore")],propTypes:{group:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state.tabsStore[this.props.group]},render:function(){return n("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":276,"./gr_component_factory":129,react:"react",reflux:"reflux"}],214:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("moment"),p=o(c),f=e("../../modules/date_utils");r["default"]=l["default"].createClass({displayName:"RelativeTime",propTypes:{time:d["default"].date.isRequired,longFormat:a["default"].PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,p["default"])(new Date(this.props.time)).fromNow():(0,f.fromNow)(this.props.time)},render:function(){return n("time",{dateTime:this.props.time,"aria-label":(0,p["default"])(new Date(this.props.time)).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":11,"../gr_component_factory":129,"../shared/gr_prop_types":196,moment:"moment",react:"react"}],215:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("./spinner"),d=o(u),c=e("classnames"),p=o(c);r["default"]=l["default"].createClass({displayName:"ToggleSwitch",propTypes:{switchId:a["default"].PropTypes.string.isRequired,changeHandler:a["default"].PropTypes.func.isRequired,isChecked:a["default"].PropTypes.bool,isDisabled:a["default"].PropTypes.bool,isWaiting:a["default"].PropTypes.bool,labelText:a["default"].PropTypes.string},getDefaultProps:function(){return{isChecked:!1,isDisabled:!1,isWaiting:!1,labelText:""}},render:function(){if(this.props.isWaiting)return n("div",{className:"toggleSwitch u-textAlignCenter"},void 0,n(d["default"],{}));var e=(0,p["default"])("toggleSwitch",{"toggleSwitch--disabled":this.props.isDisabled});return n("div",{className:e},void 0,n("label",{className:"toggleSwitch__container"},void 0,n("input",{type:"checkbox",className:"toggleSwitch__checkbox u-visuallyHidden",id:this.props.switchId,checked:this.props.isChecked,onChange:this.props.changeHandler,disabled:this.props.isDisabled,"aria-label":this.props.labelText}),n("div",{className:"toggleSwitch__label"},void 0,n("span",{className:"toggleSwitch__labelInner","aria-hidden":!0}),n("span",{className:"toggleSwitch__labelSwitch"}))))}})},{"./gr_component_factory":129,"./spinner":209,classnames:"classnames",react:"react"}],216:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=e("../../gr_component_factory"),c=o(d),p=c["default"].createClass({displayName:"MenuListGroup",propTypes:{className:a["default"].PropTypes.string},renderLineItem:function(e,t){var r=(0,u["default"])(this.withBemModifiers("gr-menuListGroup__listItem",this.props.bemModifiers),this.withBemModifiers("gr-menuListGroup__listItem",e.props.bemModifiers));return n("li",{className:r},t,e)},render:function(){var e=this,t=(0,u["default"])(this.withBemModifiers("gr-menuListGroup"),this.props.className);return n("ul",{className:t},void 0,(0,i.map)(a["default"].Children.toArray(this.props.children),function(t,r){return e.renderLineItem(t,r)}))}});r["default"]=p},{"../../gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react"}],217:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../gr_component_factory"),l=o(i),u=l["default"].createClass({displayName:"MenuListItem",propTypes:{primaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),secondaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),actionLabel:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),icon:a["default"].PropTypes.element},getDefaultProps:function(){return{bemModifiers:"default"}},getIcon:function(){return this.props.icon?n("div",{className:"gr-actionMenuItem__icon"},void 0,this.props.icon):void 0},render:function(){return n("div",{className:"gr-actionMenuItem"},void 0,this.getIcon(),n("div",{className:"gr-actionMenuItem__label"},void 0,n("div",{className:this.withBemModifiers("gr-actionMenuItem__primaryText")},void 0,this.props.primaryText),n("div",{className:this.withBemModifiers("gr-actionMenuItem__secondaryText")},void 0,this.props.secondaryText)),n("div",{className:this.withBemModifiers("gr-actionMenuItem__action")},void 0,this.props.actionLabel))}});r["default"]=u},{"../../gr_component_factory":129,react:"react"}],218:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../../react_stores/user/preferences/user_preferences_store"),l=o(i),u=e("../../toggle_switch"),d=o(u),c=e("../mobile/menu_list_group"),p=o(c),f=e("../mobile/menu_list_item"),m=o(f),h=e("lodash"),_=o(h),g=e("reflux"),v=o(g),y=e("../../../react_actions/user/preferences/user_preferences_actions"),b=o(y);r["default"]=a["default"].createClass({displayName:"UserPreferencesDeals",mixins:[v["default"].connect(l["default"],"userPreferencesStore")],togglePreference:function(e,t,r,o){var n=this.state.userPreferencesStore,s=_["default"].merge({},n.preferences.deals),a=s[e];o.target.checked?(_["default"].includes(a,t)||(_["default"].isEmpty(a)?a=[t]:a.push(t)),s[e]=a):_["default"].pull(a,t),b["default"].updatePreferences(s,i.PREF_TYPES.DEALS,r)},toggleEventsSubscription:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.EVENTS,e,t)},toggleWTRDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.WTR,e,t)},toggleAuthorsDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.AUTHOR,e,t)},toggleGenresDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.GENRE,e,t)},toggleGenre:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.GENRE_URIS,e,t,r)},toggleRetailer:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.RETAILERS,e,t,r)},isDisabled:function(e){return _["default"].include(this.state.userPreferencesStore.status.deals.disabledPreferences,e)},isWaiting:function(e){return _["default"].contains(this.state.userPreferencesStore.status.deals.waiting,e)},renderGenres:function(e){var t=this,r=this.state.userPreferencesStore.preferences.deals.deal_genre_uris,o=function(e){return!_["default"].isEmpty(r)&&1===r.length&&r[0]===e},s=_["default"].map(e,function(e){var s=t.isDisabled(i.DEAL_PREF_TYPES.GENRE_URIS)||o(e.uri),a=_["default"].includes(r,e.uri),l=e.name.text,u="genre-"+_["default"].last(e.uri.split(".")),c=n(d["default"],{isChecked:a,changeHandler:function(r){t.toggleGenre(e.uri,u,r)},isDisabled:s,labelText:l,switchId:u});return n(m["default"],{primaryText:l,actionLabel:c},e.uri)});return _["default"].isEmpty(s)||s.push(n(m["default"],{secondaryText:"More genres coming soon!"},"genre-moreGenresSoon")),n(p["default"],{className:"u-noTopPadding u-noBottomPadding"},"genre-toggles",s)},renderEventsSubscription:function(){var e=this,t=_["default"].includes(this.state.userPreferencesStore.preferences.deals.deal_types,i.DEAL_TYPES.EVENTS),r="events",o=n(d["default"],{isChecked:t,changeHandler:function(t){e.toggleEventsSubscription(r,t)},labelText:"Toggle events",switchId:r});return n(m["default"],{primaryText:"Deals Events",secondaryText:"Email me deals on top-rated ebooks",actionLabel:o},r)},renderRetailers:function(e){var t=this,r=this.isDisabled(i.DEAL_PREF_TYPES.RETAILERS),o=this.state.userPreferencesStore,s=o.preferences.deals.retailers,a=function(e){return 1===s.length?s[0]==e.id:!1},l=_["default"].map(e,function(e){var o=r||a(e),i=_["default"].includes(s,e.id),l=e.title,u="retailer-"+e.id,c=n(d["default"],{isChecked:i,changeHandler:function(r){t.toggleRetailer(e.id,u,r)},isDisabled:o,labelText:l,switchId:u});return n(m["default"],{primaryText:l,actionLabel:c},e.id)});return _["default"].isEmpty(l)?null:[n(m["default"],{primaryText:"Retailers",secondaryText:"Send me deals from the following retailers:"},"retailers"),n(p["default"],{className:"u-noTopPadding u-noBottomPadding"},"retailers-group",l)]},renderDealTypes:function(e){var t=this,r=this.state.userPreferencesStore;return _["default"].map(e,function(e){var o=void 0,s=void 0,a=void 0;if(e.id===i.DEAL_TYPES.GENRE){var l=_["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.GENRE);o=e.title,a="dealType-"+i.DEAL_TYPES.GENRE,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleGenresDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.GENRE),labelText:o,switchId:a})}else if(e.id===i.DEAL_TYPES.WTR){var l=_["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.WTR);o=e.title,a="dealType-"+i.DEAL_TYPES.WTR,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleWTRDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.WTR),labelText:o,switchId:a})}else if(e.id===i.DEAL_TYPES.AUTHOR){var l=_["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.AUTHOR);o=e.title,a="dealType-"+i.DEAL_TYPES.AUTHOR,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleAuthorsDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.AUTHOR),labelText:o,switchId:a})}return n(m["default"],{primaryText:o,secondaryText:e.blurb,actionLabel:s},e.id)})},render:function(){return n("div",{className:"accountSettingsPage__section"},void 0,n(p["default"],{},void 0,this.renderDealTypes(this.props.dealsOptions.types),this.renderGenres(this.props.dealsOptions.genres),this.renderEventsSubscription(),this.renderRetailers(this.props.dealsOptions.retailers)))}})},{"../../../react_actions/user/preferences/user_preferences_actions":53,"../../../react_stores/user/preferences/user_preferences_store":277,"../../gr_component_factory":129,"../../toggle_switch":215,"../mobile/menu_list_group":216,"../mobile/menu_list_item":217,lodash:"lodash",reflux:"reflux"}],219:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../../modules/user/friend_status_values"),p=e("../../react_actions/user/user_follow_actions"),f=o(p),m=e("../../react_stores/user/user_follow_store"),h=o(m);r["default"]=l["default"].createClass({displayName:"UserFollowWidget",mixins:[a["default"].connectFilter(h["default"],"userFollowStore",function(e){return e[this.props.displayUser.id]})],propTypes:{displayUser:d["default"].user().isRequired},renderFollowStatus:function(){var e=this,t=this.state.userFollowStore;if(t.isFollowing){var r=this.props.displayUser.firstName||this.props.displayUser.viewableName;return n("div",{className:"gr-box gr-box--inline gr-box--marginRightSmall"},void 0,"You are following ",r,".")}return n("button",{className:"gr-button gr-button--small gr-box gr-box--inline gr-box--marginRightSmall",onClick:function(){return f["default"].follow(e.props.displayUser.id)},disabled:t.buttonEnabled?!1:"disabled"},void 0,"Follow")},renderUnfollowButtonIfNeeded:function(){var e=this,t=this.state.userFollowStore;return t.isFollowing&&t.friendshipStatus!==c.FRIEND_STATUS.REQUEST_PENDING_TO?n("button",{className:"gr-button gr-buttonAsLink gr-buttonAsLink--quiet",onClick:function(){return f["default"].unFollow(e.props.displayUser.id)},disabled:t.buttonEnabled?!1:"disabled"},void 0,n("span",{className:"gr-metaText"},void 0,"Unfollow")):void 0},shouldHideFollowButtons:function(){var e=this.state.userFollowStore;return e.friendshipStatus==c.FRIEND_STATUS.FRIEND||e.friendshipStatus==c.FRIEND_STATUS.SELF||e.isBlocked||!e.allowsFollow},render:function(){return this.shouldHideFollowButtons()?null:n("div",{className:"userFollowWidget"},void 0,this.renderFollowStatus(),this.renderUnfollowButtonIfNeeded())}})},{"../../modules/user/friend_status_values":31,"../../react_actions/user/user_follow_actions":55,"../../react_stores/user/user_follow_store":279,"../gr_component_factory":129,"../shared/gr_prop_types":196,reflux:"reflux"}],220:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shape_icon"),d=o(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"UserIcon",propTypes:{user:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return a["default"].createElement(d["default"],n({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl,border:!0},this.props))}})},{"../../modules/shape_icon_values":27,"../gr_component_factory":129,"../shape_icon":191,react:"react"}],221:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0
});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./user_icon"),d=o(u),c={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r["default"]=l["default"].createClass({displayName:"UserIconList",propTypes:{users:a["default"].PropTypes.array.isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.SMALL,c.MEDIUM,c.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.SMALL}},render:function(){var e=this,t=[];return this.props.users.forEach(function(r){t.push(n(d["default"],{user:r,size:e.props.size,includeLink:e.props.includeLink},r.profileImage))}),n("div",{},void 0,t)}})},{"../gr_component_factory":129,"./user_icon":220,react:"react"}],222:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("classnames"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),p=o(c),f=e("../click_tracking_wrapper"),m=o(f),h=e("../../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserProfileLink",propTypes:{user:p["default"].user().isRequired,className:a["default"].PropTypes.string},userName:function(){return{__html:this.props.user.viewableName}},render:function(){var e=(0,l["default"])("gr-hyperlink","gr-hyperlink--bold","gr-user__profileLink",this.props.className),t=n("a",{className:e,href:this.props.user.profileUrl,dangerouslySetInnerHTML:this.userName()});return this.props.user.profileUrl?n(m["default"],{children:t,trackingOptions:h.TRACKED_CLASSES.user_profile}):n("b",{},void 0,this.props.user.viewableName)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":82,"../gr_component_factory":129,"../shared/gr_prop_types":196,classnames:"classnames",react:"react"}],223:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../shared/gr_spoiler_handler"),p=o(c),f=e("classnames"),m=o(f);r["default"]=l["default"].createClass({displayName:"ExpandableHtml",propTypes:d["default"].expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!a["default"].isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&this.state.expanded!==!0?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,m["default"])("gr-buttonAsLink","u-marginLeftTiny");return n("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&p["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&p["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(a["default"].isEmpty(this.props.html))return null;var e=(0,m["default"])("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},n("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":129,"../shared/gr_prop_types":196,"../shared/gr_spoiler_handler":197,classnames:"classnames",lodash:"lodash"}],224:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return n("button",{className:"gr-buttonAsLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:n("span",{},void 0,this.renderUnhideButton())},render:function(){return n("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":129}],225:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"Spoiler",propTypes:{html:a["default"].PropTypes.string,spoilerWarning:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element])},componentWillMount:function(){if(null===this.props.html&&null===this.props.children)throw new Error("props.children and props.html cannot both be null")},getDefaultProps:function(){return{html:null,spoilerWarning:null}},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},getSpoilerHtml:function(){return{__html:this.props.html}},renderSpoiler:function(){return this.props.html?n("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:this.getSpoilerHtml()}):this.props.children},render:function(){return n("span",{},void 0,this.state.showSpoiler?n("span",{className:"spoiler__textContainer"},void 0,this.renderSpoiler(),n("button",{className:"gr-buttonAsLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):n("span",{},void 0,this.props.spoilerWarning,n("button",{className:"gr-buttonAsLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)")))}})},{"../gr_component_factory":129,react:"react"}],226:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("../../modules/string_helper"),u=e("pluralize"),d=o(u);r["default"]=i["default"].createClass({displayName:"StringCounter",propTypes:{counterType:s.PropTypes.oneOf(["character","word"]).isRequired,maxLength:s.PropTypes.number.isRequired,text:s.PropTypes.string.isRequired,warnLength:s.PropTypes.number},renderWarning:function(e){var t=void 0;return 0>e&&(t="gr-smallAlert"),n("span",{className:t,role:"alert"},void 0,e," ",(0,d["default"])(this.props.counterType,e)," left")},countType:function(){return"character"===this.props.counterType?(0,l.astralLength)(this.props.text):"word"===this.props.counterType?(0,l.countWords)(this.props.text):null},render:function(){var e=this.countType(this.props.text),t=this.props.maxLength-e,r=this.props.warnLength?t<=this.props.warnLength:!0;return r?n("div",{},void 0,this.renderWarning(t)):null}})},{"../../modules/string_helper":29,"../gr_component_factory":129,pluralize:"pluralize",react:"react"}],227:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("../shared/gr_spoiler_handler"),d=o(u),c=e("../click_tracking_wrapper"),p=o(c),f=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"TruncatedHtml",propTypes:l["default"].truncatedHtml(),getDefaultProps:function(){return{fullContentText:"More",bookDescriptionTargetingData:f.TRACKED_CLASSES.full_content_link}},componentDidMount:function(){d["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){var e=n("a",{className:"u-marginLeftTiny fullContentLink",href:this.props.fullContentUrl},void 0,this.props.fullContentText);return React.createElement("div",{ref:"rootNode",className:this.props.className},n("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?n(p["default"],{children:e,trackingOptions:this.props.bookDescriptionTargetingData}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":82,"../gr_component_factory":129,"../shared/gr_prop_types":196,"../shared/gr_spoiler_handler":197}],228:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("classnames"),p=o(c),f=e("../react_actions/shelvings_actions"),m=o(f),h=e("../react_stores/shelvings_store"),_=o(h),g=e("./click_tracking_wrapper"),v=o(g),y=e("../react_mixins/gr_reflux"),b=e("../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserRating",mixins:[(0,y.connectToLazyStore)(_["default"],"bookId")],propTypes:{bookId:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,starsTrackingOptions:a["default"].PropTypes.object},getDefaultProps:function(){return{starsTrackingOptions:b.TRACKED_CLASSES.user_rating_star}},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?m["default"].rateBook(this.state.book.bookId,e,this.state.book.title):m["default"].rateBook(this.props.bookId,e,this.props.bookTitle),this.refs.ratingContainer.focus()},starLabel:function S(e){var S=void 0;return S=null!==this.state.exclusiveShelfName&&this.state.rating>0?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ",S+=1==e?"star":"stars"},renderStar:function(e){var t=e+1,r=null!==this.state.exclusiveShelfName?this.state.rating:0,o=this.state.hoverRating?this.state.hoverRating:r,s=(0,p["default"])({userRating__star:!0,"userRating__star--selected":o>=t}),a=n("button",{className:s,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)});return n(v["default"],{children:a,trackingOptions:this.props.starsTrackingOptions},t)},renderTextLabel:function(){return n("small",{className:"userRating__label"},void 0,null!==this.state.exclusiveShelfName&&this.state.rating>0?"My rating:":"Rate it:")},render:function(){return n("div",{className:"userRating"},void 0,this.renderTextLabel(),a["default"].createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},l["default"].times(5,function(e){return this.renderStar(e)},this)))}})},{"../modules/ads/click_tracking_helper":3,"../react_actions/shelvings_actions":51,"../react_mixins/gr_reflux":255,"../react_stores/shelvings_store":275,"./click_tracking_wrapper":82,"./gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react"}],229:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("../../modal"),u=o(l),d=e("../../../react_actions/user/show/block_user_actions"),c=o(d),p=e("../../../modules/modal_id_helper");r["default"]=i["default"].createClass({displayName:"BlockUserConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool,isBlocked:s.PropTypes.bool.isRequired},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmBlockUser:function(){c["default"].blockMember(this.props.displayUser.userId)},render:function(){return this.props.isBlocked?n(u["default"],{id:(0,p.getUnblockUserModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmBlockUser},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unblock ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"Your profile will appear to ",this.props.displayUser.firstName," as it would to any other Goodreads member. Their comments on discussion boards will be displayed normally. Are you sure?"))):n(u["default"],{id:(0,p.getBlockUserModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmBlockUser},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Block ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will prevent ",this.props.displayUser.firstName," from sending you messages, friend request or from viewing your profile. ",this.props.displayUser.firstName," will not be notified. Comments on discussion boards from ",this.props.displayUser.firstName," will be hidden by default.")))}})},{"../../../modules/modal_id_helper":25,"../../../react_actions/user/show/block_user_actions":54,"../../gr_component_factory":129,"../../modal":167,react:"react"}],230:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("../../modal"),u=o(l),d=e("../../../react_actions/user_relationships/friend_follow_actions"),c=o(d),p=e("../../../modules/modal_id_helper");r["default"]=i["default"].createClass({displayName:"CancelFriendRequestConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool,friendRequestToId:s.PropTypes.number.isRequired},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmCancelFriendRequest:function(){c["default"].cancelFriendRequest(this.props.friendRequestToId)},render:function(){return n(u["default"],{id:(0,p.getCancelFriendRequestModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmCancelFriendRequest},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Cancel Friend Request to ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will cancel your friend request and also unfollow ",this.props.displayUser.firstName,", removing their activity from your updates feed.")))}})},{"../../../modules/modal_id_helper":25,"../../../react_actions/user_relationships/friend_follow_actions":58,"../../gr_component_factory":129,"../../modal":167,react:"react"}],231:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("../../modal"),u=o(l),d=e("../../../react_actions/user_relationships/friend_follow_actions"),c=o(d),p=e("../../../modules/modal_id_helper");r["default"]=i["default"].createClass({displayName:"UnfollowConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmUnfollow:function(){c["default"].unfollow(this.props.displayUser.userId)},render:function(){return n(u["default"],{id:(0,p.getUnfollowModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmUnfollow},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unfollow ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will remove ",this.props.displayUser.firstName,"'s activity from your updates feed.")))}})},{"../../../modules/modal_id_helper":25,"../../../react_actions/user_relationships/friend_follow_actions":58,"../../gr_component_factory":129,"../../modal":167,react:"react"}],232:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("../../modal"),u=o(l),d=e("../../../react_actions/user_relationships/friend_follow_actions"),c=o(d),p=e("../../../modules/modal_id_helper");r["default"]=i["default"].createClass({displayName:"UnfriendConfirmationModal",propTypes:{displayUser:s.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,fromDropdown:s.PropTypes.bool},getDefaultProps:function(){return{fromDropdown:!1}},handleConfirmUnfriend:function(){c["default"].unfriend(this.props.displayUser.userId)},render:function(){return n(u["default"],{id:(0,p.getUnfriendModalId)(this.props.displayUser.userId,this.props.fromDropdown),bemModifiers:"friendFollowModule",onConfirmHandler:this.handleConfirmUnfriend},void 0,n("div",{className:"friendFollowConfirmModal"},void 0,n("h2",{className:"gr-h2 gr-h2--serif"},void 0,"Unfriend ",this.props.displayUser.viewableName,"?"),n("div",{className:"friendFollowConfirmModal__body"},void 0,"This will remove ",this.props.displayUser.firstName,"'s activity from your updates feed, and your own activity will stop appearing in their updates feed. ",this.props.displayUser.firstName," will not be notified.")))}})},{"../../../modules/modal_id_helper":25,"../../../react_actions/user_relationships/friend_follow_actions":58,"../../gr_component_factory":129,"../../modal":167,react:"react"}],233:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_actions/user_relationships/friend_follow_actions"),d=o(u),c=e("./confirmation_modals/unfollow_confirmation_modal"),p=o(c),f=e("./confirmation_modals/cancel_friend_request_confirmation_modal"),m=o(f),h=e("../../modules/modal_id_helper"),_=e("../modal_trigger"),g=o(_);r["default"]=l["default"].createClass({displayName:"FollowButton",propTypes:{displayUser:a["default"].PropTypes.shape({firstName:a["default"].PropTypes.string.isRequired,viewableName:a["default"].PropTypes.string.isRequired,userId:a["default"].PropTypes.number.isRequired}).isRequired,isFollowing:a["default"].PropTypes.bool.isRequired,isPendingFriendRequestTo:a["default"].PropTypes.bool.isRequired,friendRequestToId:a["default"].PropTypes.number,fromUserShowPage:a["default"].PropTypes.bool},getInitialState:function(){return{isHovering:!1}},getDefaultProps:function(){return{fromUserShowPage:!1}},handleMouseEnter:function(){this.setState({isHovering:!0})},handleMouseLeave:function(){this.setState({isHovering:!1})},handleFollow:function(){d["default"].follow(this.props.displayUser.userId,{from_user_show_page:this.props.fromUserShowPage})},renderFollowButton:function(){return n("button",{className:"friendFollowButton friendFollowButton--dark",onClick:this.handleFollow,type:"button"},void 0,"Follow")},renderUnfollowButton:function(){var e=this.state.isHovering?"Unfollow":n("span",{},void 0,n("div",{className:"u-inlineBlock friendFollowCheckmark"}),"Following"),t=void 0,r=void 0;return this.props.isPendingFriendRequestTo&&this.props.friendRequestToId?(t=n(m["default"],{displayUser:this.props.displayUser,friendRequestToId:this.props.friendRequestToId}),r=(0,h.getCancelFriendRequestModalId)(this.props.displayUser.userId)):(t=n(p["default"],{displayUser:this.props.displayUser}),r=(0,h.getUnfollowModalId)(this.props.displayUser.userId)),n("div",{className:"u-inlineBlock"},void 0,n(g["default"],{id:r},void 0,n("button",{className:"friendFollowButton",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,type:"button"},void 0,e)),t)},render:function(){return this.props.isFollowing?this.renderUnfollowButton():this.renderFollowButton()}})},{"../../modules/modal_id_helper":25,"../../react_actions/user_relationships/friend_follow_actions":58,"../gr_component_factory":129,"../modal_trigger":168,"./confirmation_modals/cancel_friend_request_confirmation_modal":230,"./confirmation_modals/unfollow_confirmation_modal":231,react:"react"}],234:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u),c=e("./confirmation_modals/unfriend_confirmation_modal"),p=o(c),f=e("../../react_actions/user_relationships/friend_follow_actions"),m=o(f),h=e("../../modules/modal_id_helper");r["default"]=l["default"].createClass({displayName:"FriendButton",propTypes:{displayUser:a["default"].PropTypes.shape({firstName:a["default"].PropTypes.string.isRequired,viewableName:a["default"].PropTypes.string.isRequired,userId:a["default"].PropTypes.number.isRequired}).isRequired,addFriendUrl:a["default"].PropTypes.string.isRequired,isFriend:a["default"].PropTypes.bool.isRequired,isPendingFriendRequestFrom:a["default"].PropTypes.bool.isRequired,isPendingFriendRequestTo:a["default"].PropTypes.bool.isRequired,friendRequestFromId:a["default"].PropTypes.number},getInitialState:function(){return{isHovering:!1}},handleMouseEnter:function(){this.setState({isHovering:!0})},handleMouseLeave:function(){this.setState({isHovering:!1})},handleAcceptFriendRequest:function(){m["default"].acceptFriendRequest(this.props.friendRequestFromId)},renderFriendButton:function(){return this.props.isPendingFriendRequestFrom&&this.props.friendRequestFromId?n("button",{className:"friendFollowButton",onClick:this.handleAcceptFriendRequest,type:"button"},void 0,"Accept request"):this.props.isPendingFriendRequestTo?n("button",{className:"friendFollowButton",type:"button",disabled:!0},void 0,"Pending"):n("a",{className:"friendFollowButton",href:this.props.addFriendUrl},void 0,"Add friend")},renderUnfriendButton:function(){var e=this.state.isHovering?"Unfriend":n("span",{},void 0,n("div",{className:"u-inlineBlock friendFollowCheckmark"}),"Friends");return n("div",{className:"u-inlineBlock"},void 0,n(d["default"],{id:(0,h.getUnfriendModalId)(this.props.displayUser.userId)},void 0,n("button",{className:"friendFollowButton",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,type:"button"},void 0,e)),n(p["default"],{displayUser:this.props.displayUser}))},render:function(){return this.props.isFriend?this.renderUnfriendButton():this.renderFriendButton()}})},{"../../modules/modal_id_helper":25,"../../react_actions/user_relationships/friend_follow_actions":58,"../gr_component_factory":129,"../modal_trigger":168,"./confirmation_modals/unfriend_confirmation_modal":232,react:"react"}],235:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/user_relationships/friend_follow_module_store"),d=o(u),c=e("../../react_stores/user/show/block_user_store"),p=o(c),f=e("../dropdown"),m=o(f),h=e("../modal_trigger"),_=o(h),g=e("./confirmation_modals/cancel_friend_request_confirmation_modal"),v=o(g),y=e("./confirmation_modals/unfriend_confirmation_modal"),b=o(y),S=e("./confirmation_modals/unfollow_confirmation_modal"),k=o(S),T=e("./confirmation_modals/block_user_confirmation_modal"),P=o(T),w=e("../../modules/modal_id_helper");r["default"]=l["default"].createClass({displayName:"FriendFollowDropdown",mixins:[a["default"].connect(d["default"],"ffStore"),a["default"].connect(p["default"],"buStore")],propTypes:{displayUser:React.PropTypes.shape({firstName:React.PropTypes.string.isRequired,viewableName:React.PropTypes.string.isRequired,userId:React.PropTypes.number.isRequired}).isRequired,sendMessageUrl:React.PropTypes.string.isRequired,recommendBooksUrl:React.PropTypes.string.isRequired,compareBooksUrl:React.PropTypes.string.isRequired,suggestFriendsUrl:React.PropTypes.string.isRequired,addFriendUrl:React.PropTypes.string.isRequired,renderFriendButton:React.PropTypes.bool.isRequired,friendButtonInDropdown:React.PropTypes.bool.isRequired,friendRequestToId:React.PropTypes.number},renderRecommendBooksLink:function(){return this.state.ffStore.isFriend?n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.recommendBooksUrl,rel:"nofollow","data-testid":"recommendBooks"},void 0,"Recommend books"):void 0},shouldRenderCancelFriendRequestModal:function(){return this.state.ffStore.isFollowing&&this.state.ffStore.isPendingFriendRequestTo&&this.props.friendRequestToId},shouldRenderUnfollowModal:function(){return this.state.ffStore.isFollowing&&!this.state.ffStore.isPendingFriendRequestTo},renderFollowingLinks:function(){return this.shouldRenderCancelFriendRequestModal()?n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(_["default"],{id:(0,w.getCancelFriendRequestModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"cancelFriendRequest"},void 0,"Cancel friend request"))):this.shouldRenderUnfollowModal()?n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(_["default"],{id:(0,w.getUnfollowModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"unfollow"},void 0,"Unfollow"))):void 0},shouldRenderUnfriendModal:function(){return this.state.ffStore.isFriend},renderFriendLinks:function(){return this.state.ffStore.isFriend?n("div",{},void 0,n("a",{
className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.suggestFriendsUrl,"data-testid":"suggestFriends"},void 0,"Suggest friends"),n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(_["default"],{id:(0,w.getUnfriendModalId)(this.props.displayUser.userId,!0)},void 0,n("button",{className:"gr-buttonAsLink gr-buttonAsLink--black",type:"button","data-testid":"unfriend"},void 0,"Unfriend ",this.props.displayUser.firstName)))):this.props.friendButtonInDropdown&&this.props.renderFriendButton&&!this.state.ffStore.isPendingFriendRequestTo?n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.addFriendUrl,rel:"nofollow","data-testid":"addFriend"},void 0,"Add friend"):void 0},renderBlockUserLink:function(){var e=void 0;e=this.state.buStore.isBlocked?"Unblock":"Block this user";var t=this.state.buStore.isBlocked?(0,w.getUnblockUserModalId)(this.props.displayUser.userId,!0):(0,w.getBlockUserModalId)(this.props.displayUser.userId,!0);return n("div",{className:"friendFollowModuleDropdownMenu__dropdownLink"},void 0,n(_["default"],{id:t},void 0,n("button",{className:"gr-buttonAsLink friendFollowModule__blockedUserText friendFollowModule__blockedUserText--red",type:"button","data-testid":"blockUser"},void 0,e)))},renderDropdownList:function(){return n("div",{className:"friendFollowModuleDropdownMenu"},void 0,n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.sendMessageUrl,rel:"nofollow","data-testid":"message"},void 0,"Message"),this.renderRecommendBooksLink(),n("a",{className:"friendFollowModuleDropdownMenu__dropdownLink",href:this.props.compareBooksUrl,rel:"nofollow","data-testid":"compareBooks"},void 0,"Compare books"),this.renderFollowingLinks(),this.renderFriendLinks(),this.renderBlockUserLink())},renderDropdownTrigger:function(){return n("div",{},void 0,n("span",{className:"friendFollowModuleCaret__text"},void 0,"More"),n("div",{className:"friendFollowModuleCaret__image"}))},render:function(){return n("div",{className:"friendFollowModuleCaret"},void 0,n(m["default"],{trigger:this.renderDropdownTrigger(),triggerEventType:m["default"].TriggerEventTypes.CLICK,tooltipText:"More",bemModifiers:"friendFollowModule",children:this.renderDropdownList()}),this.shouldRenderCancelFriendRequestModal()&&n(v["default"],{displayUser:this.props.displayUser,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestToId:this.props.friendRequestToId,fromDropdown:!0}),this.shouldRenderUnfollowModal()&&n(k["default"],{displayUser:this.props.displayUser,fromDropdown:!0}),this.shouldRenderUnfriendModal()&&n(b["default"],{displayUser:this.props.displayUser,fromDropdown:!0}),n(P["default"],{displayUser:this.props.displayUser,isBlocked:this.state.buStore.isBlocked,fromDropdown:!0}))}})},{"../../modules/modal_id_helper":25,"../../react_stores/user/show/block_user_store":278,"../../react_stores/user_relationships/friend_follow_module_store":282,"../dropdown":112,"../gr_component_factory":129,"../modal_trigger":168,"./confirmation_modals/block_user_confirmation_modal":229,"./confirmation_modals/cancel_friend_request_confirmation_modal":230,"./confirmation_modals/unfollow_confirmation_modal":231,"./confirmation_modals/unfriend_confirmation_modal":232,reflux:"reflux"}],236:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("classnames"),d=o(u),c=e("../gr_component_factory"),p=o(c),f=e("./follow_button"),m=o(f),h=e("./friend_button"),_=o(h),g=e("./friend_follow_dropdown"),v=o(g),y=e("../spinner"),b=o(y),S=e("../modal_trigger"),k=o(S),T=e("./confirmation_modals/block_user_confirmation_modal"),P=o(T),w=e("../../modules/modal_id_helper"),N=e("../../react_stores/user_relationships/friend_follow_module_store"),R=o(N),M=e("../../react_stores/user/show/block_user_store"),C=o(M);r["default"]=p["default"].createClass({displayName:"FriendFollowModule",mixins:[l["default"].connect(R["default"],"ffStore"),l["default"].connect(C["default"],"buStore")],propTypes:{displayUser:a["default"].PropTypes.shape({firstName:a["default"].PropTypes.string.isRequired,viewableName:a["default"].PropTypes.string.isRequired,userId:a["default"].PropTypes.number.isRequired}).isRequired,hideDropdown:a["default"].PropTypes.bool.isRequired,sendMessageUrl:a["default"].PropTypes.string.isRequired,recommendBooksUrl:a["default"].PropTypes.string.isRequired,compareBooksUrl:a["default"].PropTypes.string.isRequired,suggestFriendsUrl:a["default"].PropTypes.string.isRequired,addFriendUrl:a["default"].PropTypes.string.isRequired,friendRequestToId:a["default"].PropTypes.number,friendRequestFromId:a["default"].PropTypes.number,renderFollowButton:a["default"].PropTypes.bool.isRequired,renderFriendButton:a["default"].PropTypes.bool.isRequired,friendButtonInDropdown:a["default"].PropTypes.bool.isRequired,fromUserShowPage:a["default"].PropTypes.bool},getDefaultProps:function(){return{fromUserShowPage:!1}},shouldRenderFriendButton:function(){return this.props.renderFriendButton&&!this.props.friendButtonInDropdown},shouldRenderFollowButton:function(){return this.props.renderFollowButton&&!this.state.ffStore.isFriend},render:function(){if(this.state.ffStore.inProgress||this.state.buStore.blockInProgress)return n("div",{className:"u-clearBoth"},void 0,n(b["default"],{}));var e=(0,d["default"])("u-inlineBlock",{"u-marginRightMedium":this.shouldRenderFriendButton()});return n("div",{className:"friendFollowModule"},void 0,this.state.buStore.isBlocked&&n("div",{className:"friendFollowModule__blockedUserText","data-testid":"blockText"},void 0,"You've blocked ",this.props.displayUser.firstName,".",n("div",{className:"friendFollowModule__blockedUserTextTrigger"},void 0,n(k["default"],{id:(0,w.getUnblockUserModalId)(this.props.displayUser.userId)},void 0,n("button",{className:"gr-buttonAsLink friendFollowModule__blockedUserText friendFollowModule__blockedUserText--red",type:"button"},void 0,"Unblock")),n(P["default"],{isBlocked:this.state.buStore.isBlocked,displayUser:this.props.displayUser,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo}))),n("div",{className:"u-marginAuto"},void 0,this.shouldRenderFollowButton()&&n("div",{className:e},void 0,n(m["default"],{displayUser:this.props.displayUser,isFollowing:this.state.ffStore.isFollowing,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestToId:this.props.friendRequestToId,fromUserShowPage:this.props.fromUserShowPage})),this.shouldRenderFriendButton()&&n(_["default"],{displayUser:this.props.displayUser,addFriendUrl:this.props.addFriendUrl,isFriend:this.state.ffStore.isFriend,isPendingFriendRequestFrom:this.state.ffStore.isPendingFriendRequestFrom,isPendingFriendRequestTo:this.state.ffStore.isPendingFriendRequestTo,friendRequestFromId:this.props.friendRequestFromId}),!this.props.hideDropdown&&a["default"].createElement(v["default"],this.props)))}})},{"../../modules/modal_id_helper":25,"../../react_stores/user/show/block_user_store":278,"../../react_stores/user_relationships/friend_follow_module_store":282,"../gr_component_factory":129,"../modal_trigger":168,"../spinner":209,"./confirmation_modals/block_user_confirmation_modal":229,"./follow_button":233,"./friend_button":234,"./friend_follow_dropdown":235,classnames:"classnames",react:"react",reflux:"reflux"}],237:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.ALWAYS_DISPLAY_STARS_PROP=void 0;var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../../react_mixins/gr_reflux"),p=e("../../modules/ads/click_tracking_helper"),f=e("../../modules/default_shelves"),m=e("classnames"),h=o(m),_=e("../../react_stores/shelvings_store"),g=o(_),v=e("../../react_stores/user_shelves_store"),y=o(v),b=e("../../react_stores/want_to_read_menu_store"),S=o(b),k=e("../../react_actions/want_to_read_menu_actions"),T=o(k),P=e("../../react_stores/user_agent_capabilities_store"),w=o(P),N=e("../../react_actions/shelvings_actions"),R=o(N),M=e("../dropdown"),C=o(M),A=e("../modal"),x=o(A),I=e("../modal_trigger"),L=o(I),U=e("../../react_actions/modal_actions"),E=o(U),O=e("../../react_stores/modal_store"),D=o(O),B=e("../want_to_read/want_to_read_menu"),F=o(B),j=e("../user_rating"),q=o(j),H="Saving…",G=r.ALWAYS_DISPLAY_STARS_PROP="ALWAYS_DISPLAY_STARS_PROP";r["default"]=l["default"].createClass({displayName:"WantToReadButton",propTypes:{bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,showStars:a["default"].PropTypes.oneOfType([a["default"].PropTypes.bool,a["default"].PropTypes.string]),showMenu:a["default"].PropTypes.bool,origin:a["default"].PropTypes.string,trackingOptions:a["default"].PropTypes.object,starsTrackingOptions:a["default"].PropTypes.object,withModalShelvingMenu:a["default"].PropTypes.bool},mixins:[(0,c.connectToLazyStore)(g["default"],"bookId",{stateKey:"shelvings"}),(0,c.connectToLazyStore)(S["default"],"uniqueId",{stateKey:"wantToReadMenu"}),d["default"].connect(y["default"],"userShelves"),d["default"].connect(w["default"],"userAgentCapabilities"),d["default"].connect(D["default"],"modalStore")],getDefaultProps:function(){return{showStars:!1,showMenu:!0,trackingOptions:p.TRACKED_CLASSES.want_to_read_button,withModalShelvingMenu:!1}},shelveBook:function(){R["default"].shelveBook(this.props.bookId,y["default"].defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&R["default"].unshelveBook(this.state.shelvings.book.bookId)},focusButton:function(e){e&&this.restoreFocusOnUpdate&&!this.state.isShelvingInProgress&&(this.forgetFocus(),e.focus())},rememberFocus:function(){this.restoreFocusOnUpdate=!0},forgetFocus:function(){this.restoreFocusOnUpdate=!1},checkmarkClass:function(){return(0,f.checkIconClassnames)(this.state.shelvings.exclusiveShelfName)},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},getBookId:function(){return this.unshelved()?this.props.bookId:this.state.shelvings.book.bookId},getBookTitle:function(){return this.unshelved()?this.props.bookTitle:this.state.shelvings.book.title},renderWantToReadLeftUnshelved:function(){var e=this.state.shelvings.isShelvingInProgress?H:"Want to Read",t=(0,h["default"])("wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),r="Add "+this.props.bookTitle+" to your want to read shelf";return a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,className:t,onClick:this.shelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus},e)},renderWantToReadLeftShelved:function(){var e=(0,h["default"])("wantToReadButton__leftShelvedButton"),t=(0,h["default"])({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),r="Remove "+this.state.shelvings.book.title+" from my shelves",o=this.state.shelvings.isShelvingInProgress?H:this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?a["default"].createElement("button",{"aria-label":r,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,ref:this.focusButton,className:e},n("span",{className:t+" u-inlineBlock"}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o)):n("span",{},void 0,a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,className:e+" "+t}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o))},renderWantToReadRight:function(){var e=this.getBookId(),t=this.getBookTitle(),r=["wantToReadMenu"];return this.props.withModalShelvingMenu&&r.push("wtrMenuToggleDropdown"),this.props.showMenu&&!this.isWTRModalOpen()?n(C["default"],{trigger:this.renderWantToReadRightButtonContents(),triggerEventType:C["default"].TriggerEventTypes.HOVER,bemModifiers:r},void 0,n(F["default"],{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},getModalId:function(){return"wtrModal"+this.getBookId()},isWTRModalOpen:function(){return this.state.modalStore.currentActiveModal&&this.state.modalStore.currentActiveModal===this.getModalId()},renderModal:function(){var e=this,t=this.getBookId(),r=this.getBookTitle();if(this.props.showMenu&&this.props.withModalShelvingMenu){var o=(0,h["default"])("wtrModalContainer",{wtrMenuToggleModal:!this.isWTRModalOpen()});return n("div",{className:o},void 0,n(L["default"],{id:this.getModalId()},void 0,n("button",{type:"button",className:"wtrModalContainer__trigger"},void 0,this.renderWantToReadRightButtonContents())),n(x["default"],{id:this.getModalId(),centered:!0,onCloseHandler:function(){return T["default"].closeAddShelfTextbox(e.props.uniqueId)}},void 0,n("div",{className:"wtrModal"},void 0,n("h3",{className:"gr-h3 gr-h3--serif gr-h3--noMargin u-paddingBottomXSmall"},void 0,"Shelve ",this.props.bookTitle),n(F["default"],{uniqueId:this.props.uniqueId,bookId:t,bookTitle:r,userShelves:this.state.userShelves,shelvings:this.state.shelvings,useModalView:!0,bemModifiers:"modalView"})),!this.state.wantToReadMenu.showAddShelfTextbox&&n("button",{type:"button",className:"gr-button wtrModal__closeButton","aria-label":"Close want to read menu",onClick:E["default"].closeModal},void 0,"Done")))}return null},renderWantToReadRightButtonContents:function(){return n("div",{className:"wantToReadButton__right"},void 0,n("span",{className:"u-visuallyHidden"},void 0,"Shelving menu"))},render:function(){var e="",t=(0,h["default"])("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()});e=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved();var r=(0,h["default"])("wtrStarsContainer",{"wtrStarsContainer--alwaysDisplay":this.props.showStars===G});return n("div",{},void 0,n("div",{className:"wantToReadButton"},void 0,n("div",{className:t},void 0,e),this.renderModal(),this.renderWantToReadRight()),this.props.showStars?n("div",{className:r},void 0,n(q["default"],{bookId:this.props.bookId,starsTrackingOptions:this.props.starsTrackingOptions})):null)}})},{"../../modules/ads/click_tracking_helper":3,"../../modules/default_shelves":20,"../../react_actions/modal_actions":45,"../../react_actions/shelvings_actions":51,"../../react_actions/want_to_read_menu_actions":60,"../../react_mixins/gr_reflux":255,"../../react_stores/modal_store":270,"../../react_stores/shelvings_store":275,"../../react_stores/user_agent_capabilities_store":280,"../../react_stores/user_shelves_store":283,"../../react_stores/want_to_read_menu_store":284,"../dropdown":112,"../gr_component_factory":129,"../modal":167,"../modal_trigger":168,"../user_rating":228,"../want_to_read/want_to_read_menu":238,classnames:"classnames",react:"react",reflux:"reflux"}],238:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../../react_mixins/gr_reflux"),c=e("../../modules/default_shelves"),p=e("../../react_stores/want_to_read_menu_store"),f=o(p),m=e("./want_to_read_menu_filter"),h=o(m),_=e("../../react_actions/shelvings_actions"),g=o(_),v=e("./want_to_read_menu_shelf_creator"),y=o(v),b=e("../spinner"),S=o(b),k=e("classnames"),T=o(k),P=7;r["default"]=u["default"].createClass({displayName:"WantToReadMenu",mixins:[(0,d.connectToLazyStore)(f["default"],"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitle:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired,useModalView:React.PropTypes.bool},defaultPropTypes:function(){return{useModalView:!1}},shelveBook:function(e){g["default"].shelveBook(this.props.bookId,e)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&g["default"].unshelveBook(this.props.bookId)},toggleNonExclusiveShelving:function(e){g["default"].toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitle)},renderFilter:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves),t=e.length>=P;return t?s(h["default"],{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state,bemModifiers:this.props.bemModifiers}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves,t=this.state.displayableNonExclusiveShelves,r=t.concat(e).length;return 0===r?s("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var e=this,t=this.state.displayableExclusiveShelves;return i["default"].map(t,function(t){var r=t.name===e.props.shelvings.exclusiveShelfName,o=t.displayName,n=r?"Unshelve  "+e.props.bookTitle:"Shelve "+e.props.bookTitle+" as "+o,a=(0,T["default"])(e.withBemModifiers("wantToReadMenu__exclusiveShelf"),{"wantToReadMenu__exclusiveShelf--shelved":r}),i=e.props.useModalView?e.renderExclusiveShelfStatusIcon(t):null;return s("li",{className:"wantToReadMenu__shelfItem"},o,s("button",{className:a,"aria-label":n,onClick:function(){r?e.unshelveBook():e.shelveBook(t)}},void 0,i&&s("div",{className:"wantToReadMenu__shelfStatusContainer"},void 0,i),o))})},renderExclusiveShelfStatusIcon:function(e){var t=null,r=e.name===this.props.shelvings.exclusiveShelfName;if(r&&!this.props.shelvings.isShelvingInProgress){var o=(0,T["default"])("wantToReadButton__checkIcon","wantToReadButton__checkIcon--modalView",(0,c.checkIconClassnames)(this.props.shelvings.exclusiveShelfName));t=s("span",{className:o})}else this.props.shelvings.isShelvingInProgress&&(!this.props.shelvings.targetExclusiveShelfName&&r||this.props.shelvings.targetExclusiveShelfName===e.name)&&(t=s(S["default"],{isSmall:!0}));return t},renderNonExclusiveShelves:function(){var e=this,t=this.state.displayableNonExclusiveShelves;return i["default"].map(t,function(t){var r=!1;null!==e.props.shelvings.exclusiveShelfName&&i["default"].includes(e.props.shelvings.nonExclusiveShelfNames,t.name)&&(r=!0);var o=t.displayName,n="Shelve "+e.props.bookTitle+" as "+o,a=e.withBemModifiers("wantToReadMenu__nonExclusiveShelf");return s("li",{className:"wantToReadMenu__shelfItem"},o,s("label",{className:a},void 0,s("input",{className:"wantToReadMenu__shelfCheckbox",checked:r,type:"checkbox",name:"shelf["+t.name+"]","aria-label":n,onChange:function(){e.toggleNonExclusiveShelving(t)}}),o))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=i["default"].map(e,function(e){return e.name}),r=!i["default"].includes(t,this.state.shelfNameFilter),o=this.withBemModifiers("wantToReadMenu__newShelfButtonContainer");return s("li",{className:o},void 0,React.createElement(y["default"],n({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:r,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bemModifiers:this.props.bemModifiers,useModalView:this.props.useModalView,bookTitle:this.props.bookTitle},this.state)))},render:function(){return s("div",{className:"wantToReadMenu"},void 0,this.props.useModalView&&s("div",{className:"wantToReadMenu__headerContainer"},void 0,this.renderFilter()),s("div",{className:"wantToReadMenu__scrollableContainer"},void 0,!this.props.useModalView&&this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../modules/default_shelves":20,"../../react_actions/shelvings_actions":51,"../../react_mixins/gr_reflux":255,"../../react_stores/want_to_read_menu_store":284,"../gr_component_factory":129,"../spinner":209,"./want_to_read_menu_filter":239,"./want_to_read_menu_shelf_creator":240,classnames:"classnames",lodash:"lodash"}],239:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_actions/want_to_read_menu_actions"),d=o(u);r["default"]=l["default"].createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,shelvings:a["default"].PropTypes.object.isRequired,wantToReadMenu:a["default"].PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),d["default"].updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){var e=this.withBemModifiers("wantToReadMenuFilter");return n("form",{className:e,onSubmit:function(e){return e.preventDefault()}},void 0,n("input",{className:"gr-textInput\n                               gr-textInput--small\n                               gr-textInput--fullWidth\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":60,"../gr_component_factory":129,react:"react"}],240:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_actions/want_to_read_menu_actions"),d=o(u),c=e("../../react_actions/shelvings_actions"),p=o(c),f=e("classnames"),m=o(f),h=e("lodash"),_=o(h);r["default"]=l["default"].createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:a["default"].PropTypes.bool.isRequired,shelfNameFilter:a["default"].PropTypes.string,uniqueId:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired,useModalView:a["default"].PropTypes.bool},getDefaultProps:function(){return{useModalView:!1}},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){d["default"].openAddShelfTextbox(this.props.uniqueId)},closeAddShelfTextbox:function(){d["default"].closeAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),d["default"].updateShelfNameFilter("",this.props.uniqueId),p["default"].toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitle)},render:function(){var e=this;if(""!==this.props.shelfNameFilter&&this.props.userCanAddShelf){var t=this.withBemModifiers("wantToReadShelfCreator__addNamedShelfButton");return n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:t,"aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(t){e.shelveAsNewShelfName(e.props.shelfNameFilter,t)}},void 0,"Add new “",n("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"” shelf"))}if(this.props.showAddShelfTextbox){var r=(0,m["default"])(this.withBemModifiers("wantToReadShelfCreator"),"wantToReadShelfCreator--wrap"),o=(0,m["default"])("gr-textInput",this.withBemModifiers("wantToReadShelfCreator__textInput"),{"gr-textInput--small":!this.props.useModalView}),s=(0,m["default"])(this.withBemModifiers("wantToReadShelfCreator__addShelfButton"),"gr-button",{"gr-button--small":!this.props.useModalView,"gr-button--dark gr-button--fullWidth":this.props.useModalView});return n("form",{className:r,onSubmit:function(t){e.shelveAsNewShelfName(e.state.unsavedShelfName,t)}},void 0,n("input",{className:o,type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",autoFocus:!0,onChange:this.checkIfCommentIsEmpty}),n("div",{className:"wantToReadShelfCreator__buttonContainer"},void 0,n("input",{type:"submit",className:s,disabled:_["default"].isEmpty(_["default"].trim(this.state.unsavedShelfName)),value:"Add"}),this.props.useModalView&&n("button",{type:"button",className:"gr-button gr-button--fullWidth wantToReadShelfCreator__cancelButton",onClick:this.closeAddShelfTextbox,"aria-label":"Close add new shelf form"},void 0,"Cancel")))}if(this.props.userCanAddShelf){var t=this.withBemModifiers("wantToReadShelfCreator__showAddShelfTextboxButton");return n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:t,"aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"))}return null}})},{"../../react_actions/shelvings_actions":51,"../../react_actions/want_to_read_menu_actions":60,"../gr_component_factory":129,classnames:"classnames",lodash:"lodash",react:"react"}],241:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./want_to_read_button"),d=o(u),c=e("../user_rating"),p=o(c),f=e("lodash");r["default"]=l["default"].createClass({displayName:"WantToReadWithStars",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{},void 0,n(d["default"],{bookId:this.props.bookId,uniqueId:(0,f.random)(1e6).toString(),bookTitle:this.props.bookTitle}),n(p["default"],{bookId:this.props.bookId,bookTitle:this.props.bookTitle}))}})},{"../gr_component_factory":129,"../user_rating":228,"./want_to_read_button":237,lodash:"lodash",react:"react"}],242:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DealsStores=r.DealsComponents=void 0;var n=e("../react_components/user/preferences/user_preferences_deals"),s=o(n),a=e("../react_stores/user/preferences/user_preferences_store"),i=o(a),l=e("../react_components/deals/deals_landing_page"),u=o(l),d=e("../react_components/deals/deals_category_page"),c=o(d),p=e("../react_components/deals/deal_expiration_date"),f=o(p),m=e("../react_components/deals/deal_detail_page"),h=o(m),_=e("../react_components/deals/megaphone"),g=o(_);r.DealsComponents={UserPreferencesDeals:s["default"],DealsLandingPage:u["default"],DealsCategoryPage:c["default"],DealDetailPage:h["default"],Megaphone:g["default"],DealExpirationDate:f["default"]},r.DealsStores={UserPreferencesStore:i["default"]}},{"../react_components/deals/deal_detail_page":92,"../react_components/deals/deal_expiration_date":93,"../react_components/deals/deals_category_page":101,"../react_components/deals/deals_landing_page":103,"../react_components/deals/megaphone":109,"../react_components/user/preferences/user_preferences_deals":218,"../react_stores/user/preferences/user_preferences_store":277}],243:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_stores/comments_store"),i=o(a),l=e("../../react_components/comment/comment_form"),u=o(l),d=e("../../react_components/comment/comments"),c=o(d),p=e("../../react_components/like/like_button"),f=o(p),m=e("../../react_components/like/like_information"),h=o(m);r.ConversationsComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:f["default"],LikeInformation:h["default"]},r.ConversationsStores={CommentsStore:i["default"],LikeStore:s["default"]}},{"../../react_components/comment/comment_form":85,"../../react_components/comment/comments":86,"../../react_components/like/like_button":157,"../../react_components/like/like_information":159,"../../react_stores/comments_store":261,"../../react_stores/like_store":269}],244:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var o=e("./conversations"),n=e("./old_homepage"),s=e("./review_show"),a=e("lodash");r.ExperimentComponents=(0,a.merge)({},o.ConversationsComponents,n.OldHomepageComponents,s.ReviewShowComponents),r.ExperimentStores=(0,a.merge)({},o.ConversationsStores,n.OldHomepageStores,s.ReviewShowStores)},{"./conversations":243,"./old_homepage":245,"./review_show":246,lodash:"lodash"}],245:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_stores/comments_store"),i=o(a),l=e("../../react_components/comment/comment_form"),u=o(l),d=e("../../react_components/comment/comments"),c=o(d),p=e("../../react_components/like/like_button"),f=o(p),m=e("../../react_components/like/like_information"),h=o(m),_=e("../../react_components/like/like_simple_footer"),g=o(_);
r.OldHomepageComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:f["default"],LikeInformation:h["default"],LikeSimpleFooter:g["default"]},r.OldHomepageStores={CommentsStore:i["default"],LikeStore:s["default"]}},{"../../react_components/comment/comment_form":85,"../../react_components/comment/comments":86,"../../react_components/like/like_button":157,"../../react_components/like/like_information":159,"../../react_components/like/like_simple_footer":160,"../../react_stores/comments_store":261,"../../react_stores/like_store":269}],246:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_components/like/like_simple_footer"),i=o(a);r.ReviewShowComponents={LikeSimpleFooter:i["default"]},r.ReviewShowStores={LikeStore:s["default"]}},{"../../react_components/like/like_simple_footer":160,"../../react_stores/like_store":269}],247:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.FriendFollowModuleStores=r.FriendFollowModuleComponents=void 0;var n=e("../react_components/user_relationships/friend_follow_module"),s=o(n),a=e("../react_stores/user_relationships/friend_follow_module_store"),i=o(a),l=e("../react_stores/user/show/block_user_store"),u=o(l);r.FriendFollowModuleComponents={FriendFollowModule:s["default"]},r.FriendFollowModuleStores={FriendFollowModuleStore:i["default"],BlockUserStore:u["default"]}},{"../react_components/user_relationships/friend_follow_module":236,"../react_stores/user/show/block_user_store":278,"../react_stores/user_relationships/friend_follow_module_store":282}],248:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalComponents=r.GlobalStores=void 0;var n=e("../react_stores/google_ads_store"),s=o(n),a=e("../react_components/login/interstitial/login_interstitial"),i=o(a),l=e("../react_components/stores_initializer"),u=o(l),d=e("../react_stores/user_not_interested_store"),c=o(d),p=e("../react_stores/user_shelves_store"),f=o(p);r.GlobalStores={GoogleAdsStore:s["default"],UserNotInterestedStore:c["default"],UserShelvesStore:f["default"]},r.GlobalComponents={LoginInterstitial:i["default"],StoresInitializer:u["default"]}},{"../react_components/login/interstitial/login_interstitial":163,"../react_components/stores_initializer":211,"../react_stores/google_ads_store":267,"../react_stores/user_not_interested_store":281,"../react_stores/user_shelves_store":283}],249:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReadingNotesStores=r.ReadingNotesComponents=void 0;var n=e("../react_components/reading_notes/annotated_books_landing_page"),s=o(n),a=e("../react_components/author/author_follow_button"),i=o(a),l=e("../react_components/comment/comment_form"),u=o(l),d=e("../react_components/comment/comments"),c=o(d),p=e("../react_components/like/like_button"),f=o(p),m=e("../react_components/like/like_information"),h=o(m),_=e("../react_components/reading_notes/reading_notes_annotator"),g=o(_),v=e("../react_components/reading_notes/reading_notes_header"),y=o(v),b=e("../react_components/reading_notes/reading_notes_shelving_modal"),S=o(b),k=e("../react_components/reading_notes/reading_notes_shelving_modal_trigger"),T=o(k),P=e("../react_components/user/user_follow_widget"),w=o(P),N=e("../react_components/want_to_read/want_to_read_button"),R=o(N),M=e("../react_components/want_to_read/want_to_read_with_stars"),C=o(M),A=e("../react_stores/reading_notes/annotated_books_store"),x=o(A),I=e("../react_stores/author_follow_store"),L=o(I),U=e("../react_stores/comments_store"),E=o(U),O=e("../react_stores/like_store"),D=o(O),B=e("../react_stores/shelvings_store"),F=o(B),j=e("../react_stores/user/user_follow_store"),q=o(j),H=e("../react_stores/user_shelves_store"),G=o(H),$=e("../react_stores/user_agent_capabilities_store"),z=o($);r.ReadingNotesComponents={AnnotatedBooksLandingPage:s["default"],AuthorFollowButton:i["default"],CommentForm:u["default"],Comments:c["default"],LikeButton:f["default"],LikeInformation:h["default"],ReadingNotesAnnotator:g["default"],ReadingNotesHeader:y["default"],ReadingNotesShelvingModal:S["default"],ReadingNotesShelvingModalTrigger:T["default"],UserFollowWidget:w["default"],WantToReadButton:R["default"],WantToReadWithStars:C["default"]},r.ReadingNotesStores={AnnotatedBooksStore:x["default"],AuthorFollowStore:L["default"],CommentsStore:E["default"],LikeStore:D["default"],ShelvingsStore:F["default"],UserFollowStore:q["default"],UserShelvesStore:G["default"],UserAgentCapabilitiesStore:z["default"]}},{"../react_components/author/author_follow_button":78,"../react_components/comment/comment_form":85,"../react_components/comment/comments":86,"../react_components/like/like_button":157,"../react_components/like/like_information":159,"../react_components/reading_notes/annotated_books_landing_page":178,"../react_components/reading_notes/reading_notes_annotator":181,"../react_components/reading_notes/reading_notes_header":182,"../react_components/reading_notes/reading_notes_shelving_modal":183,"../react_components/reading_notes/reading_notes_shelving_modal_trigger":184,"../react_components/user/user_follow_widget":219,"../react_components/want_to_read/want_to_read_button":237,"../react_components/want_to_read/want_to_read_with_stars":241,"../react_stores/author_follow_store":259,"../react_stores/comments_store":261,"../react_stores/like_store":269,"../react_stores/reading_notes/annotated_books_store":272,"../react_stores/shelvings_store":275,"../react_stores/user/user_follow_store":279,"../react_stores/user_agent_capabilities_store":280,"../react_stores/user_shelves_store":283}],250:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=e("array.prototype.find"),s=o(n);s["default"].shim()},{"array.prototype.find":"array.prototype.find"}],251:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var n=e("../react_stores/current_user_store"),s=o(n),a=e("../react_stores/favorite_genres_store"),i=o(a),l=e("../react_stores/notifications_store"),u=o(l),d=e("../react_stores/shelvings_store"),c=o(d),p=e("../react_stores/tabs_store"),f=o(p),m=e("../react_components/flash_message"),h=o(m),_=e("../react_components/featured_content_module"),g=o(_),v=e("../react_components/page_skin"),y=o(v),b=e("../react_components/ads/google_banner_ad"),S=o(b),k=e("../react_components/ads/google_native_ad"),T=o(k),P=e("../react_components/ads/google_page_skin"),w=o(P),N=e("../react_components/ads/google_featured_content_module"),R=o(N),M=e("../react_components/scroll_tracker"),C=o(M),A=e("../react_components/header/header_store_connector"),x=o(A),I=e("../react_components/site_announcement/site_announcement"),L=o(I),U=e("../react_components/site_announcement/choice_site_announcement"),E=o(U),O=e("../react_components/site_announcement/welcome_announcement"),D=o(O),B=e("../react_components/group/preview_broadcast"),F=o(B),j=e("../react_components/jobs_list"),q=o(j),H=e("../react_components/shared/shareable_link_button"),G=o(H),$=e("../react_components/share_dialog"),z=o($),W=e("../react_stores/share_dialog_store"),K=o(W);r.HeaderStores={CurrentUserStore:s["default"],FavoriteGenresStore:i["default"],NotificationsStore:u["default"],ShareDialogStore:K["default"],ShelvingsStore:c["default"],TabsStore:f["default"]},r.HeaderComponents={FlashMessage:h["default"],HeaderStoreConnector:x["default"],PageSkin:y["default"],FeaturedContentModule:g["default"],GoogleBannerAd:S["default"],GooglePageSkin:w["default"],GoogleFeaturedContentModule:R["default"],ScrollTracker:C["default"],SiteAnnouncement:L["default"],ChoiceSiteAnnouncement:E["default"],WelcomeAnnouncement:D["default"],ShareDialog:z["default"],PreviewBroadcast:F["default"],GoogleNativeAd:T["default"],JobsList:q["default"],ShareableLinkButton:G["default"]}},{"../react_components/ads/google_banner_ad":66,"../react_components/ads/google_featured_content_module":67,"../react_components/ads/google_native_ad":68,"../react_components/ads/google_page_skin":72,"../react_components/featured_content_module":125,"../react_components/flash_message":127,"../react_components/group/preview_broadcast":131,"../react_components/header/header_store_connector":144,"../react_components/jobs_list":156,"../react_components/page_skin":170,"../react_components/scroll_tracker":185,"../react_components/share_dialog":193,"../react_components/shared/shareable_link_button":198,"../react_components/site_announcement/choice_site_announcement":205,"../react_components/site_announcement/site_announcement":207,"../react_components/site_announcement/welcome_announcement":208,"../react_stores/current_user_store":262,"../react_stores/favorite_genres_store":265,"../react_stores/notifications_store":271,"../react_stores/share_dialog_store":273,"../react_stores/shelvings_store":275,"../react_stores/tabs_store":276}],252:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("lodash"),i=o(a),l=e("classnames"),u=o(l);r["default"]={propTypes:{bemModifiers:s["default"].PropTypes.oneOfType([s["default"].PropTypes.string,s["default"].PropTypes.arrayOf(s["default"].PropTypes.string)])},withBemModifiers:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null===t&&(t=this.props.bemModifiers),!t)return e;if(i["default"].isString(t))return e+" "+e+"--"+t;if(i["default"].isArray(t)){var r=(0,u["default"])(e,i["default"].map(t,function(t){return e+"--"+t}));return r}},withBemElement:function(e,t){return this.props.bemModifiers?i["default"].isString(this.props.bemModifiers)?e+"--"+this.props.bemModifiers+"__"+t:i["default"].isArray(this.props.bemModifiers)?(0,u["default"])(i["default"].map(this.props.bemModifiers,function(r){return e+"--"+r+"__"+t})):void 0:e+"__"+t}}},{classnames:"classnames",lodash:"lodash",react:"react"}],253:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("lodash"),i=o(a);r["default"]={propTypes:{deployServices:s["default"].PropTypes.arrayOf(s["default"].PropTypes.string)},isFeatureEnabled:function(e){return i["default"].indexOf(this.deployServices(),e)>=0},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.constructor.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],254:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],255:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=r.stateKey,s=void 0===o?null:o,a=r.filterValue,l=void 0===a?null:a;return{getInitialState:function(){var r=e.getInitialState(i["default"].get(this.props,t));return l&&(r=r[l]),i["default"].isNull(s)||(r=n({},s,r)),r},componentDidMount:function(){var r=this;u["default"].utils.extend(this,u["default"].ListenerMethods),this.listenTo(e,function(e){var o=e[i["default"].get(r.props,t)];l&&(o=o[l]),i["default"].isNull(s)||(o=n({},s,o)),r.setState(o)})},componentWillUnmount:u["default"].ListenerMixin.componentWillUnmount}}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=s;var a=e("lodash"),i=o(a),l=e("reflux"),u=o(l)},{lodash:"lodash",reflux:"reflux"}],256:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=250;r["default"]={onEnterIntent:function(e,t){t||(t=a);try{clearTimeout(this.leaveTimeout)}catch(r){}this.hoverTimeout=s["default"].delay(e,t)},onLeaveIntent:function(e,t){t||(t=a);try{clearTimeout(this.hoverTimeout)}catch(r){}this.leaveTimeout=s["default"].delay(e,t)}}},{lodash:"lodash"}],257:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-dom"),s=o(n),a=e("lodash"),i=e("../modules/data_tracking/data_tracking_helper");r["default"]={componentDidMount:function(){var e=this,t=this.props.trackingOptions;t&&!function(){var r=s["default"].findDOMNode(e);r&&((0,a.each)((0,a.keys)(t),function(e){var o=t[e];(0,a.isUndefined)(o)||r.setAttribute("data-tracking-"+e,JSON.stringify(o))}),t.enableTracking===!0&&r.addEventListener("click",i.handleDataTracking))}()}}},{"../modules/data_tracking/data_tracking_helper":10,lodash:"lodash","react-dom":"react-dom"}],258:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../react_actions/header/search_actions");r["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case o.TOGGLE_SEARCH:return Object.assign({},e,{searchIsActive:t.searchIsActive});default:return e}}},{"../../react_actions/header/search_actions":43}],259:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("lodash"),u=o(l),d=e("../react_actions/author_follow_actions"),c=o(d),p=e("./shared/newsfeed_updates_mixin"),f=o(p),m=new i["default"]({}),h=function(){return m.get()},_=function(e,t){return h()[e].set(t)},g=function(e,t){return h()[e][t]},v=function(e){var t=g(e,"followingCount"),r=g(e,"isFollowing"),o={isFollowing:!r,followingCount:r?t-1:t+1};_(e,o)},y=function(e){var t=g(e,"buttonEnabled");_(e,{buttonEnabled:!t})},b=s["default"].createStore({listenables:c["default"],mixins:[(0,f["default"])(p.NEWSFEED_DEPENDENT_STORE_KEYS.AUTHOR_FOLLOWS)],getInitialState:h,getState:h,initializeWith:function(e){var t=u["default"].transform(e,function(e,t,r){e[r]={isFollowing:t.isFollowing||!1,followingCount:t.followingCount||0,authorFollowingId:t.authorFollowingId||null,source:t.source||!1,buttonEnabled:!0}});h().set(t)},updateWith:function(e){this.initializeWith(e)},reset:function(){h().reset({})},onFollow:function(e){var t=this,r=g(e,"source"),o="AnnotatedBooksPage"===r,n="ReadingNotesListPage"===r;y(e),this.trigger(this.getState()),$j.post("/author_followings",{format:"json",id:e,from_annotated_books_page:o,from_reading_notes_list_page:n}).done(function(r){var o={authorFollowingId:parseInt(u["default"].words(r.url,/[0-9]+/)[0],10)};_(e,o),v(e),y(e),t.trigger(t.getState())})},onUnFollow:function(e){var t=this;y(e),this.trigger(this.getState()),$j.ajax({type:"DELETE",url:"/author_followings/"+g(e,"authorFollowingId"),data:{format:"json"}}).done(function(){var r={authorFollowingId:null};_(e,r),v(e),y(e),t.trigger(t.getState())})}});r["default"]=b},{"../react_actions/author_follow_actions":32,"./shared/newsfeed_updates_mixin":274,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],260:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/book_search_actions_factory"),c=o(d),p=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),t=(0,c["default"])(),r=function(t){var r=e.get();r.results.reset(t)},o=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set("showLoadingSpinner",t.showLoadingSpinner).set("showResultsContainer",t.showResultsContainer).set("query",t.query).set("activeResult",t.activeResult).results.reset(t.results)},reset:function(){e.get().reset({})},setValue:function(t,r){var o=e.get();o.set(t,r)},onSelectSpecificResult:function(e){var t=s["default"].find(this.getState().results,function(t){return t.bookId===e});this.setValue("activeResult",t),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=s["default"].indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,o=s["default"].indexOf(t,r);0===o||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(o-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){r(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(e,r){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:r,data:{format:"json",q:e},success:function(r){t.searchResultsFound(e,r)}})}});return o};r["default"]=p},{"../react_actions/book_search_actions_factory":33,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],261:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../modules/gr_error_reporting"),c=o(d),p=e("../react_actions/comment_actions"),f=o(p),m=e("./shared/newsfeed_updates_mixin"),h=o(m),_={},g=new u["default"](_),v=2,y=10,b=function(){return g.get()},S=function(e){b().reset(s["default"].merge({},_,e))},k=function(e){return s["default"].has(b(),e)||b().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),b()[e]},T=function(e,t){k(e).set(t)};r["default"]=i["default"].createStore({listenables:f["default"],mixins:[(0,h["default"])(m.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){S(e)},updateWith:function(e){var t=s["default"].transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});b().set(t)},onTextareaFocusRequested:function(e){T(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){T(e,{textareaRows:v,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=k(e).unsavedComment;s["default"].isEmpty(s["default"].trim(t))&&T(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){T(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var o=this,n=k(e),a=n.numComments-1,i=s["default"].findIndex(n.comments,function(e){return e.uri===t});i>=0&&(n.set("numComments",a),n.comments.splice(i,1),n.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){n.showPagination&&(0===k(e).comments.length&&n.currentPage>1?(r.page=n.currentPage-1,f["default"].showCommentsForPage(r)):n.currentPage<Math.ceil(a/y)?(r.page=n.currentPage,f["default"].showCommentsForPage(r)):o.notifyListeners())}))},onAddNewComment:function(e){var t=this,r={body:k(e.subjectKey).unsavedComment,authorUser:e.authorUser,updatedAtMessage:"Just now"};T(e.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,comment:{body_usertext:r.body},digest_default:!0,respect_update_feed_preference:!0,react_framework:!0}).done(function(r){var o=k(e.subjectKey),n=o.numComments+1;if(o.set({unsavedComment:"",saveInProgress:!1,numComments:n,showCommentButton:!1}),o.comments.length<y){var s=r;o.comments.push({createdAt:new Date,body:s.body,deletableByCurrentUser:s.deletableByCurrentUser,blockedByCurrentUser:s.blockedByCurrentUser,authorUser:e.authorUser,updatedAtMessage:"Just now",uri:s.uri,flagForAbuseUrl:s.flagForAbuseUrl})}else e.page=Math.ceil(n/y),f["default"].showCommentsForPage(e);t.onTextareaUnfocused(e.subjectKey)}).fail(function(t){var r=null;422===t.status?r="Sorry, your comment cannot be posted because it is too long (must be under 12000 characters). Please try again.":404===t.status?r="Sorry, this post has been deleted.":(r="Sorry, your comment cannot be posted. ",t.responseJSON&&t.responseJSON.errors&&(r+=t.responseJSON.errors.join(", "))),r&&c["default"].notifyUser(r),T(e.subjectKey,{saveInProgress:!1,showCommentButton:!1}),f["default"].textareaUnfocused(e.subjectKey)})},onShowCommentsForPage:function(e){var t=this,r=e.page>0?e.page:1;$j.get("/comment/index.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,page:r,per_page:y,reverse:!0,react_framework:!0}).done(function(o){T(e.subjectKey,{comments:o.comments,showPagination:!0,currentPage:r,showSeeMoreLoadingSpinner:!1}),t.notifyListeners()})},onCommentEntered:function(e,t){T(e,{unsavedComment:t}),this.notifyListeners()},getState:b,getInitialState:function(e){return s["default"].isUndefined(e)?b():k(e)},getInitialStateForKey:k,reset:function(){S({})},notifyListeners:function(){this.trigger(b())}})},{"../modules/gr_error_reporting":23,"../react_actions/comment_actions":34,"./shared/newsfeed_updates_mixin":274,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],262:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("reflux"),l=o(i),u=e("freezer-js"),d=o(u),c=e("../react_actions/current_user_actions"),p=o(c),f={currentUser:{}},m=new d["default"](f),h=function(){return m.get()},_=function(e){h().reset(a["default"].merge({},f,e))};r["default"]=l["default"].createStore({listenables:[p["default"]],initializeWith:function(e){a["default"].each(a["default"].keys(e),function(e){if(!a["default"].has(f,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+a["default"].keys(f))}),_(e)},getState:h,getInitialState:h,onUpdatePreference:function(e,t){$j.post("/user/update_preferences",{user:n({},e,t)})},reset:function(){_({})}})},{"../react_actions/current_user_actions":35,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],263:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../../../modules/ajax/ajax_helper"),c=e("../../../react_actions/experimental/universal_search_actions_factory"),p=o(c),f=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null,currentInput:null}),t=(0,p["default"])(),r=function(t){var r=e.get();r.results.reset(t)},o=300,n=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set({showLoadingSpinner:t.showLoadingSpinner,showResultsContainer:t.showResultsContainer,query:t.query,activeResult:t.activeResult}).results.reset(t.results)},reset:function(){e.get().reset({})},hide:function(){e.get().set({showLoadingSpinner:!1,activeResult:null,showResultsContaine:!1}),this.trigger(e.get())},search:function(r,o,n){r==e.get().currentInput?(e.get().set("showLoadingSpinner",!0),this.trigger(e.get()),(0,d.httpGet)(o,{data:{format:"json",query:r,limit:n},success:function(e){t.searchResultsFound(r,e)}})):this.hide()},delayedSearch:s["default"].debounce(function(e,t,r,o){e.search(t,r,o)},o),onSelectSpecificResult:function(t){e.get().set("activeResult",t),this.trigger(e.get())},onSetShowResultsContainer:function(t){e.get().set("showResultsContainer",t),this.trigger(e.get())},onSelectNextResult:function(t){var r=e.get().results,o=s["default"].indexOf(r,e.get().activeResult);e.get().set("activeResult",r[(o+1)%t]),this.trigger(e.get())},onSelectPreviousResult:function(t){var r=e.get().results,o=e.get().activeResult,n=s["default"].indexOf(r,o);0===n||null===o?e.get().set("activeResult",r[t-1]):e.get().set("activeResult",r[(n-1)%t]),this.trigger(e.get())},onSearchResultsFound:function(t,o){t==e.get().currentInput&&(r(o),e.get().set({query:t,showLoadingSpinner:!1,activeResult:null,showResultsContainer:!0}),this.trigger(e.get()))},onSearch:function(t,r,o){t=t.trim(),e.get().set("currentInput",t),s["default"].isEmpty(t)?this.hide():this.delayedSearch(this,t,r,o)}});return n};r["default"]=f},{"../../../modules/ajax/ajax_helper":5,"../../../react_actions/experimental/universal_search_actions_factory":38,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],264:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/favorite_genres_actions"),c=o(d),p=e("../react_actions/favorite_genres_form_actions"),f=o(p),m=new u["default"]({selectedGenres:[]}),h=function(){return m.get()},_=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];h().selectedGenres.reset(e)},g=i["default"].createStore({listenables:f["default"],getInitialState:h,getState:h,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];_(t)},onSubmitSelectedGenres:function(){c["default"].changeFavoriteGenres(h().selectedGenres)},onSelectFavoriteGenre:function(e){s["default"].includes(h().selectedGenres,e)||(h().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){h().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(h())},reset:function(){_()}});r["default"]=g},{"../react_actions/favorite_genres_actions":39,"../react_actions/favorite_genres_form_actions":40,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],265:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/favorite_genres_actions"),c=o(d),p={allGenres:[],favoriteGenres:[],sponsoredGenres:[]},f=new u["default"](p),m=function(){return f.get()},h=function(e){m().reset(s["default"].merge({},p,e))},_=function(e){return s["default"].inject(m().allGenres,function(t,r){var o=r.name;return t.favorites[o]=s["default"].includes(e,o),t},{favorites:{}})};r["default"]=i["default"].createStore({listenables:[c["default"]],initializeWith:function(e){s["default"].each(s["default"].keys(e),function(e){if(!s["default"].has(p,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+s["default"].keys(p))}),h(e)},updateWith:function(e){m().set(e)},getState:m,getInitialState:m,reset:function(){h()},notifyListeners:function(){this.trigger(m())},onChangeFavoriteGenres:function(e){var t=this,r=function(){m().favoriteGenres.reset(e),t.notifyListeners()};$j.post("/user/edit_fav_genres",s["default"].merge(_(e),{format:"json"}),r)}})},{"../react_actions/favorite_genres_actions":39,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],266:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/featured_genres_actions"),c=o(d),p=e("../react_actions/shelvings_actions"),f=o(p),m=e("../react_stores/favorite_genres_store"),h=o(m),_=new u["default"]({}),g=function(){return _.get()},v=i["default"].createStore({listenables:c["default"],init:function(){h["default"].listen(function(){c["default"].requestFeaturedBooks()})},initializeWith:function(e){_.get().reset({featuredGenreBookInfo:e})},getInitialState:g,getState:g,onRequestFeaturedBooks:function(){var e=this;return s["default"].isEmpty(h["default"].getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(g().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(t){e.saveNewFeaturedBooks(t.genres),f["default"].addShelvings(t.shelvings)}).fail(function(e){c["default"].displayError(e)}),g().set("requestedFeaturedBooksBefore",!0)))},onTrackMenuImpression:function(){$j.get("/dfp/browse_menu_impression")},saveNewFeaturedBooks:function(e){g().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){g().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(g())},reset:function(){g().reset({})}});r["default"]=v},{"../react_actions/featured_genres_actions":41,"../react_actions/shelvings_actions":51,"../react_stores/favorite_genres_store":265,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],267:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ImpressionCode=void 0;var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/data_tracking/data_tracking_actions"),c=o(d),p=e("../react_actions/google_ads_actions"),f=o(p),m=e("../react_actions/newsfeed_actions"),h=o(m),_=e("../modules/ads/google_ad_helper"),g=e("./shared/newsfeed_updates_mixin"),v=o(g),y=e("../modules/env_utils"),b=o(y),S={targeting:{},ads:{},nativeAds:{},polls:{},device_type:null},k=new u["default"](S),T=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},P=function(){return k.get()},w=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];P().reset(s["default"].merge({},S,e))},N=function(e){if(!s["default"].has(P().ads,e)){if(!s["default"].has(P().nativeAds,e)){if(!s["default"].has(P().polls,e))throw new ReferenceError("No such product existing for key "+e);return P().polls[e]}return P().nativeAds[e]}return P().ads[e]},R=function(e,t){N(e).set(t)},M=function(e){return e.path.split("/",3)[2]},C=function(e){return{ad_unit:M(e),line_item_id:e.lineItemId,ad_device_type:e.adDeviceType}},A=function(e,t,r){var o=s["default"].merge(C(t),r);$j.ajax({url:e,type:"GET",data:o})},x=function(e){R(e,{impressionLogged:!0})},I=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=N(e);if(o&&!o.impressionLogged){var n=r?JSON.stringify([r.data("id"),r.data("url")]):null;A(o.pmetImpressionTrackUrl,o,{impression_output:t,creative:n}),x(e)}},L=function(e){A(e.pmetClickTrackUrl,e,{click_type:"click"})},U=function(e){switch(e){case"NewsfeedAd":return"/dfp/ajax_native_ad";case"PageSkin":return"/dfp/ajax_premium_campaign_page_skin";case"FeaturedContent":return"/dfp/ajax_premium_campaign_featured_content"}};r["default"]=i["default"].createStore({listenables:[f["default"],{trackClickEvent:c["default"].trackClickEvent}],mixins:[(0,v["default"])(g.NEWSFEED_DEPENDENT_STORE_KEYS.NATIVE_ADS)],initializeWith:function(e){(0,_.lazyLoadInit)(),w(e);var t=[];if(b["default"].hasDom()&&!(0,_.adSlotsDefined)()){var r=s["default"].merge({},this.getState().ads,this.getState().nativeAds);s["default"].map(s["default"].merge({},r,this.getState().polls),function(e,r){
e.isLazyLoaded||((0,_.defineSlot)(r,e.path,e.dimensions,e.adSizeMapping),t.push((0,_.slotToHash)(e,r)))}),(0,_.enableServices)(),(0,_.fetchApstagBids)(t)}},resetTo:function(e){w(e)},updateWith:function(e){P().set(s["default"].merge({},P(),e))},onTrackClickEvent:function(e,t){var r=e.target,o=void 0,n=void 0,a=void 0,i=void 0,l=/news/,u=JSON.parse(t.getAttribute("data-tracking-adId"));if(u=u?u:s["default"].findKey(P().nativeAds,function(e){return e.path.match(l)}))for(;r!==t;)r.getAttribute("data-tracking-dfp")&&!o&&(o=r.getAttribute("data-tracking-dfp"),a=JSON.parse(o),a&&this.trackDfpClick(u)),r.getAttribute("data-tracking-pmet")&&!n&&(n=r.getAttribute("data-tracking-pmet"),i=JSON.parse(n),this.trackPmetClick(u,i)),r=r.parentNode},mergeWith:function(e){P().set(s["default"].merge({},P(),e))},onHasRequestedCreativeForSlot:function(e){R(e,{hasRequestedCreative:!0}),this.notifyListeners()},onRequestCreativeForSlot:function(e,t){var r=N(e);s["default"].isObject(r)&&r.hasRequestedCreative!==!1||window.googletag&&window.googletag.cmd&&(window.googletag.cmd.push(function(){(0,_.requestCreative)(e,t)}),this.onHasRequestedCreativeForSlot(e))},onRemoveAdSlot:function(e){R(e,{hasRequestedCreative:!0,empty:!0}),this.notifyListeners()},onTrackImpression:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];I(e,t,r)},findAd:function(e){var t=s["default"].findKey(s["default"].merge({},P().ads,P().nativeAds),function(t){return t.path.match(e)}),r=t?P().ads[t]:null;return r=r?r:P().nativeAds[t],!r||r.hasRequestedCreative&&r.empty?null:{id:t,ad:r}},onAttachServedBannerAdAttributesAndTracking:function(e,t,r,o,n){R(e,{lineItemId:t,creative:r,impressionCode:o});var s=N(e);return r?(n||I(e,o),void s.creative.on("click","a",function(){L(s)})):void I(e,T.dfpError)},onPollAnswerChanged:function(e,t){var r=this;$j.post("/poll/homepage_vote",{answer:e,id:t.creative.pollId}).done(function(e){e.showStats=!0,R(t.id,e),r.trigger(P())}),R(t.id,{answer:Number(e)}),this.trigger(P())},onPopulateHomepagePollAndTracking:function(e,t,r,o){var n=this;return r?(R(e,{creative:r}),$j.get("/poll/index_ajax_homepage_poll/",o).done(function(t){"answer"in t&&(t.showStats=!0),R(e,t),n.trigger(P())}),void I(e,T.success)):void I(e,T.dfpError)},onAttachServedNativeAdAttributesAndTracking:function(e,t,r,o,n,s,a){R(e,{lineItemId:t,url:s});var i=N(e),l=i.resourceType,u=U(l);return r?void("NewsfeedAd"===i.resourceType?this.ajaxNewsfeedAd(e,t,o,n,s,a,u):this.ajaxPremiumCampaign(e,t,o,n,s,a,u)):void I(e,T.dfpError)},ajaxNewsfeedAd:function(e,t,r,o,n,s,a){var i=this;$j.ajax({type:"GET",url:a,data:{format:"json",id:r,line_item_id:t,ad_unit:s,ad_device_type:"desktop",react:!0}}).done(function(t){t.ok?(R(e,t),h["default"].updateNativeAdSlot(N(e).id,N(e)),i.notifyListeners(),I(e,o)):I(e,T.monolithError)})},ajaxPremiumCampaign:function(e,t,r,o,n,s,a){var i=this;$j.ajax({type:"GET",url:a,data:{format:"json",id:r,line_item_id:t,ad_unit:s,ad_device_type:"desktop"}}).done(function(t){t.ok?(R(e,t),i.notifyListeners(P()),I(e,o)):I(e,T.monolithError)})},trackDfpClick:function(e){var t=N(e),r=t.url,o=s["default"].merge(C(t),{click_type:"click"}),n=encodeURIComponent("?"+$j.param(o));$j.ajax({type:"GET",url:r+t.pmetClickTrackUrl+n})},trackPmetClick:function(e,t){var r=N(e),o=s["default"].merge(C(r),t);$j.ajax({type:"GET",url:r.pmetClickTrackUrl,data:o})},notifyListeners:function(){this.trigger(P())},getInitialState:function(e){return s["default"].isUndefined(e)?P():N(e)},getInitialStateForKey:N,getState:P,reset:w})},{"../modules/ads/google_ad_helper":4,"../modules/env_utils":21,"../react_actions/data_tracking/data_tracking_actions":36,"../react_actions/google_ads_actions":42,"../react_actions/newsfeed_actions":46,"./shared/newsfeed_updates_mixin":274,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],268:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=e("reflux"),a=o(s),i=e("freezer-js"),l=o(i),u=e("../react_actions/discussions_pane_actions"),d=o(u),c={groups:[]},p=new l["default"](c),f=function(){return p.get()},m=function(e){f().reset((0,n.merge)({},c,e))};r["default"]=a["default"].createStore({listenables:[d["default"]],getState:f,getInitialState:f,onOpenPane:function(){var e=this;$j.post("/track/track_click",{feature:"NavBarDiscussionsPaneOpenedGem"}),(0,n.isEmpty)(f().groups)&&(this.trigger(f()),$j.get("/group/navbar_discussions",{format:"json"}).done(function(t){e.updateWith(t)}).fail(function(){f().set("errorMessage","There was an error loading your groups."),e.trigger(f())}))},updateWith:function(e){e.sparse?f().set("sparse",e.sparse):(0,n.each)(e.groups,function(e){var t=e.group;f().groups.push({group:{name:t.name,iconUrl:t.iconUrl,url:t.url,lastActiveAt:t.lastActiveAt,id:t.id,allUnreadPostsUrl:t.allUnreadPostsUrl},topics:e.topics})}),this.trigger(f())},reset:function(){m({})}})},{"../react_actions/discussions_pane_actions":37,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],269:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/like_actions"),c=o(d),p=e("./shared/newsfeed_updates_mixin"),f=o(p),m=e("../modules/gr_error_reporting"),h=o(m),_=e("../modules/ajax/ajax_helper"),g=new u["default"]({}),v=function(){return g.get()},y=function(e){return s["default"].has(v(),e)||v().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),v()[e]},b=function(e,t,r){v()[e].set(t,r)},S=function(e,t){return v()[e][t]},k=function(e){var t=S(e,"likeCount"),r=S(e,"isLiked");b(e,"isLiked",!r),b(e,"likeCount",S(e,"isLiked")?t+1:t-1)},T=i["default"].createStore({listenables:c["default"],mixins:[(0,f["default"])(p.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:v,getInitialState:function(e){return s["default"].isUndefined(e)?v():y(e)},getInitialStateForKey:y,reset:function(){g.get().reset({})},initializeWith:function(e){s["default"].each(s["default"].keys(e),function(t){var r=e[t];r.likedBy=r.likedBy||!1,r.likeCount=r.likeCount||0,r.showLoadingSpinner=!1,v().set(t,r)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=S(e,"showLoadingSpinner");b(e,"showLoadingSpinner",!t)},onLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState()),(0,_.httpPost)("/rating",{format:"json",data:{rating:{resource_type:S(e,"resourceType"),resource_id:S(e,"resourceId"),resource_uri:S(e,"resourceUri"),rating:1}}}).done(function(r){k(e),b(e,"ratingId",r.rating_id),t.trigger(v())}).fail(function(e){var t=e.responseText;t&&h["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=S(e,"ratingId"),o="",n={};r?(o="/rating/"+r,n={format:"json"}):(o="/rating/",n={format:"json",resource_uri:S(e,"resourceUri")}),(0,_.httpDelete)(o,{data:n}).done(function(){k(e),t.trigger(v())}).fail(function(e){var t="Unable to unlike.";404==e.status?t+=" You may have already unliked.":e.responseText&&(t+=e.responseText),t+=" Please refresh the page and try again.",h["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})}});r["default"]=T},{"../modules/ajax/ajax_helper":5,"../modules/gr_error_reporting":23,"../react_actions/like_actions":44,"./shared/newsfeed_updates_mixin":274,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],270:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/modal_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},p=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},onOpenModal:function(e){d.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){d.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=p},{"../react_actions/modal_actions":45,"freezer-js":"freezer-js",reflux:"reflux"}],271:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/notifications_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},p=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){d.get().set("notifications",e),d.get().set("unreadCount",0),d.get().set("unreadCountMore",!1),this.notifyListeners()},onLoadError:function(){d.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){d.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){u["default"].loadNotifications(e)},error:function(){u["default"].loadError()}}),d.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=p},{"../react_actions/notifications_actions":47,"freezer-js":"freezer-js",reflux:"reflux"}],272:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../../react_actions/reading_notes/annotated_books_actions"),c=o(d),p=new u["default"]({annotatedBooksCollection:[],nextToken:null,showSpinner:!0,showError:!1}),f=function(){return p.get()},m=i["default"].createStore({listenables:[c["default"]],getInitialState:f,getState:f,updateWith:function(e,t){var r=s["default"].union(p.get().annotatedBooksCollection,e);r=s["default"].uniq(r,function(e){return e.asin}),f().set({annotatedBooksCollection:r,nextToken:t,showError:!1}),this.notifyListeners()},showSpinner:function(e){f().set("showSpinner",e),this.notifyListeners()},showError:function(){f().set("showError",!0),this.notifyListeners()},notifyListeners:function(){this.trigger(f())},reset:function(){f().reset({})},onLoadAnnotatedBooks:function(e){var t=this,r="/notes/"+e+"/load_more";this.showSpinner(!0);var o={};return p.get().nextToken&&(o.start_token=p.get().nextToken),$j.get(r,o).done(function(e){t.updateWith(e.annotated_books_collection,e.next_token)}).fail(function(){t.showError()}).always(function(){t.showSpinner(!1)})}});r["default"]=m},{"../../react_actions/reading_notes/annotated_books_actions":48,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],273:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.WARNING_SHARING_TEXT_LENGTH=r.MAXIMUM_SHARING_TEXT_LENGTH=void 0;var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/share_dialog_actions"),u=o(l),d=e("../modules/ajax/ajax_helper"),c=e("../modules/string_helper"),p=e("lodash"),f=new i["default"]({}),m=function(){return f.get()},h=r.MAXIMUM_SHARING_TEXT_LENGTH=420;r.WARNING_SHARING_TEXT_LENGTH=100;r["default"]=s["default"].createStore({listenables:[u["default"]],getState:m,getInitialState:function(){return m()},initializeWith:function(e){m().reset(e)},onUpdateSharingTextInputValue:function(e){var t=(0,c.astralLength)(e)>h,r=t;m().set({sharingTextInputValue:e,shareModalButtonDisabled:r,textTooLong:t}),this.trigger(m())},onSubmitShare:function(e,t){var r=this;m().set({shareModalButtonDisabled:!0,error:!1}),this.trigger(m());var o={resource_id:e.resourceId,resource_type:e.resourceTypeFriendlyText,sharing_text:t};e.sharerUserId&&(o.sharer_user_id=e.sharerUserId),(0,d.httpPost)("/sharings",{format:"json",data:{sharing:o}}).done(function(e){m().set({shared:!0,sharingTextInputValue:"",sharingUrl:e.sharingUrl,sharingDisplayName:e.sharingDisplayName})}).fail(function(e){var t=(0,p.get)(e,["responseJSON","message"]);m().set({error:!0,errorText:t})}).always(function(){m().set({shareModalButtonDisabled:!1}),r.trigger(m())})},onOpenShareModal:function(e){m().set({shared:!1,error:!1}),this.trigger(m());var t="OpenSharingModal_"+e;(0,d.httpPost)("/track/track_click",{data:{feature:t}})},reset:function(){m().reset({})}})},{"../modules/ajax/ajax_helper":5,"../modules/string_helper":29,"../react_actions/share_dialog_actions":50,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],274:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var n=e("../../react_actions/newsfeed_actions"),s=o(n),a=e("lodash"),i=function(e){var t={init:function(){(0,a.includes)((0,a.values)(l),e)&&this.listenTo(s["default"].newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(t){e&&t[e]&&(this.updateWith(t[e]),this.trigger(this.getState()))}};return t};r["default"]=i;var l=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows",NATIVE_ADS:"ads"}},{"../../react_actions/newsfeed_actions":46,lodash:"lodash"}],275:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/shelvings_actions"),c=o(d),p=e("../react_actions/reading_session_actions"),f=o(p),m=e("../react_actions/user_shelves_actions"),h=o(m),_=e("./shared/newsfeed_updates_mixin"),g=o(_),v=e("../modules/default_shelves"),y=e("../modules/book_origins"),b=e("../modules/ajax/ajax_helper"),S=new u["default"]({}),k=function(){return S.get()},T=function(e){return s["default"].has(k(),e)||k().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1,targetExclusiveShelfName:null}),k()[e]},P=function(e,t){T(e).set(t),s["default"].each(k(),function(r,o){r.book&&r.book.bookId===e&&T(o).set(t)})},w=function(e,t,r){P(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),"undefined"!=typeof r&&P(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===v.DEFAULT_SHELVES.CURRENTLY_READING.name&&f["default"].refreshReadingSessions()},N=function(e,t,r){P(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&h["default"].removeNonExclusiveShelf(t.name)},R=function(e){P(e,{rating:0})},M=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];x(e,r),P(e,{rating:t})},C=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=T(e),n=s["default"].clone(o.nonExclusiveShelfNames)||[];n.push(t.name),P(e,{nonExclusiveShelfNames:n}),x(e,r),h["default"].addNonExclusiveShelf(t.name)},A=function(e,t,r){var o=T(e),n=s["default"].clone(o.nonExclusiveShelfNames);n=s["default"].without(n,t.name),r&&h["default"].removeNonExclusiveShelf(t.name),P(e,{nonExclusiveShelfNames:n})},x=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=T(e);null===r.exclusiveShelfName&&w(e,v.DEFAULT_SHELVES.READ,t)},I=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=e;return t&&(o=s["default"].merge({},e,{book_origin:t})),r&&(o=s["default"].merge({},o,{progress_update_text:r})),o=s["default"].merge({},o,{v:2}),(0,b.httpPost)("/shelf/add_to_shelf.json",{data:o})};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,g["default"])(_.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:k,getInitialState:function(e){return s["default"].isUndefined(e)?k():T(e)},initializeWith:function(e){S.get().reset(e),this.notifyListeners()},reset:function(){S.get().reset({})},notifyListeners:function(){this.trigger(k())},updateWith:function(e){var t=s["default"].transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(t),this.notifyListeners()},onShelveBook:function(e,t){var r=this,o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=T(e).exclusiveShelfName;P(e,{isShelvingInProgress:!0,targetExclusiveShelfName:t.name});var a={book_id:e,name:t.name};this.notifyListeners(),I(a,o,n).done(function(r){if(w(e,t,r),r=r||{},r.shelves={},r.shelves[(0,v.getExclusiveShelfType)(t.name)]=[t.name],c["default"].bookShelved(r),s){var n={};n[(0,v.getExclusiveShelfType)(s)]=[s],c["default"].bookUnshelved({shelves:n})}o===y.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&f["default"].shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){P(e,{isShelvingInProgress:!1,targetExclusiveShelfName:null}),r.notifyListeners()})},onUnshelveBook:function(e){var t=this;P(e,{isShelvingInProgress:!0}),this.notifyListeners(),(0,b.httpPost)("/review/destroy",{data:{id:e}}).done(function(){var t={};t[(0,v.getExclusiveShelfType)(T(e).exclusiveShelfName)]=[T(e).exclusiveShelfName],t[v.SHELF_TYPES.NONEXCLUSIVE]=T(e).nonExclusiveShelfNames||[],c["default"].bookUnshelved({shelves:t}),N(e)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){P(e,{isShelvingInProgress:!1}),t.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,o){var n=this,a=T(e).exclusiveShelfName,i=T(e).nonExclusiveShelfNames,l=!s["default"].includes(i,t.name),u=k()[e]&&null!==T(e).exclusiveShelfName,d={book:{bookId:e,title:o}};l?(x(e,d),C(e,t,d)):A(e,t,!1),this.notifyListeners();var p={book_id:e,name:t.name,a:l?"":"remove"};I(p).done(function(){var e={};l?(e[v.SHELF_TYPES.DEFAULT]=a?[]:[v.DEFAULT_SHELVES.READ.name],e[v.SHELF_TYPES.NONEXCLUSIVE]=[t.name],c["default"].bookShelved({shelves:e})):(e[v.SHELF_TYPES.NONEXCLUSIVE]=[t.name],c["default"].bookUnshelved({shelves:e}))}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),u?l?A(e,t,r):C(e,t,d):N(e,t,r),n.notifyListeners()})},onRateBook:function(e,t,r){var o=this,n=0,s=!1,a={book:{bookId:e,title:r}};k()[e]&&(n=T(e).rating,s=null!==T(e).exclusiveShelfName,0===n&&c["default"].rateBook.newBook()),M(e,t,a),this.notifyListeners(),(0,b.httpPost)("/review/rate",{data:{format:"json",stars_click:!0,id:e,rating:t}}).fail(function(){window.alert("There was an error saving your rating, please try again."),n>0?M(e,n,a):s?(R(e),c["default"].rateBook.failed()):(N(e,null,!1),c["default"].rateBook.failed()),o.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/ajax/ajax_helper":5,"../modules/book_origins":7,"../modules/default_shelves":20,"../react_actions/reading_session_actions":49,"../react_actions/shelvings_actions":51,"../react_actions/user_shelves_actions":59,"./shared/newsfeed_updates_mixin":274,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],276:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/tab_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},p=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){c().set(e)},onDeselectTab:function(e,t){d.get()[t]===e&&(d.get().set(t,null),this.notifyListeners())},onSelectTab:function(e,t){d.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=p},{"../react_actions/tab_actions":52,"freezer-js":"freezer-js",reflux:"reflux"}],277:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DEAL_TYPES=r.DEAL_PREF_TYPES=r.PREF_TYPES=void 0;var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("lodash"),u=o(l),d=e("../../../react_actions/user/preferences/user_preferences_actions"),c=o(d),p="kca://deal_genre/amzn1.gr.dealgenre.v1.w6uQSt9ZSTaA6hPz8ZPT3A",f=r.PREF_TYPES={DEALS:"deals"},m=r.DEAL_PREF_TYPES={DEAL_TYPES:"deal_types",GENRE_URIS:"deal_genre_uris",RETAILERS:"retailers"},h=r.DEAL_TYPES={AUTHOR:"author",GENRE:"genre",WTR:"wtr",EVENTS:"events"},_={preferences:{deals:{}},status:{deals:{waiting:[],disabledPreferences:[]}}},g=new i["default"](_),v=function(){return g.get()};r["default"]=s["default"].createStore({listenables:[c["default"]],updateDealsDisabledPreferences:function(){var e=v().preferences.deals,t=u["default"].merge({},v().status),r=u["default"].merge({},t.deals);r.disabledPreferences=[],u["default"].isEmpty(e.deal_types)?(r.disabledPreferences.push(m.RETAILERS),r.disabledPreferences.push(m.GENRE_URIS)):u["default"].includes(e.deal_types,h.GENRE)||r.disabledPreferences.push(m.GENRE_URIS),t.deals=r,v().set({status:t})},initialize:function(e){v().set({preferences:e}),this.updateDealsDisabledPreferences()},updateDealsWaitingStatus:function(e,t){var r=u["default"].merge({},v().status),o=u["default"].merge({},r.deals);t?u["default"].contains(o.waiting,e)||o.waiting.push(e):u["default"].pull(o.waiting,e),r.deals=o,v().set({status:r})},updateDealsPreferences:function(e){var t=u["default"].merge({},v().preferences);t[f.DEALS]=e,this.getState().set({preferences:t}),this.updateDealsDisabledPreferences()},handleUpdateDealsPreferencesFailure:function(){var e=this;$j.get("/user/edit",{format:"json",contentType:"application/json"}).done(function(t){e.updateDealsPreferences(t)}),window.alert("There was an error updating your preferences. Please try again later.")},postDealsPreferences:function(e,t){var r=this;this.updateDealsWaitingStatus(t,!0),this.trigger(this.getState()),$j.post("/deals/signup",{format:"json",contentType:"application/json",d_type_preferences:e.deal_types,d_retailer_preferences:e.retailers,d_genre_uri_preferences:e.deal_genre_uris}).done(function(e){r.updateDealsPreferences(e,t)}).fail(function(){r.handleUpdateDealsPreferencesFailure()}).always(function(){r.updateDealsWaitingStatus(t,!1),r.trigger(r.getState())})},onUpdatePreferences:function(e,t,r){t===f.DEALS&&(u["default"].includes(e.deal_types,"genre")&&u["default"].isEmpty(e.deal_genre_uris)&&(e.deal_genre_uris=[p]),this.updateDealsPreferences(e),this.postDealsPreferences(e,r))},getInitialState:v,getState:v,reset:function(){g.get().reset(_)}})},{"../../../react_actions/user/preferences/user_preferences_actions":53,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],278:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ERROR_MESSAGE=void 0;var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../../../react_actions/user/show/block_user_actions"),u=o(l),d=e("../../user_relationships/friend_follow_module_store"),c=o(d),p=e("../../../modules/flash_message_helper"),f=e("../../../modules/ajax/ajax_helper"),m=e("lodash"),h={blockInProgress:!1},_=new i["default"](h),g=function(){return _.get()},v=r.DEFAULT_ERROR_MESSAGE="Something went wrong with your request. Please\n  try again later.";r["default"]=s["default"].createStore({listenables:[u["default"]],getState:g,getInitialState:function(){return g()},initializeWith:function(e){var t=Object.assign({},h,e);g().set(t),this.trigger(g())},onBlockMember:function(e){var t=this;g().set({blockInProgress:!0}),this.trigger(g());var r=void 0;return(0,f.httpPost)("/user/"+e+"/block_member",{data:{format:"json"}}).done(function(e){(0,p.flashSuccessMessage)(e.message),g().set({isBlocked:e.isBlocked}),c["default"].receiveUnfriend(),t.trigger(g())}).fail(function(e){r=(0,m.get)(e,"message"),r||(r=v),(0,p.flashErrorMessage)(r)}).always(function(){g().set({blockInProgress:!1}),t.trigger(g())})},reset:function(){g().reset(h)}})},{"../../../modules/ajax/ajax_helper":5,"../../../modules/flash_message_helper":22,"../../../react_actions/user/show/block_user_actions":54,"../../user_relationships/friend_follow_module_store":282,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],279:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("lodash"),u=o(l),d=e("../../react_actions/user/user_follow_actions"),c=o(d),p=new i["default"]({}),f=function(){return p.get()},m=function(e,t){return f()[e][t]},h=function(e,t){return f()[e].set(t)},_=function(e,t){return f()[e][t]},g=function(e){h(e,{error:null})},v=function(e){var t=_(e,"isFollowing"),r={isFollowing:!t};h(e,r)},y=function(e){h(e,{buttonEnabled:!0})},b=function(e){h(e,{buttonEnabled:!1})},S=s["default"].createStore({listenables:c["default"],getState:f,getInitialState:f,initializeWith:function(e){var t=u["default"].transform(e,function(e,t,r){e[r]={error:null,buttonEnabled:!0,isBlocked:t.isBlocked,allowsFollow:t.allowsFollow,source:t.source||!1,isFollowing:t.isFollowing,friendshipStatus:t.friendshipStatus}});f().set(t)},updateWith:function(e){this.initializeWith(e)},reset:function(){f().reset({})},onFollow:function(e){var t=this,r=m(e,"source"),o="AnnotatedBooksPage"===r,n="ReadingNotesListPage"===r;b(e),g(e),this.trigger(this.getState()),$j.post("/user/"+e+"/followers",{format:"json",from_annotated_books_page:o,from_reading_notes_list_page:n}).done(function(t){if("success"===t.status)v(e);else{var r={error:t.message};h(e,r)}}).always(function(){y(e),t.trigger(t.getState())})},onUnFollow:function(e){var t=this;b(e),g(e),this.trigger(this.getState()),$j.ajax({type:"DELETE",url:"/user/"+e+"/followers/stop_following",data:{format:"json"}}).done(function(){v(e)}).fail(function(){}).always(function(){y(e),t.trigger(t.getState())})}});r["default"]=S},{"../../react_actions/user/user_follow_actions":55,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],280:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/user_agent_capabilities_actions"),u=o(l),d={touch:!1},c=new i["default"](d);r["default"]=s["default"].createStore({listenables:[u["default"]],initializeWith:function(e){c.get().reset(e)},reset:function(){c.get().reset(d)},getInitialState:function(){return c.get()},onUserAgentGainsTouch:function(){c.get().set("touch",!0),this.trigger(c.get())},onUserAgentLosesTouch:function(){c.get().set("touch",!1),this.trigger(c.get())}})},{"../react_actions/user_agent_capabilities_actions":56,"freezer-js":"freezer-js",reflux:"reflux"}],281:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=e("reflux"),a=o(s),i=e("freezer-js"),l=o(i),u=e("../modules/ajax/ajax_helper"),d=e("../react_actions/user_not_interested_actions"),c=o(d),p={"default":{isFlashMessage:!1,isClosed:!1}},f=new l["default"](p),m=function(){return f.get()},h=function(e){m().reset((0,n.merge)({},p,e))};r["default"]=a["default"].createStore({listenables:[c["default"]],getState:m,getInitialState:m,reset:function(){h({})},setDataForKey:function(e,t){var r={};r[e]=t,m().set((0,n.merge)({},m(),r))},onAddBookIDToState:function(e){this.setDataForKey(e,m()["default"]),this.trigger(m())},onIsFlashMessageForBook:function(e){m()[e].isFlashMessage},onCloseFlashMessage:function(e){this.setDataForKey(e,{isClosed:!0}),this.trigger(m())},userNotInterestedHttpPost:function(e){return(0,u.httpPost)("/user_not_interested_works",{data:{user_not_interested_work:{book_id:e,source:"react"}}})},onUserNotInterested:function(e){var t=this;this.userNotInterestedHttpPost(e).done(function(){t.setDataForKey(e,{isFlashMessage:!0}),t.trigger(m())}).fail(function(){window.alert("There was an error marking this book as not interested, please try again.")})},undoUserNotInterestedHttpDelete:function(e){return(0,u.httpDelete)("/user_not_interested_works/undo",{data:{user_not_interested_work:{book_id:e}}})},onUndoUserNotInterested:function(e){var t=this;this.undoUserNotInterestedHttpDelete(e).done(function(){t.setDataForKey(e,{isFlashMessage:!1}),t.trigger(m())}).fail(function(){window.alert("There was an error undoing this action, please try again.")})}})},{"../modules/ajax/ajax_helper":5,"../react_actions/user_not_interested_actions":57,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],282:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../../react_actions/user_relationships/friend_follow_actions"),u=o(l),d=e("../../modules/ajax/ajax_helper"),c=e("lodash"),p=e("../../modules/flash_message_helper"),f={inProgress:!1},m=new i["default"](f),h=function(){return m.get()};r["default"]=s["default"].createStore({listenables:[u["default"]],getState:h,getInitialState:function(){return h()},initializeWith:function(e){var t=Object.assign({},f,e);h().set(t),this.trigger(h())},startAjaxRequest:function(){h().set({inProgress:!0}),this.trigger(h())},finishAjaxRequest:function(){h().set({inProgress:!1}),this.trigger(h())},receiveUnfriend:function(){h().set({isFriend:!1,isFollowing:!1,isPendingFriendRequestTo:!1}),this.trigger(h())},onUnfriend:function(e){var t=this;this.startAjaxRequest(),(0,d.httpPost)("/friend/destroy/"+e+".json").done(function(){t.receiveUnfriend()}).fail(function(e){(0,p.flashErrorMessage)((0,c.get)(e,"message",d.DEFAULT_ERROR_MESSAGE))}).always(this.finishAjaxRequest)},onCancelFriendRequest:function(e){this.startAjaxRequest(),(0,d.httpPost)("/friend/cancel_request/"+e+".json").done(function(){h().set({isFollowing:!1,isPendingFriendRequestTo:!1})}).fail(function(e){(0,p.flashErrorMessage)((0,c.get)(e,"message",d.DEFAULT_ERROR_MESSAGE))}).always(this.finishAjaxRequest)},onFollow:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.startAjaxRequest(),(0,d.httpPost)("/user/"+e+"/followers.json",{data:t}).done(function(){h().set({isFollowing:!0})}).fail(function(e){(0,p.flashErrorMessage)((0,c.get)(e,"message",d.DEFAULT_ERROR_MESSAGE))}).always(this.finishAjaxRequest)},onUnfollow:function(e){this.startAjaxRequest(),(0,d.httpDelete)("/user/"+e+"/followers/stop_following.json").done(function(){h().set({isFollowing:!1,isPendingFriendRequestTo:!1})}).fail(function(e){(0,p.flashErrorMessage)((0,c.get)(e,"message",d.DEFAULT_ERROR_MESSAGE))}).always(this.finishAjaxRequest)},onAcceptFriendRequest:function(e){this.startAjaxRequest(),(0,d.httpPost)("/friend/confirm_request.json",{data:{id:e}}).done(function(){h().set({isFriend:!0,isPendingFriendRequestFrom:!1})}).fail(function(e){(0,p.flashErrorMessage)((0,c.get)(e,"message",d.DEFAULT_ERROR_MESSAGE))}).always(this.finishAjaxRequest)},reset:function(){h().reset(f)}})},{"../../modules/ajax/ajax_helper":5,"../../modules/flash_message_helper":22,"../../react_actions/user_relationships/friend_follow_actions":58,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],283:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/shelvings_actions"),c=o(d),p=e("../react_actions/user_shelves_actions"),f=o(p),m=e("../react_actions/want_to_read_menu_actions"),h=o(m),_=e("../modules/default_shelves"),g={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},v=new u["default"](g),y=function(){return v.get()},b=function(e,t,r){var o=s["default"].find(y()[t],{
name:e});o&&o.set("bookCount",o.bookCount+r)};r["default"]=i["default"].createStore({listenables:[f["default"],{bookShelved:c["default"].bookShelved,bookUnshelved:c["default"].bookUnshelved}],getInitialState:v.get,getState:y,defaultShelves:function(){var e=y().defaultShelves;return 0===e.length?_.DEFAULT_SHELVES:{READ:s["default"].find(e,"name","read"),CURRENTLY_READING:s["default"].find(e,"name","currently-reading"),WANT_TO_READ:s["default"].find(e,"name","to-read")}},initializeWith:function(e){v.get().reset(e)},reset:function(){v.get().reset(g)},updateWith:function(e){v.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=s["default"].clone(v.get().nonExclusiveShelves)||[],r=s["default"].map(t,function(e){return e.name});s["default"].includes(r,e)||(t.unshift({name:e,url:"",displayName:e,bookCount:0}),v.get().set("nonExclusiveShelves",t),h["default"].updateShelves(),this.trigger(y()))},onRemoveNonExclusiveShelf:function(e){var t=s["default"].clone(v.get().nonExclusiveShelves)||[],r=s["default"].map(t,function(e){return e.name});s["default"].includes(r,e)&&(s["default"].remove(t,function(t){return t.name===e}),v.get().set("nonExclusiveShelves",t),h["default"].updateShelves(),this.trigger(y()))},onBookShelved:function(e){var t=e.shelves||{};s["default"].each(t,function(e,t){s["default"].each(e,function(e){b(e,t,1)})}),this.trigger(y())},onBookUnshelved:function(e){var t=e.shelves||{};s["default"].each(t,function(e,t){s["default"].each(e,function(e){b(e,t,-1)})}),this.trigger(y())}})},{"../modules/default_shelves":20,"../react_actions/shelvings_actions":51,"../react_actions/user_shelves_actions":59,"../react_actions/want_to_read_menu_actions":60,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],284:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/want_to_read_menu_actions"),c=o(d),p=e("./user_shelves_store"),f=o(p),m={},h=new u["default"](m),_=function(){return h.get()},g=function(e,t){var r=[],o=t.defaultShelves.concat(t.customExclusiveShelves||[]);return r=s["default"].isEmpty(e)?o:s["default"].filter(o,function(t){return t.name.match(new RegExp(e,"i"))})},v=function(e,t){var r=[];return r=s["default"].isEmpty(e)?t.nonExclusiveShelves:s["default"].filter(t.nonExclusiveShelves,function(t){return t.name.match(new RegExp(e,"i"))})},y=function(e){var t=f["default"].getState(),r=g(e,t),o=v(e,t);return{displayableExclusiveShelves:r,displayableNonExclusiveShelves:o,shelfNameFilter:e}},b=function(e,t){_().set(t,y(e))},S=function(e){var t=_()[e].shelfNameFilter;_().set(e,y(t))},k=function(e){return s["default"].has(_(),e)||b("",e),_()[e]},T=function(e){_().reset(s["default"].merge({},m,e))};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:function(e){return s["default"].isUndefined(e)?_():k(e)},getState:_,initializeWith:function(e){T(e)},reset:function(){T(m)},updateWith:function(e){s["default"].each(s["default"].keys(e),function(t){_().set(t,e[t])}),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},onUpdateShelfNameFilter:function(e,t){b(e,t),k(t).set("showAddShelfTextbox",!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){k(e).set("showAddShelfTextbox",!0),this.notifyListeners()},onCloseAddShelfTextbox:function(e){k(e).set("showAddShelfTextbox",!1),this.notifyListeners()},onUpdateShelves:function(){s["default"].each(s["default"].keys(_()),function(e){S(e)}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":60,"./user_shelves_store":283,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],285:[function(e,t,r){/**
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */
"use strict";var o=function(e,t,r,o,n,s,a,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,o,n,s,a,i],d=0;l=new Error(t.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=o},{}],286:[function(e,t,r){"use strict";function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}var n=e("strict-uri-encode"),s=e("object-assign");r.extract=function(e){return e.split("?")[1]||""},r.parse=function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var r=e.replace(/\+/g," ").split("="),o=r.shift(),n=r.length>0?r.join("="):void 0;o=decodeURIComponent(o),n=void 0===n?null:decodeURIComponent(n),void 0===t[o]?t[o]=n:Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]}),t):t},r.stringify=function(e,t){var r={encode:!0,strict:!0};return t=s(r,t),e?Object.keys(e).sort().map(function(r){var n=e[r];if(void 0===n)return"";if(null===n)return o(r,t);if(Array.isArray(n)){var s=[];return n.slice().forEach(function(e){void 0!==e&&(null===e?s.push(o(r,t)):s.push(o(r,t)+"="+o(e,t)))}),s.join("&")}return o(r,t)+"="+o(n,t)}).filter(function(e){return e.length>0}).join("&"):""}},{"object-assign":"object-assign","strict-uri-encode":327}],287:[function(e,t,r){"use strict";function o(e,t,r){function o(){return a=!0,i?void(u=[].concat(Array.prototype.slice.call(arguments))):void r.apply(this,arguments)}function n(){if(!a&&(l=!0,!i)){for(i=!0;!a&&e>s&&l;)l=!1,t.call(this,s++,n,o);return i=!1,a?void r.apply(this,u):void(s>=e&&l&&(a=!0,r()))}}var s=0,a=!1,i=!1,l=!1,u=void 0;n()}function n(e,t,r){function o(e,t,o){a||(t?(a=!0,r(t)):(s[e]=o,a=++i===n,a&&r(null,s)))}var n=e.length,s=[];if(0===n)return r(null,s);var a=!1,i=0;e.forEach(function(e,r){t(e,r,function(e,t){o(r,e,t)})})}r.__esModule=!0,r.loopAsync=o,r.mapAsync=n},{}],288:[function(e,t,r){"use strict";function o(e){return"@@contextSubscriber/"+e}function n(e){var t,r,n=o(e),s=n+"/listeners",a=n+"/eventIndex",l=n+"/subscribe";return r={childContextTypes:(t={},t[n]=i.isRequired,t),getChildContext:function(){var e;return e={},e[n]={eventIndex:this[a],subscribe:this[l]},e},componentWillMount:function(){this[s]=[],this[a]=0},componentWillReceiveProps:function(){this[a]++},componentDidUpdate:function(){var e=this;this[s].forEach(function(t){return t(e[a])})}},r[l]=function(e){var t=this;return this[s].push(e),function(){t[s]=t[s].filter(function(t){return t!==e})}},r}function s(e){var t,r,n=o(e),s=n+"/lastRenderedEventIndex",a=n+"/handleContextUpdate",l=n+"/unsubscribe";return r={contextTypes:(t={},t[n]=i,t),getInitialState:function(){var e;return this.context[n]?(e={},e[s]=this.context[n].eventIndex,e):{}},componentDidMount:function(){this.context[n]&&(this[l]=this.context[n].subscribe(this[a]))},componentWillReceiveProps:function(){var e;this.context[n]&&this.setState((e={},e[s]=this.context[n].eventIndex,e))},componentWillUnmount:function(){this[l]&&(this[l](),this[l]=null)}},r[a]=function(e){if(e!==this.state[s]){var t;this.setState((t={},t[s]=e,t))}},r}r.__esModule=!0,r.ContextProvider=n,r.ContextSubscriber=s;var a=e("react"),i=a.PropTypes.shape({subscribe:a.PropTypes.func.isRequired,eventIndex:a.PropTypes.number.isRequired})},{react:"react"}],289:[function(e,t,r){"use strict";function o(e,t,r){return e[t]?new Error("<"+r+'> should not have a "'+t+'" prop'):void 0}r.__esModule=!0,r.routes=r.route=r.components=r.component=r.history=void 0,r.falsy=o;var n=e("react"),s=n.PropTypes.func,a=n.PropTypes.object,i=n.PropTypes.arrayOf,l=n.PropTypes.oneOfType,u=n.PropTypes.element,d=n.PropTypes.shape,c=n.PropTypes.string,p=(r.history=d({listen:s.isRequired,push:s.isRequired,replace:s.isRequired,go:s.isRequired,goBack:s.isRequired,goForward:s.isRequired}),r.component=l([s,c])),f=(r.components=l([p,a]),r.route=l([a,u]));r.routes=l([f,i(f)])},{react:"react"}],290:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function s(e){return 0===e.button}function a(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function l(e,t){return"function"==typeof e?e(t.location):e}r.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},d=e("react"),c=o(d),p=e("invariant"),f=o(p),m=e("./PropTypes"),h=e("./ContextUtils"),_=c["default"].PropTypes,g=_.bool,v=_.object,y=_.string,b=_.func,S=_.oneOfType,k=c["default"].createClass({displayName:"Link",mixins:[(0,h.ContextSubscriber)("router")],contextTypes:{router:m.routerShape},propTypes:{to:S([y,v,b]),query:v,hash:y,state:v,activeStyle:v,activeClassName:y,onlyActiveOnIndex:g.isRequired,onClick:b,target:y},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented){var t=this.context.router;t?void 0:(0,f["default"])(!1),!a(e)&&s(e)&&(this.props.target||(e.preventDefault(),t.push(l(this.props.to,t))))}},render:function(){var e=this.props,t=e.to,r=e.activeClassName,o=e.activeStyle,s=e.onlyActiveOnIndex,a=n(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),d=this.context.router;if(d){if(null==t)return c["default"].createElement("a",a);var p=l(t,d);a.href=d.createHref(p),(r||null!=o&&!i(o))&&d.isActive(p,s)&&(r&&(a.className?a.className+=" "+r:a.className=r),o&&(a.style=u({},a.style,o)))}return c["default"].createElement("a",u({},a,{onClick:this.handleClick}))}});r["default"]=k,t.exports=r["default"]},{"./ContextUtils":288,"./PropTypes":293,invariant:285,react:"react"}],291:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){for(var t="",r=[],o=[],s=void 0,a=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;s=i.exec(e);)s.index!==a&&(o.push(e.slice(a,s.index)),t+=n(e.slice(a,s.index))),s[1]?(t+="([^/]+)",r.push(s[1])):"**"===s[0]?(t+="(.*)",r.push("splat")):"*"===s[0]?(t+="(.*?)",r.push("splat")):"("===s[0]?t+="(?:":")"===s[0]&&(t+=")?"),o.push(s[0]),a=i.lastIndex;return a!==e.length&&(o.push(e.slice(a,e.length)),t+=n(e.slice(a,e.length))),{pattern:e,regexpSource:t,paramNames:r,tokens:o}}function a(e){return f[e]||(f[e]=s(e)),f[e]}function i(e,t){"/"!==e.charAt(0)&&(e="/"+e);var r=a(e),o=r.regexpSource,n=r.paramNames,s=r.tokens;"/"!==e.charAt(e.length-1)&&(o+="/?"),"*"===s[s.length-1]&&(o+="$");var i=t.match(new RegExp("^"+o,"i"));if(null==i)return null;var l=i[0],u=t.substr(l.length);if(u){if("/"!==l.charAt(l.length-1))return null;u="/"+u}return{remainingPathname:u,paramNames:n,paramValues:i.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function l(e){return a(e).paramNames}function u(e,t){var r=i(e,t);if(!r)return null;var o=r.paramNames,n=r.paramValues,s={};return o.forEach(function(e,t){s[e]=n[t]}),s}function d(e,t){t=t||{};for(var r=a(e),o=r.tokens,n=0,s="",i=0,l=[],u=void 0,d=void 0,c=void 0,f=0,m=o.length;m>f;++f)if(u=o[f],"*"===u||"**"===u)c=Array.isArray(t.splat)?t.splat[i++]:t.splat,null!=c||n>0?void 0:(0,p["default"])(!1),null!=c&&(s+=encodeURI(c));else if("("===u)l[n]="",n+=1;else if(")"===u){var h=l.pop();n-=1,n?l[n-1]+=h:s+=h}else if(":"===u.charAt(0))if(d=u.substring(1),c=t[d],null!=c||n>0?void 0:(0,p["default"])(!1),null==c){if(n){l[n-1]="";for(var _=o.indexOf(u),g=o.slice(_,o.length),v=-1,y=0;y<g.length;y++)if(")"==g[y]){v=y;break}v>0?void 0:(0,p["default"])(!1),f=_+v-1}}else n?l[n-1]+=encodeURIComponent(c):s+=encodeURIComponent(c);else n?l[n-1]+=u:s+=u;return 0>=n?void 0:(0,p["default"])(!1),s.replace(/\/+/g,"/")}r.__esModule=!0,r.compilePattern=a,r.matchPattern=i,r.getParamNames=l,r.getParams=u,r.formatPattern=d;var c=e("invariant"),p=o(c),f=Object.create(null)},{invariant:285}],292:[function(e,t,r){"use strict";function o(e){return e&&"function"==typeof e.then}r.__esModule=!0,r.isPromise=o},{}],293:[function(e,t,r){"use strict";r.__esModule=!0,r.locationShape=r.routerShape=void 0;var o=e("react"),n=o.PropTypes.func,s=o.PropTypes.object,a=o.PropTypes.shape,i=o.PropTypes.string;r.routerShape=a({push:n.isRequired,replace:n.isRequired,go:n.isRequired,goBack:n.isRequired,goForward:n.isRequired,setRouteLeaveHook:n.isRequired,isActive:n.isRequired}),r.locationShape=a({pathname:i.isRequired,search:i.isRequired,state:s,action:i.isRequired,key:i})},{react:"react"}],294:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("react"),s=o(n),a=e("invariant"),i=o(a),l=e("./RouteUtils"),u=e("./InternalPropTypes"),d=s["default"].PropTypes,c=d.string,p=d.func,f=s["default"].createClass({displayName:"Route",statics:{createRouteFromReactElement:l.createRouteFromReactElement},propTypes:{path:c,component:u.component,components:u.components,getComponent:p,getComponents:p},render:function(){(0,i["default"])(!1)}});r["default"]=f,t.exports=r["default"]},{"./InternalPropTypes":289,"./RouteUtils":295,invariant:285,react:"react"}],295:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return null==e||p["default"].isValidElement(e)}function s(e){return n(e)||Array.isArray(e)&&e.every(n)}function a(e,t){return d({},e,t)}function i(e){var t=e.type,r=a(t.defaultProps,e.props);if(r.children){var o=l(r.children,r);o.length&&(r.childRoutes=o),delete r.children}return r}function l(e,t){var r=[];return p["default"].Children.forEach(e,function(e){if(p["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var o=e.type.createRouteFromReactElement(e,t);o&&r.push(o)}else r.push(i(e))}),r}function u(e){return s(e)?e=l(e):e&&!Array.isArray(e)&&(e=[e]),e}r.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r.isReactChildren=s,r.createRouteFromReactElement=i,r.createRoutesFromReactChildren=l,r.createRoutes=u;var c=e("react"),p=o(c)},{react:"react"}],296:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=e("invariant"),i=o(a),l=e("react"),u=o(l),d=e("./createTransitionManager"),c=o(d),p=e("./InternalPropTypes"),f=e("./RouterContext"),m=o(f),h=e("./RouteUtils"),_=e("./RouterUtils"),g=e("./routerWarning"),v=(o(g),u["default"].PropTypes),y=v.func,b=v.object,S=u["default"].createClass({displayName:"Router",propTypes:{history:b,children:p.routes,routes:p.routes,render:y,createElement:y,onError:y,onUpdate:y,matchContext:b},getDefaultProps:function(){return{render:function(e){return u["default"].createElement(m["default"],e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;if(t)return t.router;var r=this.props.history;return(0,_.createRouterObject)(r,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,r=this.props,o=r.routes,n=r.children;return t.getCurrentLocation?void 0:(0,i["default"])(!1),(0,c["default"])(t,(0,h.createRoutes)(o||n))},componentWillMount:function(){var e=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(t,r){t?e.handleError(t):((0,_.assignRouterState)(e.router,r),e.setState(r,e.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function k(){var e=this.state,t=e.location,r=e.routes,o=e.params,a=e.components,i=this.props,l=i.createElement,k=i.render,u=n(i,["createElement","render"]);return null==t?null:(Object.keys(S.propTypes).forEach(function(e){return delete u[e]}),k(s({},u,{router:this.router,location:t,routes:r,params:o,components:a,createElement:l})))}});r["default"]=S,t.exports=r["default"]},{"./InternalPropTypes":289,"./RouteUtils":295,"./RouterContext":297,"./RouterUtils":298,"./createTransitionManager":304,"./routerWarning":310,invariant:285,react:"react"}],297:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("invariant"),i=o(a),l=e("react"),u=o(l),d=e("./getRouteParams"),c=o(d),p=e("./ContextUtils"),f=e("./RouteUtils"),m=u["default"].PropTypes,h=m.array,_=m.func,g=m.object,v=u["default"].createClass({displayName:"RouterContext",mixins:[(0,p.ContextProvider)("router")],propTypes:{router:g.isRequired,location:g.isRequired,routes:h.isRequired,params:g.isRequired,components:h.isRequired,createElement:_.isRequired},getDefaultProps:function(){return{createElement:u["default"].createElement}},childContextTypes:{router:g.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,r=t.location,o=t.routes,a=t.params,l=t.components,d=t.router,p=null;return l&&(p=l.reduceRight(function(t,i,l){if(null==i)return t;var u=o[l],p=(0,c["default"])(u,a),m={location:r,params:a,route:u,router:d,routeParams:p,routes:o};if((0,f.isReactChildren)(t))m.children=t;else if(t)for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&(m[h]=t[h]);if("object"===("undefined"==typeof i?"undefined":s(i))){var _={};for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(_[g]=e.createElement(i[g],n({key:g},m)));return _}return e.createElement(i,m)},p)),null===p||p===!1||u["default"].isValidElement(p)?void 0:(0,i["default"])(!1),p}});r["default"]=v,t.exports=r["default"]},{"./ContextUtils":288,"./RouteUtils":295,"./getRouteParams":306,invariant:285,react:"react"}],298:[function(e,t,r){"use strict";function o(e,t,r){var o=s({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive});return n(o,r)}function n(e,t){var r=t.location,o=t.params,n=t.routes;return e.location=r,e.params=o,e.routes=n,e}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r.createRouterObject=o,r.assignRouterState=n},{}],299:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r,o){var n=e.length<r,s=function(){for(var r=arguments.length,o=Array(r),s=0;r>s;s++)o[s]=arguments[s];if(e.apply(t,o),n){var a=o[o.length-1];a()}};return o.add(s),s}function s(e){return e.reduce(function(e,t){return t.onEnter&&e.push(n(t.onEnter,t,3,f)),e},[])}function a(e){return e.reduce(function(e,t){return t.onChange&&e.push(n(t.onChange,t,4,m)),e},[])}function i(e,t,r){function o(e){n=e}if(!e)return void r();var n=void 0;(0,c.loopAsync)(e,function(e,r,s){t(e,o,function(e){e||n?s(e,n):r()})},r)}function l(e,t,r){f.clear();var o=s(e);return i(o.length,function(e,r,n){var s=function(){f.has(o[e])&&(n(),f.remove(o[e]))};o[e](t,r,s)},r)}function u(e,t,r,o){m.clear();var n=a(e);return i(n.length,function(e,o,s){var a=function(){m.has(n[e])&&(s(),m.remove(n[e]))};n[e](t,r,o,a)},o)}function d(e,t){for(var r=0,o=e.length;o>r;++r)e[r].onLeave&&e[r].onLeave.call(e[r],t)}r.__esModule=!0,r.runEnterHooks=l,r.runChangeHooks=u,r.runLeaveHooks=d;var c=e("./AsyncUtils"),p=function h(){var e=this;o(this,h),this.hooks=[],this.add=function(t){return e.hooks.push(t)},this.remove=function(t){return e.hooks=e.hooks.filter(function(e){return e!==t})},this.has=function(t){return-1!==e.hooks.indexOf(t)},this.clear=function(){return e.hooks=[]}},f=new p,m=new p},{"./AsyncUtils":287}],300:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("history/lib/createBrowserHistory"),s=o(n),a=e("./createRouterHistory"),i=o(a);r["default"]=(0,i["default"])(s["default"]),t.exports=r["default"]},{"./createRouterHistory":303,"history/lib/createBrowserHistory":321}],301:[function(e,t,r){"use strict";function o(e,t,r){if(!e.path)return!1;var o=(0,s.getParamNames)(e.path);return o.some(function(e){return t.params[e]!==r.params[e]})}function n(e,t){var r=e&&e.routes,n=t.routes,s=void 0,a=void 0,i=void 0;return r?!function(){var l=!1;s=r.filter(function(r){if(l)return!0;var s=-1===n.indexOf(r)||o(r,e,t);return s&&(l=!0),s}),s.reverse(),i=[],a=[],n.forEach(function(e){var t=-1===r.indexOf(e),o=-1!==s.indexOf(e);t||o?i.push(e):a.push(e)})}():(s=[],a=[],i=n),{leaveRoutes:s,changeRoutes:a,enterRoutes:i}}r.__esModule=!0;var s=e("./PatternUtils");r["default"]=n,t.exports=r["default"]},{"./PatternUtils":291}],302:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=(0,d["default"])(e),r=function(){return t},o=(0,a["default"])((0,l["default"])(r))(e);return o}r.__esModule=!0,r["default"]=n;var s=e("history/lib/useQueries"),a=o(s),i=e("history/lib/useBasename"),l=o(i),u=e("history/lib/createMemoryHistory"),d=o(u);t.exports=r["default"]},{"history/lib/createMemoryHistory":323,"history/lib/useBasename":325,"history/lib/useQueries":326}],303:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r["default"]=function(e){var t=void 0;return a&&(t=(0,s["default"])(e)()),t};var n=e("./useRouterHistory"),s=o(n),a=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=r["default"]},{"./useRouterHistory":311}],304:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function s(e,t){function r(t,r){return t=e.createLocation(t),(0,p["default"])(t,r,y.location,y.routes,y.params)}function o(e,r){b&&b.location===e?s(b,r):(0,_["default"])(t,e,function(t,o){t?r(t):o?s(a({},o,{location:e}),r):r()})}function s(e,t){function r(r,n){return r||n?o(r,n):void(0,m["default"])(e,function(r,o){r?t(r):t(null,null,y=a({},e,{components:o}))})}function o(e,r){e?t(e):t(null,r)}var n=(0,u["default"])(y,e),s=n.leaveRoutes,i=n.changeRoutes,l=n.enterRoutes;(0,d.runLeaveHooks)(s,y),s.filter(function(e){return-1===l.indexOf(e)}).forEach(h),(0,d.runChangeHooks)(i,y,e,function(t,n){return t||n?o(t,n):void(0,d.runEnterHooks)(l,e,r)})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return e.__id__||t&&(e.__id__=S++)}function l(e){return e.map(function(e){return k[i(e)]}).filter(function(e){return e})}function c(e,r){(0,_["default"])(t,e,function(t,o){if(null==o)return void r();b=a({},o,{location:e});for(var n=l((0,u["default"])(y,b).leaveRoutes),s=void 0,i=0,d=n.length;null==s&&d>i;++i)s=n[i](e);r(s)})}function f(){if(y.routes){for(var e=l(y.routes),t=void 0,r=0,o=e.length;"string"!=typeof t&&o>r;++r)t=e[r]();return t}}function h(e){var t=i(e);t&&(delete k[t],n(k)||(T&&(T(),T=null),P&&(P(),P=null)))}function g(t,r){var o=!n(k),s=i(t,!0);return k[s]=r,o&&(T=e.listenBefore(c),e.listenBeforeUnload&&(P=e.listenBeforeUnload(f))),function(){h(t)}}function v(t){function r(r){y.location===r?t(null,y):o(r,function(r,o,n){r?t(r):o?e.replace(o):n&&t(null,n)})}var n=e.listen(r);return y.location?t(null,y):r(e.getCurrentLocation()),n}var y={},b=void 0,S=1,k=Object.create(null),T=void 0,P=void 0;return{isActive:r,match:o,listenBeforeLeavingRoute:g,listen:v}}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r["default"]=s;var i=e("./routerWarning"),l=(o(i),e("./computeChangedRoutes")),u=o(l),d=e("./TransitionUtils"),c=e("./isActive"),p=o(c),f=e("./getComponents"),m=o(f),h=e("./matchRoutes"),_=o(h);t.exports=r["default"]},{"./TransitionUtils":299,"./computeChangedRoutes":301,"./getComponents":305,"./isActive":307,"./matchRoutes":309,"./routerWarning":310}],305:[function(e,t,r){"use strict";function o(e,t,r){if(t.component||t.components)return void r(null,t.component||t.components);var o=t.getComponent||t.getComponents;if(o){var n=o.call(t,e,r);(0,a.isPromise)(n)&&n.then(function(e){return r(null,e)},r)}else r()}function n(e,t){(0,s.mapAsync)(e.routes,function(t,r,n){o(e,t,n)},t)}r.__esModule=!0;var s=e("./AsyncUtils"),a=e("./PromiseUtils");r["default"]=n,t.exports=r["default"]},{"./AsyncUtils":287,"./PromiseUtils":292}],306:[function(e,t,r){"use strict";function o(e,t){var r={};return e.path?((0,n.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r):r}r.__esModule=!0;var n=e("./PatternUtils");r["default"]=o,t.exports=r["default"]},{"./PatternUtils":291}],307:[function(e,t,r){"use strict";function o(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return o(e,t[r])});if("object"===("undefined"==typeof e?"undefined":l(e))){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))if(void 0===e[r]){if(void 0!==t[r])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,r))return!1;if(!o(e[r],t[r]))return!1}return!0}return String(e)===String(t)}function n(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}function s(e,t,r){for(var o=e,n=[],s=[],a=0,i=t.length;i>a;++a){var l=t[a],d=l.path||"";if("/"===d.charAt(0)&&(o=e,n=[],s=[]),null!==o&&d){var c=(0,u.matchPattern)(d,o);if(c?(o=c.remainingPathname,n=[].concat(n,c.paramNames),s=[].concat(s,c.paramValues)):o=null,""===o)return n.every(function(e,t){return String(s[t])===String(r[e])})}}return!1}function a(e,t){return null==t?null==e:null==e?!0:o(e,t)}function i(e,t,r,o,i){var l=e.pathname,u=e.query;return null==r?!1:("/"!==l.charAt(0)&&(l="/"+l),n(l,r.pathname)||!t&&s(l,o,i)?a(u,r.query):!1)}r.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r["default"]=i;var u=e("./PatternUtils");t.exports=r["default"]},{"./PatternUtils":291}],308:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function s(e,t){var r=e.history,o=e.routes,s=e.location,l=n(e,["history","routes","location"]);r||s?void 0:(0,u["default"])(!1),r=r?r:(0,c["default"])(l);var d=(0,f["default"])(r,(0,m.createRoutes)(o));s=s?r.createLocation(s):r.getCurrentLocation(),d.match(s,function(e,o,n){var s=void 0;if(n){var l=(0,h.createRouterObject)(r,d,n);s=a({},n,{router:l,matchContext:{transitionManager:d,router:l}})}t(e,o&&r.createLocation(o,i.REPLACE),s)})}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},i=e("history/lib/Actions"),l=e("invariant"),u=o(l),d=e("./createMemoryHistory"),c=o(d),p=e("./createTransitionManager"),f=o(p),m=e("./RouteUtils"),h=e("./RouterUtils");r["default"]=s,t.exports=r["default"]},{"./RouteUtils":295,"./RouterUtils":298,"./createMemoryHistory":302,"./createTransitionManager":304,"history/lib/Actions":312,invariant:285}],309:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,o,n){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var s=!0,a=void 0,l={location:t,params:i(r,o)},u=e.getChildRoutes(l,function(e,t){return t=!e&&(0,_.createRoutes)(t),s?void(a=[e,t]):void n(e,t)});return(0,f.isPromise)(u)&&u.then(function(e){return n(null,(0,_.createRoutes)(e))},n),s=!1,a}function s(e,t,r,o,n){if(e.indexRoute)n(null,e.indexRoute);else if(e.getIndexRoute){var a={location:t,params:i(r,o)},l=e.getIndexRoute(a,function(e,t){n(e,!e&&(0,_.createRoutes)(t)[0])});(0,f.isPromise)(l)&&l.then(function(e){return n(null,(0,_.createRoutes)(e)[0])},n)}else e.childRoutes?!function(){var a=e.childRoutes.filter(function(e){return!e.path});(0,p.loopAsync)(a.length,function(e,n,i){s(a[e],t,r,o,function(t,r){if(t||r){var o=[a[e]].concat(Array.isArray(r)?r:[r]);i(t,o)}else n()})},function(e,t){n(null,t)})}():n()}function a(e,t,r){return t.reduce(function(e,t,o){var n=r&&r[o];return Array.isArray(e[t])?e[t].push(n):t in e?e[t]=[e[t],n]:e[t]=n,e},e)}function i(e,t){return a({},e,t)}function l(e,t,r,o,a,l){var d=e.path||"";if("/"===d.charAt(0)&&(r=t.pathname,o=[],a=[]),null!==r&&d){try{var p=(0,m.matchPattern)(d,r);p?(r=p.remainingPathname,o=[].concat(o,p.paramNames),a=[].concat(a,p.paramValues)):r=null}catch(f){l(f)}if(""===r){var h=function(){var r={routes:[e],params:i(o,a)};return s(e,t,o,a,function(e,t){if(e)l(e);else{if(Array.isArray(t)){var o;(o=r.routes).push.apply(o,t)}else t&&r.routes.push(t);l(null,r)}}),{v:void 0}}();if("object"===("undefined"==typeof h?"undefined":c(h)))return h.v}}if(null!=r||e.childRoutes){var _=function(n,s){n?l(n):s?u(s,t,function(t,r){t?l(t):r?(r.routes.unshift(e),l(null,r)):l()},r,o,a):l()},g=n(e,t,o,a,_);g&&_.apply(void 0,g)}else l()}function u(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===o&&("/"!==t.pathname.charAt(0)&&(t=d({},t,{pathname:"/"+t.pathname})),o=t.pathname),(0,p.loopAsync)(e.length,function(r,a,i){l(e[r],t,o,n,s,function(e,t){e||t?i(e,t):a()})},r)}r.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r["default"]=u;var p=e("./AsyncUtils"),f=e("./PromiseUtils"),m=e("./PatternUtils"),h=e("./routerWarning"),_=(o(h),e("./RouteUtils"));t.exports=r["default"]},{"./AsyncUtils":287,"./PatternUtils":291,"./PromiseUtils":292,"./RouteUtils":295,"./routerWarning":310}],310:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(-1!==t.indexOf("deprecated")){if(l[t])return;l[t]=!0}t="[react-router] "+t;for(var r=arguments.length,o=Array(r>2?r-2:0),n=2;r>n;n++)o[n-2]=arguments[n];i["default"].apply(void 0,[e,t].concat(o))}function s(){l={}}r.__esModule=!0,r["default"]=n,r._resetWarned=s;var a=e("warning"),i=o(a),l={}},{warning:328}],311:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){var r=(0,a["default"])((0,l["default"])(e))(t);return r}}r.__esModule=!0,r["default"]=n;var s=e("history/lib/useQueries"),a=o(s),i=e("history/lib/useBasename"),l=o(i);t.exports=r["default"]},{"history/lib/useBasename":325,"history/lib/useQueries":326}],312:[function(e,t,r){"use strict";r.__esModule=!0;r.PUSH="PUSH",r.REPLACE="REPLACE",r.POP="POP"},{}],313:[function(e,t,r){"use strict";r.__esModule=!0;r.loopAsync=function(e,t,r){var o=0,n=!1,s=!1,a=!1,i=void 0,l=function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return n=!0,s?void(i=t):void r.apply(void 0,t)},u=function d(){if(!n&&(a=!0,!s)){for(s=!0;!n&&e>o&&a;)a=!1,t(o++,d,l);return s=!1,n?void r.apply(void 0,i):void(o>=e&&a&&(n=!0,r()))}};u()}},{}],314:[function(e,t,r){"use strict";r.__esModule=!0,r.go=r.replaceLocation=r.pushLocation=r.startListener=r.getUserConfirmation=r.getCurrentLocation=void 0;var o=e("./LocationUtils"),n=e("./DOMUtils"),s=e("./DOMStateStorage"),a=e("./PathUtils"),i=e("./ExecutionEnvironment"),l="popstate",u="hashchange",d=i.canUseDOM&&!(0,n.supportsPopstateOnHashchange)(),c=function(e){var t=e&&e.key;return(0,o.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:t?(0,s.readState)(t):void 0},void 0,t)},p=r.getCurrentLocation=function(){var e=void 0;try{e=window.history.state||{}}catch(t){e={}}return c(e)},f=(r.getUserConfirmation=function(e,t){return t(window.confirm(e))},r.startListener=function(e){var t=function(t){void 0!==t.state&&e(c(t.state))};(0,n.addEventListener)(window,l,t);var r=function(){return e(p())};return d&&(0,n.addEventListener)(window,u,r),function(){(0,n.removeEventListener)(window,l,t),d&&(0,n.removeEventListener)(window,u,r)}},function(e,t){var r=e.state,o=e.key;void 0!==r&&(0,s.saveState)(o,r),t({key:o},(0,a.createPath)(e))});r.pushLocation=function(e){return f(e,function(e,t){return window.history.pushState(e,null,t)})},r.replaceLocation=function(e){return f(e,function(e,t){return window.history.replaceState(e,null,t)})},r.go=function(e){e&&window.history.go(e)}},{"./DOMStateStorage":315,"./DOMUtils":316,"./ExecutionEnvironment":317,"./LocationUtils":318,"./PathUtils":319}],315:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.readState=r.saveState=void 0;var n=e("warning"),s=(o(n),{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),a={SecurityError:!0},i="@@History/",l=function(e){return i+e};r.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(l(e)):window.sessionStorage.setItem(l(e),JSON.stringify(t))}catch(r){if(a[r.name])return;if(s[r.name]&&0===window.sessionStorage.length)return;throw r}},r.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(l(e))}catch(r){if(a[r.name])return}if(t)try{return JSON.parse(t)}catch(r){}}},{warning:328}],316:[function(e,t,r){"use strict";r.__esModule=!0;r.addEventListener=function(e,t,r){return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},r.removeEventListener=function(e,t,r){return e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)},r.supportsHistory=function(){var e=window.navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1},r.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},r.supportsPopstateOnHashchange=function(){return-1===window.navigator.userAgent.indexOf("Trident")}},{}],317:[function(e,t,r){"use strict";r.__esModule=!0;r.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],318:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.locationsAreEqual=r.statesAreEqual=r.createLocation=r.createQuery=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e;
},a=e("invariant"),i=o(a),l=e("warning"),u=(o(l),e("./PathUtils")),d=e("./Actions"),c=(r.createQuery=function(e){return s(Object.create(null),e)},r.createLocation=function(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?d.POP:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o="string"==typeof e?(0,u.parsePath)(e):e,n=o.pathname||"/",s=o.search||"",a=o.hash||"",i=o.state;return{pathname:n,search:s,hash:a,state:i,action:t,key:r}},function(e){return"[object Date]"===Object.prototype.toString.call(e)}),p=r.statesAreEqual=function f(e,t){if(e===t)return!0;var r="undefined"==typeof e?"undefined":n(e),o="undefined"==typeof t?"undefined":n(t);if(r!==o)return!1;if("function"===r?(0,i["default"])(!1):void 0,"object"===r){if(c(e)&&c(t)?(0,i["default"])(!1):void 0,!Array.isArray(e)){var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every(function(r){return f(e[r],t[r])})}return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return f(e,t[r])})}return!1};r.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&p(e.state,t.state)}},{"./Actions":312,"./PathUtils":319,invariant:285,warning:328}],319:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.createPath=r.parsePath=r.getQueryStringValueFromPath=r.stripQueryStringValueFromPath=r.addQueryStringValueToPath=void 0;var n=e("warning"),s=(o(n),r.addQueryStringValueToPath=function(e,t,r){var o=a(e),n=o.pathname,s=o.search,l=o.hash;return i({pathname:n,search:s+(-1===s.indexOf("?")?"?":"&")+t+"="+r,hash:l})},r.stripQueryStringValueFromPath=function(e,t){var r=a(e),o=r.pathname,n=r.search,s=r.hash;return i({pathname:o,search:n.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,r){return"?"===t?t:r}),hash:s})},r.getQueryStringValueFromPath=function(e,t){var r=a(e),o=r.search,n=o.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return n&&n[1]},function(e){var t=e.match(/^(https?:)?\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}),a=r.parsePath=function(e){var t=s(e),r="",o="",n=t.indexOf("#");-1!==n&&(o=t.substring(n),t=t.substring(0,n));var a=t.indexOf("?");return-1!==a&&(r=t.substring(a),t=t.substring(0,a)),""===t&&(t="/"),{pathname:t,search:r,hash:o}},i=r.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,r=e.pathname,o=e.search,n=e.hash,s=(t||"")+r;return o&&"?"!==o&&(s+=o),n&&(s+=n),s}},{warning:328}],320:[function(e,t,r){"use strict";r.__esModule=!0,r.replaceLocation=r.pushLocation=r.getCurrentLocation=r.go=r.getUserConfirmation=void 0;var o=e("./BrowserProtocol");Object.defineProperty(r,"getUserConfirmation",{enumerable:!0,get:function(){return o.getUserConfirmation}}),Object.defineProperty(r,"go",{enumerable:!0,get:function(){return o.go}});var n=e("./LocationUtils"),s=e("./PathUtils");r.getCurrentLocation=function(){return(0,n.createLocation)(window.location)},r.pushLocation=function(e){return window.location.href=(0,s.createPath)(e),!1},r.replaceLocation=function(e){return window.location.replace((0,s.createPath)(e)),!1}},{"./BrowserProtocol":314,"./LocationUtils":318,"./PathUtils":319}],321:[function(e,t,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=e("invariant"),i=n(a),l=e("./ExecutionEnvironment"),u=e("./BrowserProtocol"),d=o(u),c=e("./RefreshProtocol"),p=o(c),f=e("./DOMUtils"),m=e("./createHistory"),h=n(m),_=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l.canUseDOM?void 0:(0,i["default"])(!1);var t=e.forceRefresh||!(0,f.supportsHistory)(),r=t?p:d,o=r.getUserConfirmation,n=r.getCurrentLocation,a=r.pushLocation,u=r.replaceLocation,c=r.go,m=(0,h["default"])(s({getUserConfirmation:o},e,{getCurrentLocation:n,pushLocation:a,replaceLocation:u,go:c})),_=0,g=void 0,v=function(e,t){1===++_&&(g=d.startListener(m.transitionTo));var r=t?m.listenBefore(e):m.listen(e);return function(){r(),0===--_&&g()}},y=function(e){return v(e,!0)},b=function(e){return v(e,!1)};return s({},m,{listenBefore:y,listen:b})};r["default"]=_},{"./BrowserProtocol":314,"./DOMUtils":316,"./ExecutionEnvironment":317,"./RefreshProtocol":320,"./createHistory":322,invariant:285}],322:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("./AsyncUtils"),s=e("./PathUtils"),a=e("./runTransitionHook"),i=o(a),l=e("./Actions"),u=e("./LocationUtils"),d=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.getCurrentLocation,r=e.getUserConfirmation,o=e.pushLocation,a=e.replaceLocation,d=e.go,c=e.keyLength,p=void 0,f=void 0,m=[],h=[],_=[],g=function(){return f&&f.action===l.POP?_.indexOf(f.key):p?_.indexOf(p.key):-1},v=function(e){var t=g();p=e,p.action===l.PUSH?_=[].concat(_.slice(0,t+1),[p.key]):p.action===l.REPLACE&&(_[t]=p.key),h.forEach(function(e){return e(p)})},y=function(e){return m.push(e),function(){return m=m.filter(function(t){return t!==e})}},b=function(e){return h.push(e),function(){return h=h.filter(function(t){return t!==e})}},S=function(e,t){(0,n.loopAsync)(m.length,function(t,r,o){(0,i["default"])(m[t],e,function(e){return null!=e?o(e):r()})},function(e){r&&"string"==typeof e?r(e,function(e){return t(e!==!1)}):t(e!==!1)})},k=function(e){p&&(0,u.locationsAreEqual)(p,e)||f&&(0,u.locationsAreEqual)(f,e)||(f=e,S(e,function(t){if(f===e)if(f=null,t){if(e.action===l.PUSH){var r=(0,s.createPath)(p),n=(0,s.createPath)(e);n===r&&(0,u.statesAreEqual)(p.state,e.state)&&(e.action=l.REPLACE)}e.action===l.POP?v(e):e.action===l.PUSH?o(e)!==!1&&v(e):e.action===l.REPLACE&&a(e)!==!1&&v(e)}else if(p&&e.action===l.POP){var i=_.indexOf(p.key),c=_.indexOf(e.key);-1!==i&&-1!==c&&d(i-c)}}))},T=function(e){return k(C(e,l.PUSH))},P=function(e){return k(C(e,l.REPLACE))},w=function(){return d(-1)},N=function(){return d(1)},R=function(){return Math.random().toString(36).substr(2,c||6)},M=function(e){return(0,s.createPath)(e)},C=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?R():arguments[2];return(0,u.createLocation)(e,t,r)};return{getCurrentLocation:t,listenBefore:y,listen:b,transitionTo:k,push:T,replace:P,go:d,goBack:w,goForward:N,createKey:R,createPath:s.createPath,createHref:M,createLocation:C}};r["default"]=d},{"./Actions":312,"./AsyncUtils":313,"./LocationUtils":318,"./PathUtils":319,"./runTransitionHook":324}],323:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("warning"),a=(o(s),e("invariant")),i=o(a),l=e("./LocationUtils"),u=e("./PathUtils"),d=e("./createHistory"),c=o(d),p=e("./Actions"),f=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})},m=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});var t=function(){var e=h[_],t=(0,u.createPath)(e),r=void 0,o=void 0;e.key&&(r=e.key,o=y(r));var s=(0,u.parsePath)(t);return(0,l.createLocation)(n({},s,{state:o}),void 0,r)},r=function(e){var t=_+e;return t>=0&&t<h.length},o=function(e){if(e&&r(e)){_+=e;var o=t();d.transitionTo(n({},o,{action:p.POP}))}},s=function(e){_+=1,_<h.length&&h.splice(_),h.push(e),v(e.key,e.state)},a=function(e){h[_]=e,v(e.key,e.state)},d=(0,c["default"])(n({},e,{getCurrentLocation:t,pushLocation:s,replaceLocation:a,go:o})),m=e,h=m.entries,_=m.current;"string"==typeof h?h=[h]:Array.isArray(h)||(h=["/"]),h=h.map(function(e){return(0,l.createLocation)(e)}),null==_?_=h.length-1:_>=0&&_<h.length?void 0:(0,i["default"])(!1);var g=f(h),v=function(e,t){return g[e]=t},y=function(e){return g[e]};return n({},d,{canGo:r})};r["default"]=m},{"./Actions":312,"./LocationUtils":318,"./PathUtils":319,"./createHistory":322,invariant:285,warning:328}],324:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("warning"),s=(o(n),function(e,t,r){var o=e(t,r);e.length<2&&r(o)});r["default"]=s},{warning:328}],325:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("./runTransitionHook"),a=o(s),i=e("./PathUtils"),l=function(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=e(t),o=t.basename,s=function(e){return e?(o&&null==e.basename&&(0===e.pathname.indexOf(o)?(e.pathname=e.pathname.substring(o.length),e.basename=o,""===e.pathname&&(e.pathname="/")):e.basename=""),e):e},l=function(e){if(!o)return e;var t="string"==typeof e?(0,i.parsePath)(e):e,r=t.pathname,s="/"===o.slice(-1)?o:o+"/",a="/"===r.charAt(0)?r.slice(1):r,l=s+a;return n({},t,{pathname:l})},u=function(){return s(r.getCurrentLocation())},d=function(e){return r.listenBefore(function(t,r){return(0,a["default"])(e,s(t),r)})},c=function(e){return r.listen(function(t){return e(s(t))})},p=function(e){return r.push(l(e))},f=function(e){return r.replace(l(e))},m=function(e){return r.createPath(l(e))},h=function(e){return r.createHref(l(e))},_=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;t>n;n++)o[n-1]=arguments[n];return s(r.createLocation.apply(r,[l(e)].concat(o)))};return n({},r,{getCurrentLocation:u,listenBefore:d,listen:c,push:p,replace:f,createPath:m,createHref:h,createLocation:_})}};r["default"]=l},{"./PathUtils":319,"./runTransitionHook":324}],326:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("query-string"),a=e("./runTransitionHook"),i=o(a),l=e("./LocationUtils"),u=e("./PathUtils"),d=function(e){return(0,s.stringify)(e).replace(/%20/g,"+")},c=s.parse,p=function(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=e(t),o=t.stringifyQuery,s=t.parseQueryString;"function"!=typeof o&&(o=d),"function"!=typeof s&&(s=c);var a=function(e){return e?(null==e.query&&(e.query=s(e.search.substring(1))),e):e},p=function(e,t){if(null==t)return e;var r="string"==typeof e?(0,u.parsePath)(e):e,s=o(t),a=s?"?"+s:"";return n({},r,{search:a})},f=function(){return a(r.getCurrentLocation())},m=function(e){return r.listenBefore(function(t,r){return(0,i["default"])(e,a(t),r)})},h=function(e){return r.listen(function(t){return e(a(t))})},_=function(e){return r.push(p(e,e.query))},g=function(e){return r.replace(p(e,e.query))},v=function(e){return r.createPath(p(e,e.query))},y=function(e){return r.createHref(p(e,e.query))},b=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;t>n;n++)o[n-1]=arguments[n];var s=r.createLocation.apply(r,[p(e,e.query)].concat(o));return e.query&&(s.query=(0,l.createQuery)(e.query)),a(s)};return n({},r,{getCurrentLocation:f,listenBefore:m,listen:h,push:_,replace:g,createPath:v,createHref:y,createLocation:b})}};r["default"]=p},{"./LocationUtils":318,"./PathUtils":319,"./runTransitionHook":324,"query-string":286}],327:[function(e,t,r){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},{}],328:[function(e,t,r){/**
 * Copyright 2014-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */
"use strict";var o=function(){};t.exports=o},{}]},{},[65]);
//# sourceMappingURL=../react_client_side/site_header-038b8f61ab.js.map